{"version":3,"sources":["node_modules/browser-pack/_prelude.js","libzoterojs.js","node_modules/browserify/lib/_empty.js","node_modules/d/index.js","node_modules/deferred/_ext.js","node_modules/deferred/assimilate.js","node_modules/deferred/deferred.js","node_modules/deferred/dynamic-queue.js","node_modules/deferred/ext/_process-arguments.js","node_modules/deferred/ext/array/every.js","node_modules/deferred/ext/array/find.js","node_modules/deferred/ext/array/map.js","node_modules/deferred/ext/array/reduce.js","node_modules/deferred/ext/array/some.js","node_modules/deferred/ext/function/call-async.js","node_modules/deferred/ext/function/delay.js","node_modules/deferred/ext/function/gate.js","node_modules/deferred/ext/function/promisify-sync.js","node_modules/deferred/ext/function/promisify.js","node_modules/deferred/ext/promise/_array.js","node_modules/deferred/ext/promise/aside.js","node_modules/deferred/ext/promise/catch.js","node_modules/deferred/ext/promise/cb.js","node_modules/deferred/ext/promise/finally.js","node_modules/deferred/ext/promise/get.js","node_modules/deferred/ext/promise/invoke-async.js","node_modules/deferred/ext/promise/invoke.js","node_modules/deferred/ext/promise/map.js","node_modules/deferred/ext/promise/reduce.js","node_modules/deferred/ext/promise/some.js","node_modules/deferred/ext/promise/spread.js","node_modules/deferred/index.js","node_modules/deferred/invoke-async.js","node_modules/deferred/is-promise.js","node_modules/deferred/lib/some-every.js","node_modules/deferred/monitor.js","node_modules/deferred/profiler.js","node_modules/deferred/valid-promise.js","node_modules/es5-ext/array/from/index.js","node_modules/es5-ext/array/from/is-implemented.js","node_modules/es5-ext/array/from/shim.js","node_modules/es5-ext/array/of/index.js","node_modules/es5-ext/array/of/is-implemented.js","node_modules/es5-ext/array/of/shim.js","node_modules/es5-ext/array/to-array.js","node_modules/es5-ext/error/is-error.js","node_modules/es5-ext/function/#/partial.js","node_modules/es5-ext/function/#/spread.js","node_modules/es5-ext/function/_define-length.js","node_modules/es5-ext/function/is-arguments.js","node_modules/es5-ext/function/is-function.js","node_modules/es5-ext/function/noop.js","node_modules/es5-ext/iterable/is.js","node_modules/es5-ext/iterable/validate-object.js","node_modules/es5-ext/math/sign/index.js","node_modules/es5-ext/math/sign/is-implemented.js","node_modules/es5-ext/math/sign/shim.js","node_modules/es5-ext/number/to-integer.js","node_modules/es5-ext/number/to-pos-integer.js","node_modules/es5-ext/object/_iterate.js","node_modules/es5-ext/object/assign/index.js","node_modules/es5-ext/object/assign/is-implemented.js","node_modules/es5-ext/object/assign/shim.js","node_modules/es5-ext/object/for-each.js","node_modules/es5-ext/object/is-array-like.js","node_modules/es5-ext/object/is-callable.js","node_modules/es5-ext/object/is-object.js","node_modules/es5-ext/object/keys/index.js","node_modules/es5-ext/object/keys/is-implemented.js","node_modules/es5-ext/object/keys/shim.js","node_modules/es5-ext/object/mixin.js","node_modules/es5-ext/object/normalize-options.js","node_modules/es5-ext/object/valid-callable.js","node_modules/es5-ext/object/valid-object.js","node_modules/es5-ext/object/valid-value.js","node_modules/es5-ext/string/#/contains/index.js","node_modules/es5-ext/string/#/contains/is-implemented.js","node_modules/es5-ext/string/#/contains/shim.js","node_modules/es5-ext/string/#/pad.js","node_modules/es5-ext/string/#/repeat/index.js","node_modules/es5-ext/string/#/repeat/is-implemented.js","node_modules/es5-ext/string/#/repeat/shim.js","node_modules/es5-ext/string/is-string.js","node_modules/es6-promise/dist/es6-promise.js","node_modules/es6-symbol/index.js","node_modules/es6-symbol/is-implemented.js","node_modules/es6-symbol/is-symbol.js","node_modules/es6-symbol/polyfill.js","node_modules/es6-symbol/validate-symbol.js","node_modules/event-emitter/index.js","node_modules/event-emitter/unify.js","node_modules/next-tick/index.js","node_modules/process/browser.js","node_modules/spark-md5/spark-md5.js","node_modules/striptags/striptags.js","node_modules/timers-ext/max-timeout.js","node_modules/timers-ext/valid-timeout.js","src/Ajax.js","src/ApiObject.js","src/ApiResponse.js","src/Base.js","src/Cache.js","src/Collection.js","src/Collections.js","src/Container.js","src/Deleted.js","src/File.js","src/Group.js","src/Groups.js","src/Idb.js","src/Item.js","src/ItemMaps.js","src/Items.js","src/Library.js","src/Localizations.js","src/Log.js","src/Net.js","src/Preferences.js","src/Search.js","src/Searches.js","src/Tag.js","src/Tags.js","src/Url.js","src/User.js","src/Utils.js"],"names":[],"mappings":"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CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChJA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1GA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC17BA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/rBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/PA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA,YAAY,CAAC;;AAEb,IAAI,GAAG,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC;AACvD,IAAI,IAAI,GAAG,EAAE,CAAC;;AAEd,IAAI,CAAC,aAAa,GAAG,UAAS,QAAQ,EAAC;;AAEtC,IAAG,CAAC,KAAK,CAAC,qBAAqB,EAAE,CAAC,CAAC,CAAC;AACpC,IAAG,CAAC,KAAK,CAAC,cAAc,GAAG,QAAQ,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;AACnD,IAAG,CAAC,KAAK,CAAC,eAAe,EAAE,CAAC,CAAC,CAAC;AAC9B,IAAG,CAAC,KAAK,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC;AACnC,IAAG,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC,CA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","file":"libzoterojs.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","// use strict;\nif(typeof window === 'undefined') {\n\tvar globalScope = global;\n\tif(!globalScope.XMLHttpRequest) {\n\t\tglobalScope.XMLHttpRequest = require('w3c-xmlhttprequest').XMLHttpRequest;\n\t}\n} else {\n\tvar globalScope = window;\n\tif(typeof Promise === 'undefined') {\n\t\trequire('es6-promise').polyfill();\n\t}\n}\n\nvar Zotero = require('./src/Base.js');\nglobalScope.Zotero = globalScope.Z = Zotero;\nZotero.Cache = require('./src/Cache.js');\nZotero.Ajax = Zotero.ajax = require('./src/Ajax.js');\nZotero.ApiObject = require('./src/ApiObject.js');\nZotero.ApiResponse = require('./src/ApiResponse.js');\nZotero.Net = Zotero.net = require('./src/Net.js');\nZotero.Library = require('./src/Library.js');\nZotero.Container = require('./src/Container');\nZotero.Collections = require('./src/Collections.js');\nZotero.Items = require('./src/Items.js');\nZotero.Tags = require('./src/Tags.js');\nZotero.Groups = require('./src/Groups.js');\nZotero.Searches = require('./src/Searches.js');\nZotero.Deleted = require('./src/Deleted.js');\nZotero.Collection = require('./src/Collection.js');\nZotero.Localizations = Zotero.localizations = require('./src/Localizations.js');\nZotero.Item = require('./src/Item.js');\nZotero.Tag = require('./src/Tag.js');\nZotero.Search = require('./src/Search.js');\nZotero.Group = require('./src/Group.js');\nZotero.User = require('./src/User.js');\nZotero.Utils = Zotero.utils = require('./src/Utils.js');\nZotero.Url = Zotero.url = require('./src/Url.js');\nZotero.File = Zotero.file = require('./src/File.js');\nZotero.Idb = require('./src/Idb.js');\nZotero.Preferences = require('./src/Preferences.js');\n\nmodule.exports = Zotero;","","'use strict';\n\nvar assign        = require('es5-ext/object/assign')\n  , normalizeOpts = require('es5-ext/object/normalize-options')\n  , isCallable    = require('es5-ext/object/is-callable')\n  , contains      = require('es5-ext/string/#/contains')\n\n  , d;\n\nd = module.exports = function (dscr, value/*, options*/) {\n\tvar c, e, w, options, desc;\n\tif ((arguments.length < 2) || (typeof dscr !== 'string')) {\n\t\toptions = value;\n\t\tvalue = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[2];\n\t}\n\tif (dscr == null) {\n\t\tc = w = true;\n\t\te = false;\n\t} else {\n\t\tc = contains.call(dscr, 'c');\n\t\te = contains.call(dscr, 'e');\n\t\tw = contains.call(dscr, 'w');\n\t}\n\n\tdesc = { value: value, configurable: c, enumerable: e, writable: w };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n\nd.gs = function (dscr, get, set/*, options*/) {\n\tvar c, e, options, desc;\n\tif (typeof dscr !== 'string') {\n\t\toptions = set;\n\t\tset = get;\n\t\tget = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[3];\n\t}\n\tif (get == null) {\n\t\tget = undefined;\n\t} else if (!isCallable(get)) {\n\t\toptions = get;\n\t\tget = set = undefined;\n\t} else if (set == null) {\n\t\tset = undefined;\n\t} else if (!isCallable(set)) {\n\t\toptions = set;\n\t\tset = undefined;\n\t}\n\tif (dscr == null) {\n\t\tc = true;\n\t\te = false;\n\t} else {\n\t\tc = contains.call(dscr, 'c');\n\t\te = contains.call(dscr, 'e');\n\t}\n\n\tdesc = { get: get, set: set, configurable: c, enumerable: e };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n","'use strict';\n\nvar callable   = require('es5-ext/object/valid-callable')\n  , d          = require('d')\n  , isCallable = require('es5-ext/object/is-callable')\n  , ee         = require('event-emitter')\n  , isPromise  = require('./is-promise')\n\n  , create = Object.create, defineProperty = Object.defineProperty\n  , deferred, resolve, reject;\n\nmodule.exports = exports = function (name, unres, onres, res) {\n\tname = String(name);\n\t(callable(res) && ((onres == null) || callable(onres)) && callable(unres));\n\tdefineProperty(exports._unresolved, name, d(unres));\n\texports._onresolve[name] = onres;\n\tdefineProperty(exports._resolved, name, d(res));\n\texports._names.push(name);\n};\n\nexports._names = ['done', 'then', 'valueOf'];\n\nexports._unresolved = ee(create(Function.prototype, {\n\tthen: d(function (win, fail) {\n\t\tvar def;\n\t\tif (!this.pending) this.pending = [];\n\t\tdef = deferred();\n\t\tthis.pending.push('then', [win, fail, def.resolve, def.reject]);\n\t\treturn def.promise;\n\t}),\n\tdone: d(function (win, fail) {\n\t\t((win == null) || callable(win));\n\t\t((fail == null) || callable(fail));\n\t\tif (!this.pending) this.pending = [];\n\t\tthis.pending.push('done', arguments);\n\t}),\n\tresolved: d(false),\n\treturnsPromise: d(true),\n\tvalueOf: d(function () { return this; })\n}));\n\nexports._onresolve = {\n\tthen: function (win, fail, resolve, reject) {\n\t\tvar value, cb = this.failed ? fail : win;\n\t\tif (cb == null) {\n\t\t\tif (this.failed) reject(this.value);\n\t\t\telse resolve(this.value);\n\t\t\treturn;\n\t\t}\n\t\tif (isCallable(cb)) {\n\t\t\tif (isPromise(cb)) {\n\t\t\t\tif (cb.resolved) {\n\t\t\t\t\tif (cb.failed) reject(cb.value);\n\t\t\t\t\telse resolve(cb.value);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tcb.done(resolve, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttry { value = cb(this.value); } catch (e) {\n\t\t\t\treject(e);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresolve(value);\n\t\t\treturn;\n\t\t}\n\t\tresolve(cb);\n\t},\n\tdone: function (win, fail) {\n\t\tif (this.failed) {\n\t\t\tif (fail) {\n\t\t\t\tfail(this.value);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthrow this.value;\n\t\t}\n\t\tif (win) win(this.value);\n\t}\n};\n\nexports._resolved = ee(create(Function.prototype, {\n\tthen: d(function (win, fail) {\n\t\tvar value, cb = this.failed ? fail : win;\n\t\tif (cb == null) return this;\n\t\tif (isCallable(cb)) {\n\t\t\tif (isPromise(cb)) return cb;\n\t\t\ttry { value = cb(this.value); } catch (e) { return reject(e); }\n\t\t\treturn resolve(value);\n\t\t}\n\t\treturn resolve(cb);\n\t}),\n\tdone: d(function (win, fail) {\n\t\t((win == null) || callable(win));\n\t\t((fail == null) || callable(fail));\n\t\tif (this.failed) {\n\t\t\tif (fail) {\n\t\t\t\tfail(this.value);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthrow this.value;\n\t\t}\n\t\tif (win) win(this.value);\n\t}),\n\tresolved: d(true),\n\treturnsPromise: d(true),\n\tvalueOf: d(function () { return this.value; })\n}));\n\ndeferred = require('./deferred');\nresolve = deferred.resolve;\nreject = deferred.reject;\ndeferred.extend = exports;\n","// Assimilate eventual foreign promise\n\n'use strict';\n\nvar isObject  = require('es5-ext/object/is-object')\n  , isPromise = require('./is-promise')\n  , deferred  = require('./deferred')\n  , nextTick  = require('next-tick')\n\n  , getPrototypeOf = Object.getPrototypeOf;\n\nmodule.exports = function self(value) {\n\tvar then, done, def, resolve, reject;\n\tif (!value) return value;\n\ttry {\n\t\tthen = value.then;\n\t} catch (e) {\n\t\treturn value;\n\t}\n\tif (typeof then !== 'function') return value;\n\tif (isPromise(value)) return value;\n\tif (!isObject(value)) return value;\n\tif (!getPrototypeOf(value)) return value;\n\ttry {\n\t\tdone = value.done;\n\t} catch (ignore) {}\n\tdef = deferred();\n\tresolve = function (value) { def.resolve(self(value)); };\n\treject = function (value) { def.reject(value); };\n\tif (typeof done === 'function') {\n\t\ttry {\n\t\t\tdone.call(value, resolve, reject);\n\t\t} catch (e) {\n\t\t\treturn def.reject(e);\n\t\t}\n\t\treturn def.promise;\n\t}\n\ttry {\n\t\tthen.call(value, function (value) { nextTick(function () {\n\t\t\tresolve(value);\n\t\t}); }, function (value) { nextTick(function () {\n\t\t\treject(value);\n\t\t}); });\n\t} catch (e) {\n\t\treturn def.reject(e);\n\t}\n\treturn def.promise;\n};\n","// Returns function that returns deferred or promise object.\n//\n// 1. If invoked without arguments then deferred object is returned\n//    Deferred object consist of promise (unresolved) function and resolve\n//    function through which we resolve promise\n// 2. If invoked with one argument then promise is returned which resolved value\n//    is given argument. Argument may be any value (even undefined),\n//    if it's promise then same promise is returned\n// 3. If invoked with more than one arguments then promise that resolves with\n//    array of all resolved arguments is returned.\n\n'use strict';\n\nvar isError    = require('es5-ext/error/is-error')\n  , noop       = require('es5-ext/function/noop')\n  , isPromise  = require('./is-promise')\n\n  , every = Array.prototype.every, push = Array.prototype.push\n\n  , Deferred, createDeferred, count = 0, timeout, extendShim, ext\n  , protoSupported = Boolean(isPromise.__proto__)\n  , resolve, assimilate;\n\nextendShim = function (promise) {\n\text._names.forEach(function (name) {\n\t\tpromise[name] = function () {\n\t\t\treturn promise.__proto__[name].apply(promise, arguments);\n\t\t};\n\t});\n\tpromise.returnsPromise = true;\n\tpromise.resolved = promise.__proto__.resolved;\n};\n\nresolve = function (value, failed) {\n\tvar promise = function (win, fail) { return promise.then(win, fail); };\n\tpromise.value = value;\n\tpromise.failed = failed;\n\tpromise.__proto__ = ext._resolved;\n\tif (!protoSupported) { extendShim(promise); }\n\tif (createDeferred._profile) createDeferred._profile(true);\n\treturn promise;\n};\n\nDeferred = function () {\n\tvar promise = function (win, fail) { return promise.then(win, fail); };\n\tif (!count) timeout = setTimeout(noop, 1e9);\n\t++count;\n\tif (createDeferred._monitor) promise.monitor = createDeferred._monitor();\n\tpromise.__proto__ = ext._unresolved;\n\tif (!protoSupported) extendShim(promise);\n\t(createDeferred._profile && createDeferred._profile());\n\tthis.promise = promise;\n\tthis.resolve = this.resolve.bind(this);\n\tthis.reject = this.reject.bind(this);\n};\n\nDeferred.prototype = {\n\tresolved: false,\n\t_settle: function (value) {\n\t\tvar i, name, data, deps, dPromise, nuDeps;\n\t\tthis.promise.value = value;\n\t\tthis.promise.__proto__ = ext._resolved;\n\t\tif (!protoSupported) this.promise.resolved = true;\n\t\tdeps = this.promise.dependencies;\n\t\tdelete this.promise.dependencies;\n\t\twhile (deps) {\n\t\t\tfor (i = 0; (dPromise = deps[i]); ++i) {\n\t\t\t\tdPromise.value = value;\n\t\t\t\tdPromise.failed = this.failed;\n\t\t\t\tdPromise.__proto__ = ext._resolved;\n\t\t\t\tif (!protoSupported) dPromise.resolved = true;\n\t\t\t\tdelete dPromise.pending;\n\t\t\t\tif (dPromise.dependencies) {\n\t\t\t\t\tif (!nuDeps) nuDeps = dPromise.dependencies;\n\t\t\t\t\telse push.apply(nuDeps, dPromise.dependencies);\n\t\t\t\t\tdelete dPromise.dependencies;\n\t\t\t\t}\n\t\t\t}\n\t\t\tdeps = nuDeps;\n\t\t\tnuDeps = null;\n\t\t}\n\t\tif ((data = this.promise.pending)) {\n\t\t\tfor (i = 0; (name = data[i]); ++i) {\n\t\t\t\text._onresolve[name].apply(this.promise, data[++i]);\n\t\t\t}\n\t\t\tdelete this.promise.pending;\n\t\t}\n\t\treturn this.promise;\n\t},\n\tresolve: function (value) {\n\t\tif (this.resolved) return this.promise;\n\t\tthis.resolved = true;\n\t\tif (!--count) clearTimeout(timeout);\n\t\tif (this.promise.monitor) clearTimeout(this.promise.monitor);\n\t\tvalue = assimilate(value);\n\t\tif (isPromise(value)) {\n\t\t\tif (!value.resolved) {\n\t\t\t\tif (!value.dependencies) {\n\t\t\t\t\tvalue.dependencies = [];\n\t\t\t\t}\n\t\t\t\tvalue.dependencies.push(this.promise);\n\t\t\t\tif (this.promise.pending) {\n\t\t\t\t\tif (value.pending) {\n\t\t\t\t\t\tpush.apply(value.pending, this.promise.pending);\n\t\t\t\t\t\tthis.promise.pending = value.pending;\n\t\t\t\t\t\tif (this.promise.dependencies) {\n\t\t\t\t\t\t\tthis.promise.dependencies.forEach(function self(dPromise) {\n\t\t\t\t\t\t\t\tdPromise.pending = value.pending;\n\t\t\t\t\t\t\t\tif (dPromise.dependencies) {\n\t\t\t\t\t\t\t\t\tdPromise.dependencies.forEach(self);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalue.pending = this.promise.pending;\n\t\t\t\t\t}\n\t\t\t\t} else if (value.pending) {\n\t\t\t\t\tthis.promise.pending = value.pending;\n\t\t\t\t} else {\n\t\t\t\t\tthis.promise.pending = value.pending = [];\n\t\t\t\t}\n\t\t\t\treturn this.promise;\n\t\t\t}\n\t\t\tthis.promise.failed = value.failed;\n\t\t\tvalue = value.value;\n\t\t}\n\t\treturn this._settle(value);\n\t},\n\treject: function (error) {\n\t\tif (this.resolved) return this.promise;\n\t\tthis.resolved = true;\n\t\tif (!--count) clearTimeout(timeout);\n\t\tif (this.promise.monitor) clearTimeout(this.promise.monitor);\n\t\tthis.promise.failed = true;\n\t\treturn this._settle(error);\n\t}\n};\n\nmodule.exports = createDeferred = function (value) {\n\tvar l = arguments.length, d, waiting, initialized, result;\n\tif (!l) return new Deferred();\n\tif (l > 1) {\n\t\td = new Deferred();\n\t\twaiting = 0;\n\t\tresult = new Array(l);\n\t\tevery.call(arguments, function (value, index) {\n\t\t\tvalue = assimilate(value);\n\t\t\tif (!isPromise(value)) {\n\t\t\t\tresult[index] = value;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (value.resolved) {\n\t\t\t\tif (value.failed) {\n\t\t\t\t\td.reject(value.value);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tresult[index] = value.value;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\t++waiting;\n\t\t\tvalue.done(function (value) {\n\t\t\t\tresult[index] = value;\n\t\t\t\tif (!--waiting && initialized) d.resolve(result);\n\t\t\t}, d.reject);\n\t\t\treturn true;\n\t\t});\n\t\tinitialized = true;\n\t\tif (!waiting) d.resolve(result);\n\t\treturn d.promise;\n\t}\n\tvalue = assimilate(value);\n\tif (isPromise(value)) return value;\n\treturn resolve(value, isError(value));\n};\n\ncreateDeferred.Deferred = Deferred;\ncreateDeferred.reject = function (value) { return resolve(value, true); };\ncreateDeferred.resolve = function (value) {\n\tvalue = assimilate(value);\n\tif (isPromise(value)) return value;\n\treturn resolve(value, false);\n};\next = require('./_ext');\nassimilate = require('./assimilate');\n","// Dynamic queue handler\n// Allows to create a promise queue, where new promises can be added to queue until last promise in\n// a queue resolves. Queue promise resolves with `undefined` value, when last promises resolves.\n\n'use strict';\n\nvar aFrom          = require('es5-ext/array/from')\n  , ensureIterable = require('es5-ext/iterable/validate-object')\n  , assign         = require('es5-ext/object/assign')\n  , deferred       = require('./deferred')\n  , isPromise      = require('./is-promise')\n  , assimilate     = require('./assimilate')\n\n  , DynamicQueue;\n\nmodule.exports = DynamicQueue = function (list) {\n\tif (!(this instanceof DynamicQueue)) return new DynamicQueue(list);\n\tlist = aFrom(ensureIterable(list));\n\n\tassign(this, deferred());\n\tlist.every(this.add, this);\n\tif (!this.waiting) {\n\t\tthis.resolve();\n\t\treturn;\n\t}\n\tthis.initialized = true;\n};\n\nDynamicQueue.prototype = {\n\twaiting: 0,\n\tinitialized: false,\n\tadd: function (value) {\n\t\tif (this.promise.resolved) throw new Error(\"Queue was already resolved\");\n\t\t++this.waiting;\n\t\tvalue = assimilate(value);\n\t\tif (isPromise(value)) {\n\t\t\tif (!value.resolved) {\n\t\t\t\tvalue.done(this._processValue.bind(this), this.reject);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (value.failed) {\n\t\t\t\tthis.reject(value.value);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn this._processValue();\n\t},\n\t_processValue: function () {\n\t\tif (this.promise.resolved) return;\n\t\tif (!--this.waiting && this.initialized) this.resolve();\n\t\treturn true;\n\t}\n};\n","'use strict';\n\nvar arrayOf    = require('es5-ext/array/of')\n  , deferred   = require('../deferred')\n  , isPromise  = require('../is-promise')\n  , assimilate = require('../assimilate')\n\n  , push = Array.prototype.push, slice = Array.prototype.slice;\n\nmodule.exports = function (args, length) {\n\tvar i, l, arg;\n\tif ((length != null) && (args.length !== length)) {\n\t\targs = slice.call(args, 0, length);\n\t\tif (args.length < length) {\n\t\t\tpush.apply(args, new Array(length - args.length));\n\t\t}\n\t}\n\tfor (i = 0, l = args.length; i < l; ++i) {\n\t\targ = assimilate(args[i]);\n\t\tif (isPromise(arg)) {\n\t\t\tif (!arg.resolved) {\n\t\t\t\tif (l > 1) return deferred.apply(null, args);\n\t\t\t\treturn arg(arrayOf);\n\t\t\t}\n\t\t\tif (arg.failed) return arg;\n\t\t\targs[i] = arg.value;\n\t\t}\n\t}\n\treturn args;\n};\n","// Promise aware Array's every\n\n'use strict';\n\nmodule.exports = require('../../lib/some-every')(false);\n","// Promise aware Array's find\n// Additionally differs from some that it returns *first in order* item that matches constraint\n\n'use strict';\n\nvar assign     = require('es5-ext/object/assign')\n  , value      = require('es5-ext/object/valid-value')\n  , callable   = require('es5-ext/object/valid-callable')\n  , deferred   = require('../../deferred')\n  , isPromise  = require('../../is-promise')\n  , assimilate = require('../../assimilate')\n\n  , call = Function.prototype.call\n  , resolve = deferred.resolve\n  , Find;\n\nFind = function (list, cb, context) {\n\tthis.list = list;\n\tthis.cb = cb;\n\tthis.context = context;\n\tthis.length = list.length >>> 0;\n\n\twhile (this.current < this.length) {\n\t\tif (this.current in list) {\n\t\t\tassign(this, deferred());\n\t\t\tthis.processCb = this.processCb.bind(this);\n\t\t\tthis.process();\n\t\t\treturn this.promise;\n\t\t}\n\t\t++this.current;\n\t}\n\treturn resolve(undefined);\n};\n\nFind.prototype = {\n\tcurrent: 0,\n\tprocess: function () {\n\t\tvar value = assimilate(this.list[this.current]);\n\t\tif (isPromise(value)) {\n\t\t\tif (!value.resolved) {\n\t\t\t\tvalue.done(this.processCb, this.reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (value.failed) {\n\t\t\t\tthis.reject(value.value);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvalue = value.value;\n\t\t}\n\t\tthis.processCb(value);\n\t},\n\tprocessCb: function (listValue) {\n\t\tvar value;\n\t\tif (this.cb) {\n\t\t\ttry {\n\t\t\t\tvalue = call.call(this.cb, this.context, listValue, this.current, this.list);\n\t\t\t} catch (e) {\n\t\t\t\tthis.reject(e);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvalue = assimilate(value);\n\t\t\tif (isPromise(value)) {\n\t\t\t\tif (!value.resolved) {\n\t\t\t\t\tvalue.done(this.processValue.bind(this, listValue), this.reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (value.failed) {\n\t\t\t\t\tthis.reject(value.value);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvalue = value.value;\n\t\t\t}\n\t\t} else {\n\t\t\tvalue = listValue;\n\t\t}\n\t\tthis.processValue(listValue, value);\n\t},\n\tprocessValue: function (listValue, value) {\n\t\tif (value) {\n\t\t\tthis.resolve(listValue);\n\t\t\treturn;\n\t\t}\n\t\twhile (++this.current < this.length) {\n\t\t\tif (this.current in this.list) {\n\t\t\t\tthis.process();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tthis.resolve(undefined);\n\t}\n};\n\nmodule.exports = function (cb/*, thisArg*/) {\n\tvalue(this);\n\t((cb == null) || callable(cb));\n\n\treturn new Find(this, cb, arguments[1]);\n};\n","// Promise aware Array's map\n\n'use strict';\n\nvar assign     = require('es5-ext/object/assign')\n  , value      = require('es5-ext/object/valid-value')\n  , callable   = require('es5-ext/object/valid-callable')\n  , deferred   = require('../../deferred')\n  , isPromise  = require('../../is-promise')\n  , assimilate = require('../../assimilate')\n\n  , every = Array.prototype.every\n  , call = Function.prototype.call\n\n  , DMap;\n\nDMap = function (list, cb, context) {\n\tthis.list = list;\n\tthis.cb = cb;\n\tthis.context = context;\n\tthis.result = new Array(list.length >>> 0);\n\n\tassign(this, deferred());\n\tevery.call(list, this.process, this);\n\tif (!this.waiting) return this.resolve(this.result);\n\tthis.initialized = true;\n\n\treturn this.promise;\n};\n\nDMap.prototype = {\n\twaiting: 0,\n\tinitialized: false,\n\tprocess: function (value, index) {\n\t\t++this.waiting;\n\t\tvalue = assimilate(value);\n\t\tif (isPromise(value)) {\n\t\t\tif (!value.resolved) {\n\t\t\t\tvalue.done(this.processCb.bind(this, index), this.reject);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (value.failed) {\n\t\t\t\tthis.reject(value.value);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvalue = value.value;\n\t\t}\n\t\treturn this.processCb(index, value);\n\t},\n\tprocessCb: function (index, value) {\n\t\tif (this.promise.resolved) return false;\n\t\tif (this.cb) {\n\t\t\ttry {\n\t\t\t\tvalue = call.call(this.cb, this.context, value, index, this.list);\n\t\t\t} catch (e) {\n\t\t\t\tthis.reject(e);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvalue = assimilate(value);\n\t\t\tif (isPromise(value)) {\n\t\t\t\tif (!value.resolved) {\n\t\t\t\t\tvalue.done(this.processValue.bind(this, index), this.reject);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tif (value.failed) {\n\t\t\t\t\tthis.reject(value.value);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tvalue = value.value;\n\t\t\t}\n\t\t}\n\t\tthis.processValue(index, value);\n\t\treturn true;\n\t},\n\tprocessValue: function (index, value) {\n\t\tif (this.promise.resolved) return;\n\t\tthis.result[index] = value;\n\t\tif (!--this.waiting && this.initialized) this.resolve(this.result);\n\t}\n};\n\nmodule.exports = function (cb/*, thisArg*/) {\n\tvalue(this);\n\t((cb == null) || callable(cb));\n\n\treturn new DMap(this, cb, arguments[1]);\n};\n","// Promise aware Array's reduce\n\n'use strict';\n\nvar assign     = require('es5-ext/object/assign')\n  , value      = require('es5-ext/object/valid-value')\n  , callable   = require('es5-ext/object/valid-callable')\n  , deferred   = require('../../deferred')\n  , isPromise  = require('../../is-promise')\n  , assimilate = require('../../assimilate')\n\n  , call = Function.prototype.call\n  , hasOwnProperty = Object.prototype.hasOwnProperty\n  , resolve = deferred.resolve\n  , Reduce;\n\nReduce = function (list, cb, initial, initialized) {\n\tthis.list = list;\n\tthis.cb = cb;\n\tthis.initialized = initialized;\n\tthis.length = list.length >>> 0;\n\n\tinitial = assimilate(initial);\n\tif (isPromise(initial)) {\n\t\tif (!initial.resolved) {\n\t\t\tassign(this, deferred());\n\t\t\tinitial.done(function (initial) {\n\t\t\t\tthis.value = initial;\n\t\t\t\tthis.init();\n\t\t\t}.bind(this), this.reject);\n\t\t\treturn this.promise;\n\t\t}\n\t\tthis.value = initial.value;\n\t\tif (initial.failed) return initial;\n\t} else {\n\t\tthis.value = initial;\n\t}\n\n\treturn this.init();\n};\n\nReduce.prototype = {\n\tcurrent: 0,\n\tstate: false,\n\tinit: function () {\n\t\twhile (this.current < this.length) {\n\t\t\tif (hasOwnProperty.call(this.list, this.current)) break;\n\t\t\t++this.current;\n\t\t}\n\t\tif (this.current === this.length) {\n\t\t\tif (!this.initialized) {\n\t\t\t\tthrow new Error(\"Reduce of empty array with no initial value\");\n\t\t\t}\n\t\t\treturn this.resolve ? this.resolve(this.value) : resolve(this.value);\n\t\t}\n\t\tif (!this.promise) assign(this, deferred());\n\t\tthis.processCb = this.processCb.bind(this);\n\t\tthis.processValue = this.processValue.bind(this);\n\t\tthis.continue();\n\t\treturn this.promise;\n\t},\n\tcontinue: function () {\n\t\tvar result;\n\t\twhile (!this.state) {\n\t\t\tresult = this.process();\n\t\t\tif (this.state !== 'cb') break;\n\t\t\tresult = this.processCb(result);\n\t\t\tif (this.state !== 'value') break;\n\t\t\tthis.processValue(result);\n\t\t}\n\t},\n\tprocess: function () {\n\t\tvar value = assimilate(this.list[this.current]);\n\t\tif (isPromise(value)) {\n\t\t\tif (!value.resolved) {\n\t\t\t\tvalue.done(function (result) {\n\t\t\t\t\tresult = this.processCb(result);\n\t\t\t\t\tif (this.state !== 'value') return;\n\t\t\t\t\tthis.processValue(result);\n\t\t\t\t\tif (!this.state) this.continue();\n\t\t\t\t}.bind(this), this.reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (value.failed) {\n\t\t\t\tthis.reject(value.value);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvalue = value.value;\n\t\t}\n\t\tthis.state = 'cb';\n\t\treturn value;\n\t},\n\tprocessCb: function (value) {\n\t\tif (!this.initialized) {\n\t\t\tthis.initialized = true;\n\t\t\tthis.state = 'value';\n\t\t\treturn value;\n\t\t}\n\t\tif (this.cb) {\n\t\t\ttry {\n\t\t\t\tvalue = call.call(this.cb, undefined, this.value, value, this.current,\n\t\t\t\t\tthis.list);\n\t\t\t} catch (e) {\n\t\t\t\tthis.reject(e);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvalue = assimilate(value);\n\t\t\tif (isPromise(value)) {\n\t\t\t\tif (!value.resolved) {\n\t\t\t\t\tvalue.done(function (result) {\n\t\t\t\t\t\tthis.state = 'value';\n\t\t\t\t\t\tthis.processValue(result);\n\t\t\t\t\t\tif (!this.state) this.continue();\n\t\t\t\t\t}.bind(this), this.reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (value.failed) {\n\t\t\t\t\tthis.reject(value.value);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvalue = value.value;\n\t\t\t}\n\t\t}\n\t\tthis.state = 'value';\n\t\treturn value;\n\t},\n\tprocessValue: function (value) {\n\t\tthis.value = value;\n\t\twhile (++this.current < this.length) {\n\t\t\tif (hasOwnProperty.call(this.list, this.current)) {\n\t\t\t\tthis.state = false;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tthis.resolve(this.value);\n\t}\n};\n\nmodule.exports = function (cb/*, initial*/) {\n\tvalue(this);\n\t((cb == null) || callable(cb));\n\n\treturn new Reduce(this, cb, arguments[1], arguments.length > 1);\n};\n","// Promise aware Array's some\n\n'use strict';\n\nmodule.exports = require('../../lib/some-every')(true);\n","// Call asynchronous function\n\n'use strict';\n\nvar toArray          = require('es5-ext/array/to-array')\n  , callable         = require('es5-ext/object/valid-callable')\n  , deferred         = require('../../deferred')\n  , isPromise        = require('../../is-promise')\n  , processArguments = require('../_process-arguments')\n\n  , slice = Array.prototype.slice, apply = Function.prototype.apply\n\n  , applyFn, callAsync;\n\napplyFn = function (fn, args, def) {\n\targs = toArray(args);\n\tapply.call(fn,  this, args.concat(function (error, result) {\n\t\tif (error == null) {\n\t\t\tdef.resolve((arguments.length > 2) ? slice.call(arguments, 1) : result);\n\t\t} else {\n\t\t\tdef.reject(error);\n\t\t}\n\t}));\n};\n\ncallAsync = function (fn, length, context, args) {\n\tvar def;\n\targs = processArguments(args, length);\n\tif (isPromise(args)) {\n\t\tif (args.failed) return args;\n\t\tdef = deferred();\n\t\targs.done(function (args) {\n\t\t\tif (fn.returnsPromise) return apply.call(fn, context, args);\n\t\t\ttry {\n\t\t\t\tapplyFn.call(context, fn, args, def);\n\t\t\t} catch (e) { def.reject(e); }\n\t\t}, def.reject);\n\t\treturn def.promise;\n\t}\n\tif (fn.returnsPromise) return apply.call(fn, context, args);\n\tdef = deferred();\n\ttry {\n\t\tapplyFn.call(context, fn, args, def);\n\t} catch (e) {\n\t\tdef.reject(e);\n\t\tthrow e;\n\t}\n\treturn def.promise;\n};\n\nmodule.exports = exports = function (context/*, args*/) {\n\treturn callAsync(callable(this), null, context, slice.call(arguments, 1));\n};\n\nObject.defineProperty(exports, '_base', { configurable: true,\n\tenumerable: false, writable: true, value: callAsync });\n","// Delay function execution, return promise for delayed function result\n\n'use strict';\n\nvar callable      = require('es5-ext/object/valid-callable')\n  , nextTick      = require('next-tick')\n  , ensureTimeout = require('timers-ext/valid-timeout')\n  , deferred      = require('../../deferred')\n\n  , apply    = Function.prototype.apply\n  , delayed;\n\ndelayed = function (fn, args, resolve, reject) {\n\tvar value;\n\ttry {\n\t\tvalue = apply.call(fn, this, args);\n\t} catch (e) {\n\t\treject(e);\n\t\treturn;\n\t}\n\tresolve(value);\n};\n\nmodule.exports = function (timeout) {\n\tvar fn, result, delay;\n\tfn = callable(this);\n\tif (timeout == null) {\n\t\tdelay = nextTick;\n\t} else {\n\t\ttimeout = ensureTimeout(timeout);\n\t\tdelay = setTimeout;\n\t}\n\tresult = function () {\n\t\tvar def = deferred();\n\t\tdelay(delayed.bind(this, fn, arguments, def.resolve, def.reject), timeout);\n\t\treturn def.promise;\n\t};\n\tresult.returnsPromise = true;\n\treturn result;\n};\n","// Limit number of concurrent function executions (to cLimit number).\n// Limited calls are queued. Optionaly maximum queue length can also be\n// controlled with qLimit value, any calls that would reach over that limit\n// would be discarded (its promise would resolve with \"Too many calls\" error)\n\n'use strict';\n\nvar toPosInt   = require('es5-ext/number/to-pos-integer')\n  , callable   = require('es5-ext/object/valid-callable')\n  , eeUnify    = require('event-emitter/unify')\n  , deferred   = require('../../deferred')\n  , isPromise  = require('../../is-promise')\n  , assimilate = require('../../assimilate')\n\n  , resolve = deferred.resolve, reject = deferred.reject\n  , apply = Function.prototype.apply, max = Math.max\n  , gateReject;\n\nrequire('../promise/finally');\n\ngateReject = function () {\n\tvar e = new Error(\"Too many calls\");\n\te.type = 'deferred-gate-rejected';\n\treturn reject(e);\n};\n\nmodule.exports = function (cLimit, qLimit) {\n\tvar fn, count, decrement, unload, queue, run, result;\n\tfn = callable(this);\n\tcLimit = max(toPosInt(cLimit), 1);\n\tqLimit = ((qLimit == null) || isNaN(qLimit)) ? Infinity : toPosInt(qLimit);\n\tcount = 0;\n\tqueue = [];\n\n\trun = function (thisArg, args, def) {\n\t\tvar r;\n\t\ttry {\n\t\t\tr = apply.call(fn, thisArg, args);\n\t\t} catch (e) {\n\t\t\tif (!def) return reject(e);\n\t\t\tdef.reject(e);\n\t\t\tunload();\n\t\t\treturn;\n\t\t}\n\t\tr = assimilate(r);\n\t\tif (isPromise(r)) {\n\t\t\tif (def) eeUnify(def.promise, r);\n\t\t\tif (!r.resolved) {\n\t\t\t\t++count;\n\t\t\t\tif (def) def.resolve(r);\n\t\t\t\treturn r.finally(decrement);\n\t\t\t}\n\t\t\tr = r.value;\n\t\t}\n\t\tif (!def) return resolve(r);\n\t\tdef.resolve(r);\n\t\tunload();\n\t};\n\n\tdecrement = function () {\n\t\t--count;\n\t\tunload();\n\t};\n\n\tunload = function () {\n\t\tvar data;\n\t\tif ((data = queue.shift())) run.apply(null, data);\n\t};\n\n\tresult = function () {\n\t\tvar def;\n\t\tif (count >= cLimit) {\n\t\t\tif (queue.length < qLimit) {\n\t\t\t\tdef = deferred();\n\t\t\t\tqueue.push([this, arguments, def]);\n\t\t\t\treturn def.promise;\n\t\t\t}\n\t\t\treturn gateReject();\n\t\t}\n\t\treturn run(this, arguments);\n\t};\n\tresult.returnsPromise = true;\n\treturn result;\n};\n","// Promisify synchronous function\n\n'use strict';\n\nvar callable         = require('es5-ext/object/valid-callable')\n  , deferred         = require('../../deferred')\n  , isPromise        = require('../../is-promise')\n  , processArguments = require('../_process-arguments')\n\n  , apply = Function.prototype.apply\n\n  , applyFn;\n\napplyFn = function (fn, args, resolve, reject) {\n\tvar value;\n\ttry {\n\t\tvalue = apply.call(fn, this, args);\n\t} catch (e) {\n\t\treject(e);\n\t\treturn;\n\t}\n\tresolve(value);\n};\n\nmodule.exports = function (length) {\n\tvar fn, result;\n\tfn = callable(this);\n\tif (fn.returnsPromise) return fn;\n\tif (length != null) length = length >>> 0;\n\tresult = function () {\n\t\tvar args, def;\n\t\targs = processArguments(arguments, length);\n\n\t\tif (isPromise(args)) {\n\t\t\tif (args.failed) return args;\n\t\t\tdef = deferred();\n\t\t\targs.done(function (args) {\n\t\t\t\tapplyFn.call(this, fn, args, def.resolve, def.reject);\n\t\t\t}.bind(this), def.reject);\n\t\t} else {\n\t\t\tdef = deferred();\n\t\t\tapplyFn.call(this, fn, args, def.resolve, def.reject);\n\t\t}\n\n\t\treturn def.promise;\n\t};\n\tresult.returnsPromise = true;\n\treturn result;\n};\n","// Promisify asynchronous function\n\n'use strict';\n\nvar callable  = require('es5-ext/object/valid-callable')\n  , callAsync = require('./call-async')._base;\n\nmodule.exports = function (length) {\n\tvar fn, result;\n\tfn = callable(this);\n\tif (fn.returnsPromise) return fn;\n\tif (length != null) length = length >>> 0;\n\tresult = function () { return callAsync(fn, length, this, arguments); };\n\tresult.returnsPromise = true;\n\treturn result;\n};\n","// Used by promise extensions that are based on array extensions.\n\n'use strict';\n\nvar callable = require('es5-ext/object/valid-callable')\n  , deferred = require('../../deferred')\n\n  , reject = deferred.reject;\n\nmodule.exports = function (name, ext) {\n\tdeferred.extend(name, function (cb) {\n\t\tvar def;\n\t\t((cb == null) || callable(cb));\n\t\tif (!this.pending) this.pending = [];\n\t\tdef = deferred();\n\t\tthis.pending.push(name, [arguments, def.resolve, def.reject]);\n\t\treturn def.promise;\n\t}, function (args, resolve, reject) {\n\t\tvar result;\n\t\tif (this.failed) {\n\t\t\treject(this.value);\n\t\t\treturn;\n\t\t}\n\t\ttry {\n\t\t\tresult = ext.apply(this.value, args);\n\t\t} catch (e) {\n\t\t\treject(e);\n\t\t\treturn;\n\t\t}\n\t\tresolve(result);\n\t}, function (cb) {\n\t\t((cb == null) || callable(cb));\n\t\tif (this.failed) return this;\n\t\ttry {\n\t\t\treturn ext.apply(this.value, arguments);\n\t\t} catch (e) {\n\t\t\treturn reject(e);\n\t\t}\n\t});\n};\n","// 'aside' - Promise extension\n//\n// promise.aside(win, fail)\n//\n// Works in analogous way as promise function itself (or `then`)\n// but instead of adding promise to promise chain it returns context promise and\n// lets callback carry on with other processing logic\n\n'use strict';\n\nvar callable = require('es5-ext/object/valid-callable')\n  , deferred = require('../../deferred');\n\ndeferred.extend('aside', function (win, fail) {\n\t((win == null) || callable(win));\n\t((fail == null) || callable(fail));\n\tif (win || fail) {\n\t\tif (!this.pending) {\n\t\t\tthis.pending = [];\n\t\t}\n\t\tthis.pending.push('aside', arguments);\n\t}\n\treturn this;\n}, function (win, fail) {\n\tvar cb = this.failed ? fail : win;\n\tif (cb) {\n\t\tcb(this.value);\n\t}\n}, function (win, fail) {\n\tvar cb;\n\t((win == null) || callable(win));\n\t((fail == null) || callable(fail));\n\tcb = this.failed ? fail : win;\n\tif (cb) {\n\t\tcb(this.value);\n\t}\n\treturn this;\n});\n","// 'catch' - Promise extension\n//\n// promise.catch(cb)\n//\n// Same as `then` but accepts only onFail callback\n\n'use strict';\n\nvar isCallable = require('es5-ext/object/is-callable')\n  , validValue = require('es5-ext/object/valid-value')\n  , deferred   = require('../../deferred')\n  , isPromise  = require('../../is-promise')\n\n  , resolve = deferred.resolve, reject = deferred.reject;\n\ndeferred.extend('catch', function (cb) {\n\tvar def;\n\tvalidValue(cb);\n\tif (!this.pending) this.pending = [];\n\tdef = deferred();\n\tthis.pending.push('catch', [cb, def.resolve, def.reject]);\n\treturn def.promise;\n}, function (cb, resolve, reject) {\n\tvar value;\n\tif (!this.failed) {\n\t\tresolve(this.value);\n\t\treturn;\n\t}\n\tif (isCallable(cb)) {\n\t\tif (isPromise(cb)) {\n\t\t\tif (cb.resolved) {\n\t\t\t\tif (cb.failed) reject(cb.value);\n\t\t\t\telse resolve(cb.value);\n\t\t\t} else {\n\t\t\t\tcb.done(resolve, reject);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\ttry { value = cb(this.value); } catch (e) {\n\t\t\treject(e);\n\t\t\treturn;\n\t\t}\n\t\tresolve(value);\n\t\treturn;\n\t}\n\tresolve(cb);\n}, function (cb) {\n\tvar value;\n\tvalidValue(cb);\n\tif (!this.failed) return this;\n\tif (isCallable(cb)) {\n\t\tif (isPromise(cb)) return cb;\n\t\ttry { value = cb(this.value); } catch (e) {\n\t\t\treturn reject(e);\n\t\t}\n\t\treturn resolve(value);\n\t}\n\treturn resolve(cb);\n});\n","// 'cb' - Promise extension\n//\n// promise.cb(cb)\n//\n// Handles asynchronous function style callback (which is run in next event loop\n// the earliest). Returns self promise. Callback is optional.\n//\n// Useful when we want to configure typical asynchronous function which logic is\n// internally configured with promises.\n//\n// Extension can be used as follows:\n//\n// var foo = function (arg1, arg2, cb) {\n//     var d = deferred();\n//     // ... implementation\n//     return d.promise.cb(cb);\n// };\n//\n// `cb` extension returns promise and handles eventual callback (optional)\n\n'use strict';\n\nvar callable   = require('es5-ext/object/valid-callable')\n  , nextTick   = require('next-tick')\n  , deferred   = require('../../deferred');\n\ndeferred.extend('cb', function (cb) {\n\tif (cb == null) return this;\n\tcallable(cb);\n\tnextTick(function () {\n\t\tif (this.resolved) {\n\t\t\tif (this.failed) cb(this.value);\n\t\t\telse cb(null, this.value);\n\t\t} else {\n\t\t\tif (!this.pending) this.pending = [];\n\t\t\tthis.pending.push('cb', [cb]);\n\t\t}\n\t}.bind(this));\n\treturn this;\n}, function (cb) {\n\tif (this.failed) cb(this.value);\n\telse cb(null, this.value);\n}, function (cb) {\n\tif (cb == null) return this;\n\tcallable(cb);\n\tnextTick(function () {\n\t\tif (this.failed) cb(this.value);\n\t\telse cb(null, this.value);\n\t}.bind(this));\n\treturn this;\n});\n","// 'finally' - Promise extension\n//\n// promise.finally(cb)\n//\n// Called on promise resolution returns same promise, doesn't pass any values to\n// provided callback\n\n'use strict';\n\nvar callable = require('es5-ext/object/valid-callable')\n  , deferred = require('../../deferred');\n\ndeferred.extend('finally', function (cb) {\n\tcallable(cb);\n\tif (!this.pending) this.pending = [];\n\tthis.pending.push('finally', arguments);\n\treturn this;\n}, function (cb) { cb(); }, function (cb) {\n\tcallable(cb)();\n\treturn this;\n});\n","// 'get' - Promise extension\n//\n// promise.get(name)\n//\n// Resolves with property of resolved object\n\n'use strict';\n\nvar value    = require('es5-ext/object/valid-value')\n  , deferred = require('../../deferred')\n\n  , reduce = Array.prototype.reduce\n  , resolve = deferred.resolve, reject = deferred.reject;\n\ndeferred.extend('get', function (/*name*/) {\n\tvar def;\n\tif (!this.pending) this.pending = [];\n\tdef = deferred();\n\tthis.pending.push('get', [arguments, def.resolve, def.reject]);\n\treturn def.promise;\n\n}, function (args, resolve, reject) {\n\tvar result;\n\tif (this.failed) reject(this.value);\n\ttry {\n\t\tresult = reduce.call(args, function (obj, key) {\n\t\t\treturn value(obj)[String(key)];\n\t\t}, this.value);\n\t} catch (e) {\n\t\treject(e);\n\t\treturn;\n\t}\n\tresolve(result);\n}, function (/*name*/) {\n\tvar result;\n\tif (this.failed) return this;\n\ttry {\n\t\tresult = reduce.call(arguments, function (obj, key) {\n\t\t\treturn value(obj)[String(key)];\n\t\t}, this.value);\n\t} catch (e) {\n\t\treturn reject(e);\n\t}\n\treturn resolve(result);\n});\n","// 'invokeAsync' - Promise extension\n//\n// promise.invokeAsync(name[, arg0[, arg1[, ...]]])\n//\n// On resolved object calls asynchronous method that takes callback\n// (Node.js style).\n// Do not pass callback, it's handled by internal implementation.\n// 'name' can be method name or method itself.\n\n'use strict';\n\nvar toArray          = require('es5-ext/array/to-array')\n  , isCallable       = require('es5-ext/object/is-callable')\n  , deferred         = require('../../deferred')\n  , isPromise        = require('../../is-promise')\n  , processArguments = require('../_process-arguments')\n\n  , slice = Array.prototype.slice, apply = Function.prototype.apply\n  , reject = deferred.reject\n\n  , applyFn;\n\napplyFn = function (fn, args, resolve, reject) {\n\tvar result;\n\tif (fn.returnsPromise) {\n\t\ttry {\n\t\t\tresult = apply.call(fn, this, args);\n\t\t} catch (e) {\n\t\t\treject(e);\n\t\t\treturn;\n\t\t}\n\t\treturn resolve(result);\n\t}\n\targs = toArray(args).concat(function (error, result) {\n\t\tif (error == null) {\n\t\t\tresolve((arguments.length > 2) ? slice.call(arguments, 1) : result);\n\t\t} else {\n\t\t\treject(error);\n\t\t}\n\t});\n\ttry {\n\t\tapply.call(fn, this, args);\n\t} catch (e2) {\n\t\treject(e2);\n\t}\n};\n\ndeferred.extend('invokeAsync', function (method/*, args*/) {\n\tvar def;\n\tif (!this.pending) this.pending = [];\n\tdef = deferred();\n\tthis.pending.push('invokeAsync', [arguments, def.resolve, def.reject]);\n\treturn def.promise;\n}, function (args, resolve, reject) {\n\tvar fn;\n\tif (this.failed) {\n\t\treject(this.value);\n\t\treturn;\n\t}\n\n\tif (this.value == null) {\n\t\treject(new TypeError(\"Cannot use null or undefined\"));\n\t\treturn;\n\t}\n\n\tfn = args[0];\n\tif (!isCallable(fn)) {\n\t\tfn = String(fn);\n\t\tif (!isCallable(this.value[fn])) {\n\t\t\treject(new TypeError(fn + \" is not a function\"));\n\t\t\treturn;\n\t\t}\n\t\tfn = this.value[fn];\n\t}\n\n\targs = processArguments(slice.call(args, 1));\n\tif (isPromise(args)) {\n\t\tif (args.failed) {\n\t\t\treject(args.value);\n\t\t\treturn;\n\t\t}\n\t\targs.done(function (args) {\n\t\t\tapplyFn.call(this, fn, args, resolve, reject);\n\t\t}.bind(this.value), reject);\n\t} else {\n\t\tapplyFn.call(this.value, fn, args, resolve, reject);\n\t}\n}, function (method/*, args*/) {\n\tvar args, def;\n\tif (this.failed) return this;\n\n\tif (this.value == null) {\n\t\treturn reject(new TypeError(\"Cannot use null or undefined\"));\n\t}\n\n\tif (!isCallable(method)) {\n\t\tmethod = String(method);\n\t\tif (!isCallable(this.value[method])) {\n\t\t\treturn reject(new TypeError(method + \" is not a function\"));\n\t\t}\n\t\tmethod = this.value[method];\n\t}\n\n\targs = processArguments(slice.call(arguments, 1));\n\tif (isPromise(args)) {\n\t\tif (args.failed) return args;\n\t\tdef = deferred();\n\t\targs.done(function (args) {\n\t\t\tapplyFn.call(this, method, args, def.resolve, def.reject);\n\t\t}.bind(this.value), def.reject);\n\t} else if (!method.returnsPromise) {\n\t\tdef = deferred();\n\t\tapplyFn.call(this.value, method, args, def.resolve, def.reject);\n\t} else {\n\t\treturn applyFn.call(this.value, method, args, deferred, reject);\n\t}\n\treturn def.promise;\n});\n","// 'invoke' - Promise extension\n//\n// promise.invoke(name[, arg0[, arg1[, ...]]])\n//\n// On resolved object calls method that returns immediately.\n// 'name' can be method name or method itself.\n\n'use strict';\n\nvar isCallable       = require('es5-ext/object/is-callable')\n  , deferred         = require('../../deferred')\n  , isPromise        = require('../../is-promise')\n  , processArguments = require('../_process-arguments')\n\n  , slice = Array.prototype.slice, apply = Function.prototype.apply\n  , reject = deferred.reject\n  , applyFn;\n\napplyFn = function (fn, args, resolve, reject) {\n\tvar value;\n\ttry {\n\t\tvalue = apply.call(fn, this, args);\n\t} catch (e) {\n\t\treturn reject(e);\n\t}\n\treturn resolve(value);\n};\n\ndeferred.extend('invoke', function (method/*, args*/) {\n\tvar def;\n\tif (!this.pending) this.pending = [];\n\tdef = deferred();\n\tthis.pending.push('invoke', [arguments, def.resolve, def.reject]);\n\treturn def.promise;\n}, function (args, resolve, reject) {\n\tvar fn;\n\tif (this.failed) {\n\t\treject(this.value);\n\t\treturn;\n\t}\n\n\tif (this.value == null) {\n\t\treject(new TypeError(\"Cannot use null or undefined\"));\n\t\treturn;\n\t}\n\n\tfn = args[0];\n\tif (!isCallable(fn)) {\n\t\tfn = String(fn);\n\t\tif (!isCallable(this.value[fn])) {\n\t\t\treject(new TypeError(fn + \" is not a function\"));\n\t\t\treturn;\n\t\t}\n\t\tfn = this.value[fn];\n\t}\n\n\targs = processArguments(slice.call(args, 1));\n\tif (isPromise(args)) {\n\t\tif (args.failed) {\n\t\t\treject(args.value);\n\t\t\treturn;\n\t\t}\n\t\targs.done(function (args) {\n\t\t\tapplyFn.call(this, fn, args, resolve, reject);\n\t\t}.bind(this.value), reject);\n\t} else {\n\t\tapplyFn.call(this.value, fn, args, resolve, reject);\n\t}\n}, function (method/*, args*/) {\n\tvar args, def;\n\tif (this.failed) return this;\n\n\tif (this.value == null) {\n\t\treturn reject(new TypeError(\"Cannot use null or undefined\"));\n\t}\n\n\tif (!isCallable(method)) {\n\t\tmethod = String(method);\n\t\tif (!isCallable(this.value[method])) {\n\t\t\treturn reject(new TypeError(method + \" is not a function\"));\n\t\t}\n\t\tmethod = this.value[method];\n\t}\n\n\targs = processArguments(slice.call(arguments, 1));\n\tif (isPromise(args)) {\n\t\tif (args.failed) return args;\n\t\tdef = deferred();\n\t\targs.done(function (args) {\n\t\t\tapplyFn.call(this, method, args, def.resolve, def.reject);\n\t\t}.bind(this.value), def.reject);\n\t\treturn def.promise;\n\t}\n\treturn applyFn.call(this.value, method, args, deferred, reject);\n});\n","// 'map' - Promise extension\n//\n// promise.map(fn[, thisArg[, concurrentLimit]])\n//\n// Promise aware map for array-like results\n\n'use strict';\n\nrequire('./_array')('map', require('../array/map'));\n","// 'reduce' - Promise extension\n//\n// promise.reduce(fn[, initial])\n//\n// Promise aware reduce for array-like results\n\n'use strict';\n\nrequire('./_array')('reduce', require('../array/reduce'));\n","// 'some' - Promise extension\n//\n// promise.some(fn[, thisArg])\n//\n// Promise aware some for array-like results\n\n'use strict';\n\nrequire('./_array')('some', require('../array/some'));\n","// 'spread' - Promise extensions\n//\n// promise.spread(onsuccess, onerror)\n//\n// Matches eventual list result onto function arguments,\n// otherwise works same as 'then' (promise function itself)\n\n'use strict';\n\nvar spread     = require('es5-ext/function/#/spread')\n  , callable   = require('es5-ext/object/valid-callable')\n  , isCallable = require('es5-ext/object/is-callable')\n  , isPromise  = require('../../is-promise')\n  , deferred   = require('../../deferred')\n\n  , resolve = deferred.resolve, reject = deferred.reject;\n\ndeferred.extend('spread', function (win, fail) {\n\tvar def;\n\t((win == null) || callable(win));\n\tif (!win && (fail == null)) return this;\n\tif (!this.pending) this.pending = [];\n\tdef = deferred();\n\tthis.pending.push('spread', [win, fail, def.resolve, def.reject]);\n\treturn def.promise;\n}, function (win, fail, resolve, reject) {\n\tvar cb, value;\n\tcb = this.failed ? fail : win;\n\tif (cb == null) {\n\t\tif (this.failed) reject(this.value);\n\t\telse resolve(this.value);\n\t}\n\tif (isCallable(cb)) {\n\t\tif (isPromise(cb)) {\n\t\t\tif (cb.resolved) {\n\t\t\t\tif (cb.failed) reject(cb.value);\n\t\t\t\telse resolve(cb.value);\n\t\t\t} else {\n\t\t\t\tcb.done(resolve, reject);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tif (!this.failed) cb = spread.call(cb);\n\t\ttry {\n\t\t\tvalue = cb(this.value);\n\t\t} catch (e) {\n\t\t\treject(e);\n\t\t\treturn;\n\t\t}\n\t\tresolve(value);\n\t} else {\n\t\tresolve(cb);\n\t}\n}, function (win, fail) {\n\tvar cb, value;\n\tcb = this.failed ? fail : win;\n\tif (cb == null) return this;\n\tif (isCallable(cb)) {\n\t\tif (isPromise(cb)) return cb;\n\t\tif (!this.failed) cb = spread.call(cb);\n\t\ttry {\n\t\t\tvalue = cb(this.value);\n\t\t} catch (e) {\n\t\t\treturn reject(e);\n\t\t}\n\t\treturn resolve(value);\n\t}\n\treturn resolve(cb);\n});\n","// This construct deferred with all needed goodies that are being exported\n// when we import 'deferred' by main name.\n// All available promise extensions are also initialized.\n\n'use strict';\n\nvar call   = Function.prototype.call\n  , assign = require('es5-ext/object/assign');\n\nmodule.exports = assign(require('./deferred'), {\n\tinvokeAsync:   require('./invoke-async'),\n\tisPromise:     require('./is-promise'),\n\tdynamicQueue:  require('./dynamic-queue'),\n\tvalidPromise:  require('./valid-promise'),\n\tcallAsync:     call.bind(require('./ext/function/call-async')),\n\tdelay:         call.bind(require('./ext/function/delay')),\n\tgate:          call.bind(require('./ext/function/gate')),\n\tmonitor:       require('./monitor'),\n\tpromisify:     call.bind(require('./ext/function/promisify')),\n\tpromisifySync: call.bind(require('./ext/function/promisify-sync')),\n\tevery:         call.bind(require('./ext/array/every')),\n\tfind:          call.bind(require('./ext/array/find')),\n\tmap:           call.bind(require('./ext/array/map')),\n\treduce:        call.bind(require('./ext/array/reduce')),\n\tsome:          call.bind(require('./ext/array/some'))\n}, require('./profiler'));\n\nrequire('./ext/promise/aside');\nrequire('./ext/promise/catch');\nrequire('./ext/promise/cb');\nrequire('./ext/promise/finally');\nrequire('./ext/promise/get');\nrequire('./ext/promise/invoke');\nrequire('./ext/promise/invoke-async');\nrequire('./ext/promise/map');\nrequire('./ext/promise/spread');\nrequire('./ext/promise/some');\nrequire('./ext/promise/reduce');\n","// Invoke asynchronous function\n\n'use strict';\n\nvar isCallable = require('es5-ext/object/is-callable')\n  , callable   = require('es5-ext/object/valid-callable')\n  , value      = require('es5-ext/object/valid-value')\n  , callAsync  = require('./ext/function/call-async')._base\n\n  , slice = Array.prototype.slice;\n\nmodule.exports = function (obj, fn/*, args*/) {\n\tvalue(obj);\n\tif (!isCallable(fn)) fn = callable(obj[fn]);\n\treturn callAsync(fn, null, obj, slice.call(arguments, 2));\n};\n","// Whether given object is a promise\n\n'use strict';\n\nmodule.exports = function (o) {\n\treturn (typeof o === 'function') && (typeof o.then === 'function') && (o.end !== o.done);\n};\n","// Promise aware Array's some\n\n'use strict';\n\nvar assign     = require('es5-ext/object/assign')\n  , value      = require('es5-ext/object/valid-value')\n  , callable   = require('es5-ext/object/valid-callable')\n  , deferred   = require('../deferred')\n  , isPromise  = require('../is-promise')\n  , assimilate = require('../assimilate')\n\n  , call = Function.prototype.call\n  , resolve = deferred.resolve;\n\nmodule.exports = function (resolvent) {\n\tvar Iterator = function (list, cb, context) {\n\t\tthis.list = list;\n\t\tthis.cb = cb;\n\t\tthis.context = context;\n\t\tthis.length = list.length >>> 0;\n\n\t\twhile (this.current < this.length) {\n\t\t\tif (this.current in list) {\n\t\t\t\tassign(this, deferred());\n\t\t\t\tthis.processCb = this.processCb.bind(this);\n\t\t\t\tthis.processValue = this.processValue.bind(this);\n\t\t\t\tthis.continue();\n\t\t\t\treturn this.promise;\n\t\t\t}\n\t\t\t++this.current;\n\t\t}\n\t\treturn resolve(!resolvent);\n\t};\n\n\tIterator.prototype = {\n\t\tcurrent: 0,\n\t\tstate: false,\n\t\tcontinue: function () {\n\t\t\tvar result;\n\t\t\twhile (!this.state) {\n\t\t\t\tresult = this.process();\n\t\t\t\tif (this.state !== 'cb') break;\n\t\t\t\tresult = this.processCb(result);\n\t\t\t\tif (this.state !== 'value') break;\n\t\t\t\tthis.processValue(result);\n\t\t\t}\n\t\t},\n\t\tprocess: function () {\n\t\t\tvar value = assimilate(this.list[this.current]);\n\t\t\tif (isPromise(value)) {\n\t\t\t\tif (!value.resolved) {\n\t\t\t\t\tvalue.done(function (result) {\n\t\t\t\t\t\tresult = this.processCb(result);\n\t\t\t\t\t\tif (this.state !== 'value') return;\n\t\t\t\t\t\tthis.processValue(result);\n\t\t\t\t\t\tif (!this.state) this.continue();\n\t\t\t\t\t}.bind(this), this.reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (value.failed) {\n\t\t\t\t\tthis.reject(value.value);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvalue = value.value;\n\t\t\t}\n\t\t\tthis.state = 'cb';\n\t\t\treturn value;\n\t\t},\n\t\tprocessCb: function (value) {\n\t\t\tif (this.cb) {\n\t\t\t\ttry {\n\t\t\t\t\tvalue = call.call(this.cb, this.context, value, this.current, this.list);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tthis.reject(e);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvalue = assimilate(value);\n\t\t\t\tif (isPromise(value)) {\n\t\t\t\t\tif (!value.resolved) {\n\t\t\t\t\t\tvalue.done(function (result) {\n\t\t\t\t\t\t\tthis.state = 'value';\n\t\t\t\t\t\t\tthis.processValue(result);\n\t\t\t\t\t\t\tif (!this.state) this.continue();\n\t\t\t\t\t\t}.bind(this), this.reject);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (value.failed) {\n\t\t\t\t\t\tthis.reject(value.value);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvalue = value.value;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.state = 'value';\n\t\t\treturn value;\n\t\t},\n\t\tprocessValue: function (value) {\n\t\t\tif (Boolean(value) === resolvent) {\n\t\t\t\tthis.resolve(resolvent);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\twhile (++this.current < this.length) {\n\t\t\t\tif (this.current in this.list) {\n\t\t\t\t\tthis.state = false;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.resolve(!resolvent);\n\t\t}\n\t};\n\n\treturn function (cb/*, thisArg*/) {\n\t\tvalue(this);\n\t\t((cb == null) || callable(cb));\n\n\t\treturn new Iterator(this, cb, arguments[1]);\n\t};\n};\n","// Run if you want to monitor unresolved promises (in properly working\n// application there should be no promises that are never resolved)\n\n'use strict';\n\nvar max        = Math.max\n  , callable   = require('es5-ext/object/valid-callable')\n  , isCallable = require('es5-ext/object/is-callable')\n  , toPosInt   = require('es5-ext/number/to-pos-integer')\n  , deferred   = require('./deferred');\n\nexports = module.exports = function (timeout, cb) {\n\tif (timeout === false) {\n\t\t// Cancel monitor\n\t\tdelete deferred._monitor;\n\t\tdelete exports.timeout;\n\t\tdelete exports.callback;\n\t\treturn;\n\t}\n\texports.timeout = timeout = max(toPosInt(timeout) || 5000, 50);\n\tif (cb == null) {\n\t\tif ((typeof console !== 'undefined') && console &&\n\t\t\t\tisCallable(console.error)) {\n\t\t\tcb = function (e) {\n\t\t\t\tconsole.error(((e.stack && e.stack.toString()) ||\n\t\t\t\t\t\"Unresolved promise: no stack available\"));\n\t\t\t};\n\t\t}\n\t} else {\n\t\tcallable(cb);\n\t}\n\texports.callback = cb;\n\n\tdeferred._monitor = function () {\n\t\tvar e = new Error(\"Unresolved promise\");\n\t\treturn setTimeout(function () {\n\t\t\tif (cb) cb(e);\n\t\t}, timeout);\n\t};\n};\n","'use strict';\n\nvar partial  = require('es5-ext/function/#/partial')\n  , forEach  = require('es5-ext/object/for-each')\n  , pad      = require('es5-ext/string/#/pad')\n  , deferred = require('./deferred')\n\n  , resolved, rStats, unresolved, uStats, profile;\n\nexports.profile = function () {\n\tresolved = 0;\n\trStats = {};\n\tunresolved = 0;\n\tuStats = {};\n\tdeferred._profile = profile;\n};\n\nprofile = function (isResolved) {\n\tvar stack, data;\n\n\tif (isResolved) {\n\t\t++resolved;\n\t\tdata = rStats;\n\t} else {\n\t\t++unresolved;\n\t\tdata = uStats;\n\t}\n\n\tstack = (new Error()).stack;\n\tif (!stack.split('\\n').slice(3).some(function (line) {\n\t\t\tif ((line.search(/[\\/\\\\]deferred[\\/\\\\]/) === -1) &&\n\t\t\t\t\t(line.search(/[\\/\\\\]es5-ext[\\/\\\\]/) === -1) &&\n\t\t\t\t\t(line.indexOf(' (native)') === -1)) {\n\t\t\t\tline = line.replace(/\\n/g, \"\\\\n\").trim();\n\t\t\t\tif (!data[line]) {\n\t\t\t\t\tdata[line] = { count: 0 };\n\t\t\t\t}\n\t\t\t\t++data[line].count;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t})) {\n\t\tif (!data.unknown) {\n\t\t\tdata.unknown = { count: 0, stack: stack };\n\t\t}\n\t\t++data.unknown.count;\n\t}\n};\n\nexports.profileEnd = function () {\n\tvar total, lpad, log = '';\n\n\tif (!deferred._profile) {\n\t\tthrow new Error(\"Deferred profiler was not initialized\");\n\t}\n\tdelete deferred._profile;\n\n\tlog += \"------------------------------------------------------------\\n\";\n\tlog += \"Deferred usage statistics:\\n\\n\";\n\n\ttotal = String(resolved + unresolved);\n\tlpad = partial.call(pad, \" \", total.length);\n\tlog += total + \" Total promises initialized\\n\";\n\tlog += lpad.call(unresolved) + \" Initialized as Unresolved\\n\";\n\tlog += lpad.call(resolved) + \" Initialized as Resolved\\n\";\n\n\tif (unresolved) {\n\t\tlog += \"\\nUnresolved promises were initialized at:\\n\";\n\t\tforEach(uStats, function (data, name) {\n\t\t\tlog += lpad.call(data.count) + \" \" + name + \"\\n\";\n\t\t}, null, function (a, b) {\n\t\t\treturn this[b].count - this[a].count;\n\t\t});\n\t}\n\n\tif (resolved) {\n\t\tlog += \"\\nResolved promises were initialized at:\\n\";\n\t\tforEach(rStats, function (data, name) {\n\t\t\tlog += lpad.call(data.count) + \" \" + name + \"\\n\";\n\t\t}, null, function (a, b) {\n\t\t\treturn this[b].count - this[a].count;\n\t\t});\n\t}\n\tlog += \"------------------------------------------------------------\\n\";\n\n\treturn {\n\t\tlog: log,\n\t\tresolved: { count: resolved, stats: rStats },\n\t\tunresolved: { count: unresolved, stats: uStats }\n\t};\n};\n","'use strict';\n\nvar isPromise = require('./is-promise');\n\nmodule.exports = function (x) {\n\tif (!isPromise(x)) {\n\t\tthrow new TypeError(x + \" is not a promise object\");\n\t}\n\treturn x;\n};\n","'use strict';\n\nmodule.exports = require('./is-implemented')()\n\t? Array.from\n\t: require('./shim');\n","'use strict';\n\nmodule.exports = function () {\n\tvar from = Array.from, arr, result;\n\tif (typeof from !== 'function') return false;\n\tarr = ['raz', 'dwa'];\n\tresult = from(arr);\n\treturn Boolean(result && (result !== arr) && (result[1] === 'dwa'));\n};\n","'use strict';\n\nvar iteratorSymbol = require('es6-symbol').iterator\n  , isArguments    = require('../../function/is-arguments')\n  , isFunction     = require('../../function/is-function')\n  , toPosInt       = require('../../number/to-pos-integer')\n  , callable       = require('../../object/valid-callable')\n  , validValue     = require('../../object/valid-value')\n  , isString       = require('../../string/is-string')\n\n  , isArray = Array.isArray, call = Function.prototype.call\n  , desc = { configurable: true, enumerable: true, writable: true, value: null }\n  , defineProperty = Object.defineProperty;\n\nmodule.exports = function (arrayLike/*, mapFn, thisArg*/) {\n\tvar mapFn = arguments[1], thisArg = arguments[2], Constructor, i, j, arr, l, code, iterator\n\t  , result, getIterator, value;\n\n\tarrayLike = Object(validValue(arrayLike));\n\n\tif (mapFn != null) callable(mapFn);\n\tif (!this || (this === Array) || !isFunction(this)) {\n\t\t// Result: Plain array\n\t\tif (!mapFn) {\n\t\t\tif (isArguments(arrayLike)) {\n\t\t\t\t// Source: Arguments\n\t\t\t\tl = arrayLike.length;\n\t\t\t\tif (l !== 1) return Array.apply(null, arrayLike);\n\t\t\t\tarr = new Array(1);\n\t\t\t\tarr[0] = arrayLike[0];\n\t\t\t\treturn arr;\n\t\t\t}\n\t\t\tif (isArray(arrayLike)) {\n\t\t\t\t// Source: Array\n\t\t\t\tarr = new Array(l = arrayLike.length);\n\t\t\t\tfor (i = 0; i < l; ++i) arr[i] = arrayLike[i];\n\t\t\t\treturn arr;\n\t\t\t}\n\t\t}\n\t\tarr = [];\n\t} else {\n\t\t// Result: Non plain array\n\t\tConstructor = this;\n\t}\n\n\tif (!isArray(arrayLike)) {\n\t\tif ((getIterator = arrayLike[iteratorSymbol]) !== undefined) {\n\t\t\t// Source: Iterator\n\t\t\titerator = callable(getIterator).call(arrayLike);\n\t\t\tif (Constructor) arr = new Constructor();\n\t\t\tresult = iterator.next();\n\t\t\ti = 0;\n\t\t\twhile (!result.done) {\n\t\t\t\tvalue = mapFn ? call.call(mapFn, thisArg, result.value, i) : result.value;\n\t\t\t\tif (!Constructor) {\n\t\t\t\t\tarr[i] = value;\n\t\t\t\t} else {\n\t\t\t\t\tdesc.value = value;\n\t\t\t\t\tdefineProperty(arr, i, desc);\n\t\t\t\t}\n\t\t\t\tresult = iterator.next();\n\t\t\t\t++i;\n\t\t\t}\n\t\t\tl = i;\n\t\t} else if (isString(arrayLike)) {\n\t\t\t// Source: String\n\t\t\tl = arrayLike.length;\n\t\t\tif (Constructor) arr = new Constructor();\n\t\t\tfor (i = 0, j = 0; i < l; ++i) {\n\t\t\t\tvalue = arrayLike[i];\n\t\t\t\tif ((i + 1) < l) {\n\t\t\t\t\tcode = value.charCodeAt(0);\n\t\t\t\t\tif ((code >= 0xD800) && (code <= 0xDBFF)) value += arrayLike[++i];\n\t\t\t\t}\n\t\t\t\tvalue = mapFn ? call.call(mapFn, thisArg, value, j) : value;\n\t\t\t\tif (!Constructor) {\n\t\t\t\t\tarr[j] = value;\n\t\t\t\t} else {\n\t\t\t\t\tdesc.value = value;\n\t\t\t\t\tdefineProperty(arr, j, desc);\n\t\t\t\t}\n\t\t\t\t++j;\n\t\t\t}\n\t\t\tl = j;\n\t\t}\n\t}\n\tif (l === undefined) {\n\t\t// Source: array or array-like\n\t\tl = toPosInt(arrayLike.length);\n\t\tif (Constructor) arr = new Constructor(l);\n\t\tfor (i = 0; i < l; ++i) {\n\t\t\tvalue = mapFn ? call.call(mapFn, thisArg, arrayLike[i], i) : arrayLike[i];\n\t\t\tif (!Constructor) {\n\t\t\t\tarr[i] = value;\n\t\t\t} else {\n\t\t\t\tdesc.value = value;\n\t\t\t\tdefineProperty(arr, i, desc);\n\t\t\t}\n\t\t}\n\t}\n\tif (Constructor) {\n\t\tdesc.value = null;\n\t\tarr.length = l;\n\t}\n\treturn arr;\n};\n","'use strict';\n\nmodule.exports = require('./is-implemented')()\n\t? Array.of\n\t: require('./shim');\n","'use strict';\n\nmodule.exports = function () {\n\tvar of = Array.of, result;\n\tif (typeof of !== 'function') return false;\n\tresult = of('foo', 'bar');\n\treturn Boolean(result && (result[1] === 'bar'));\n};\n","'use strict';\n\nvar isFunction = require('../../function/is-function')\n\n  , slice = Array.prototype.slice, defineProperty = Object.defineProperty\n  , desc = { configurable: true, enumerable: true, writable: true, value: null };\n\nmodule.exports = function (/*items*/) {\n\tvar result, i, l;\n\tif (!this || (this === Array) || !isFunction(this)) return slice.call(arguments);\n\tresult = new this(l = arguments.length);\n\tfor (i = 0; i < l; ++i) {\n\t\tdesc.value = arguments[i];\n\t\tdefineProperty(result, i, desc);\n\t}\n\tdesc.value = null;\n\tresult.length = l;\n\treturn result;\n};\n","'use strict';\n\nvar from = require('./from')\n\n  , isArray = Array.isArray;\n\nmodule.exports = function (arrayLike) {\n\treturn isArray(arrayLike) ? arrayLike : from(arrayLike);\n};\n","'use strict';\n\nvar toString = Object.prototype.toString\n\n  , id = toString.call(new Error());\n\nmodule.exports = function (x) {\n\treturn (x && ((x instanceof Error) || (toString.call(x)) === id)) || false;\n};\n","'use strict';\n\nvar callable     = require('../../object/valid-callable')\n  , aFrom        = require('../../array/from')\n  , defineLength = require('../_define-length')\n\n  , apply = Function.prototype.apply;\n\nmodule.exports = function (/*args*/) {\n\tvar fn = callable(this)\n\t  , args = aFrom(arguments);\n\n\treturn defineLength(function () {\n\t\treturn apply.call(fn, this, args.concat(aFrom(arguments)));\n\t}, fn.length - args.length);\n};\n","'use strict';\n\nvar callable = require('../../object/valid-callable')\n\n  , apply = Function.prototype.apply;\n\nmodule.exports = function () {\n\tvar fn = callable(this);\n\treturn function (args) { return apply.call(fn, this, args); };\n};\n","'use strict';\n\nvar toPosInt = require('../number/to-pos-integer')\n\n  , test = function (a, b) {}, desc, defineProperty\n  , generate, mixin;\n\ntry {\n\tObject.defineProperty(test, 'length', { configurable: true, writable: false,\n\t\tenumerable: false, value: 1 });\n} catch (ignore) {}\n\nif (test.length === 1) {\n\t// ES6\n\tdesc = { configurable: true, writable: false, enumerable: false };\n\tdefineProperty = Object.defineProperty;\n\tmodule.exports = function (fn, length) {\n\t\tlength = toPosInt(length);\n\t\tif (fn.length === length) return fn;\n\t\tdesc.value = length;\n\t\treturn defineProperty(fn, 'length', desc);\n\t};\n} else {\n\tmixin = require('../object/mixin');\n\tgenerate = (function () {\n\t\tvar cache = [];\n\t\treturn function (l) {\n\t\t\tvar args, i = 0;\n\t\t\tif (cache[l]) return cache[l];\n\t\t\targs = [];\n\t\t\twhile (l--) args.push('a' + (++i).toString(36));\n\t\t\treturn new Function('fn', 'return function (' + args.join(', ') +\n\t\t\t\t') { return fn.apply(this, arguments); };');\n\t\t};\n\t}());\n\tmodule.exports = function (src, length) {\n\t\tvar target;\n\t\tlength = toPosInt(length);\n\t\tif (src.length === length) return src;\n\t\ttarget = generate(length)(src);\n\t\ttry { mixin(target, src); } catch (ignore) {}\n\t\treturn target;\n\t};\n}\n","'use strict';\n\nvar toString = Object.prototype.toString\n\n  , id = toString.call((function () { return arguments; }()));\n\nmodule.exports = function (x) { return (toString.call(x) === id); };\n","'use strict';\n\nvar toString = Object.prototype.toString\n\n  , id = toString.call(require('./noop'));\n\nmodule.exports = function (f) {\n\treturn (typeof f === \"function\") && (toString.call(f) === id);\n};\n","'use strict';\n\nmodule.exports = function () {};\n","'use strict';\n\nvar iteratorSymbol = require('es6-symbol').iterator\n  , isArrayLike    = require('../object/is-array-like');\n\nmodule.exports = function (x) {\n\tif (x == null) return false;\n\tif (typeof x[iteratorSymbol] === 'function') return true;\n\treturn isArrayLike(x);\n};\n","'use strict';\n\nvar isObject = require('../object/is-object')\n  , is       = require('./is');\n\nmodule.exports = function (x) {\n\tif (is(x) && isObject(x)) return x;\n\tthrow new TypeError(x + \" is not an iterable or array-like object\");\n};\n","'use strict';\n\nmodule.exports = require('./is-implemented')()\n\t? Math.sign\n\t: require('./shim');\n","'use strict';\n\nmodule.exports = function () {\n\tvar sign = Math.sign;\n\tif (typeof sign !== 'function') return false;\n\treturn ((sign(10) === 1) && (sign(-20) === -1));\n};\n","'use strict';\n\nmodule.exports = function (value) {\n\tvalue = Number(value);\n\tif (isNaN(value) || (value === 0)) return value;\n\treturn (value > 0) ? 1 : -1;\n};\n","'use strict';\n\nvar sign = require('../math/sign')\n\n  , abs = Math.abs, floor = Math.floor;\n\nmodule.exports = function (value) {\n\tif (isNaN(value)) return 0;\n\tvalue = Number(value);\n\tif ((value === 0) || !isFinite(value)) return value;\n\treturn sign(value) * floor(abs(value));\n};\n","'use strict';\n\nvar toInteger = require('./to-integer')\n\n  , max = Math.max;\n\nmodule.exports = function (value) { return max(0, toInteger(value)); };\n","// Internal method, used by iteration functions.\n// Calls a function for each key-value pair found in object\n// Optionally takes compareFn to iterate object in specific order\n\n'use strict';\n\nvar callable = require('./valid-callable')\n  , value    = require('./valid-value')\n\n  , bind = Function.prototype.bind, call = Function.prototype.call, keys = Object.keys\n  , propertyIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nmodule.exports = function (method, defVal) {\n\treturn function (obj, cb/*, thisArg, compareFn*/) {\n\t\tvar list, thisArg = arguments[2], compareFn = arguments[3];\n\t\tobj = Object(value(obj));\n\t\tcallable(cb);\n\n\t\tlist = keys(obj);\n\t\tif (compareFn) {\n\t\t\tlist.sort((typeof compareFn === 'function') ? bind.call(compareFn, obj) : undefined);\n\t\t}\n\t\tif (typeof method !== 'function') method = list[method];\n\t\treturn call.call(method, list, function (key, index) {\n\t\t\tif (!propertyIsEnumerable.call(obj, key)) return defVal;\n\t\t\treturn call.call(cb, thisArg, obj[key], key, obj, index);\n\t\t});\n\t};\n};\n","'use strict';\n\nmodule.exports = require('./is-implemented')()\n\t? Object.assign\n\t: require('./shim');\n","'use strict';\n\nmodule.exports = function () {\n\tvar assign = Object.assign, obj;\n\tif (typeof assign !== 'function') return false;\n\tobj = { foo: 'raz' };\n\tassign(obj, { bar: 'dwa' }, { trzy: 'trzy' });\n\treturn (obj.foo + obj.bar + obj.trzy) === 'razdwatrzy';\n};\n","'use strict';\n\nvar keys  = require('../keys')\n  , value = require('../valid-value')\n\n  , max = Math.max;\n\nmodule.exports = function (dest, src/*, srcn*/) {\n\tvar error, i, l = max(arguments.length, 2), assign;\n\tdest = Object(value(dest));\n\tassign = function (key) {\n\t\ttry { dest[key] = src[key]; } catch (e) {\n\t\t\tif (!error) error = e;\n\t\t}\n\t};\n\tfor (i = 1; i < l; ++i) {\n\t\tsrc = arguments[i];\n\t\tkeys(src).forEach(assign);\n\t}\n\tif (error !== undefined) throw error;\n\treturn dest;\n};\n","'use strict';\n\nmodule.exports = require('./_iterate')('forEach');\n","'use strict';\n\nvar isFunction = require('../function/is-function')\n  , isObject   = require('./is-object');\n\nmodule.exports = function (x) {\n\treturn ((x != null) && (typeof x.length === 'number') &&\n\n\t\t// Just checking ((typeof x === 'object') && (typeof x !== 'function'))\n\t\t// won't work right for some cases, e.g.:\n\t\t// type of instance of NodeList in Safari is a 'function'\n\n\t\t((isObject(x) && !isFunction(x)) || (typeof x === \"string\"))) || false;\n};\n","// Deprecated\n\n'use strict';\n\nmodule.exports = function (obj) { return typeof obj === 'function'; };\n","'use strict';\n\nvar map = { function: true, object: true };\n\nmodule.exports = function (x) {\n\treturn ((x != null) && map[typeof x]) || false;\n};\n","'use strict';\n\nmodule.exports = require('./is-implemented')()\n\t? Object.keys\n\t: require('./shim');\n","'use strict';\n\nmodule.exports = function () {\n\ttry {\n\t\tObject.keys('primitive');\n\t\treturn true;\n\t} catch (e) { return false; }\n};\n","'use strict';\n\nvar keys = Object.keys;\n\nmodule.exports = function (object) {\n\treturn keys(object == null ? object : Object(object));\n};\n","'use strict';\n\nvar value = require('./valid-value')\n\n  , defineProperty = Object.defineProperty\n  , getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor\n  , getOwnPropertyNames = Object.getOwnPropertyNames;\n\nmodule.exports = function (target, source) {\n\tvar error;\n\ttarget = Object(value(target));\n\tgetOwnPropertyNames(Object(value(source))).forEach(function (name) {\n\t\ttry {\n\t\t\tdefineProperty(target, name, getOwnPropertyDescriptor(source, name));\n\t\t} catch (e) { error = e; }\n\t});\n\tif (error !== undefined) throw error;\n\treturn target;\n};\n","'use strict';\n\nvar forEach = Array.prototype.forEach, create = Object.create;\n\nvar process = function (src, obj) {\n\tvar key;\n\tfor (key in src) obj[key] = src[key];\n};\n\nmodule.exports = function (options/*, options*/) {\n\tvar result = create(null);\n\tforEach.call(arguments, function (options) {\n\t\tif (options == null) return;\n\t\tprocess(Object(options), result);\n\t});\n\treturn result;\n};\n","'use strict';\n\nmodule.exports = function (fn) {\n\tif (typeof fn !== 'function') throw new TypeError(fn + \" is not a function\");\n\treturn fn;\n};\n","'use strict';\n\nvar isObject = require('./is-object');\n\nmodule.exports = function (value) {\n\tif (!isObject(value)) throw new TypeError(value + \" is not an Object\");\n\treturn value;\n};\n","'use strict';\n\nmodule.exports = function (value) {\n\tif (value == null) throw new TypeError(\"Cannot use null or undefined\");\n\treturn value;\n};\n","'use strict';\n\nmodule.exports = require('./is-implemented')()\n\t? String.prototype.contains\n\t: require('./shim');\n","'use strict';\n\nvar str = 'razdwatrzy';\n\nmodule.exports = function () {\n\tif (typeof str.contains !== 'function') return false;\n\treturn ((str.contains('dwa') === true) && (str.contains('foo') === false));\n};\n","'use strict';\n\nvar indexOf = String.prototype.indexOf;\n\nmodule.exports = function (searchString/*, position*/) {\n\treturn indexOf.call(this, searchString, arguments[1]) > -1;\n};\n","'use strict';\n\nvar toInteger = require('../../number/to-integer')\n  , value     = require('../../object/valid-value')\n  , repeat    = require('./repeat')\n\n  , abs = Math.abs, max = Math.max;\n\nmodule.exports = function (fill/*, length*/) {\n\tvar self = String(value(this))\n\t  , sLength = self.length\n\t  , length = arguments[1];\n\n\tlength = isNaN(length) ? 1 : toInteger(length);\n\tfill = repeat.call(String(fill), abs(length));\n\tif (length >= 0) return fill.slice(0, max(0, length - sLength)) + self;\n\treturn self + (((sLength + length) >= 0) ? '' : fill.slice(length + sLength));\n};\n","'use strict';\n\nmodule.exports = require('./is-implemented')()\n\t? String.prototype.repeat\n\t: require('./shim');\n","'use strict';\n\nvar str = 'foo';\n\nmodule.exports = function () {\n\tif (typeof str.repeat !== 'function') return false;\n\treturn (str.repeat(2) === 'foofoo');\n};\n","// Thanks: http://www.2ality.com/2014/01/efficient-string-repeat.html\n\n'use strict';\n\nvar value     = require('../../../object/valid-value')\n  , toInteger = require('../../../number/to-integer');\n\nmodule.exports = function (count) {\n\tvar str = String(value(this)), result;\n\tcount = toInteger(count);\n\tif (count < 0) throw new RangeError(\"Count must be >= 0\");\n\tif (!isFinite(count)) throw new RangeError(\"Count must be < \");\n\tresult = '';\n\tif (!count) return result;\n\twhile (true) {\n\t\tif (count & 1) result += str;\n\t\tcount >>>= 1;\n\t\tif (count <= 0) break;\n\t\tstr += str;\n\t}\n\treturn result;\n};\n","'use strict';\n\nvar toString = Object.prototype.toString\n\n  , id = toString.call('');\n\nmodule.exports = function (x) {\n\treturn (typeof x === 'string') || (x && (typeof x === 'object') &&\n\t\t((x instanceof String) || (toString.call(x) === id))) || false;\n};\n","/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE\n * @version   3.1.2\n */\n\n(function() {\n    \"use strict\";\n    function lib$es6$promise$utils$$objectOrFunction(x) {\n      return typeof x === 'function' || (typeof x === 'object' && x !== null);\n    }\n\n    function lib$es6$promise$utils$$isFunction(x) {\n      return typeof x === 'function';\n    }\n\n    function lib$es6$promise$utils$$isMaybeThenable(x) {\n      return typeof x === 'object' && x !== null;\n    }\n\n    var lib$es6$promise$utils$$_isArray;\n    if (!Array.isArray) {\n      lib$es6$promise$utils$$_isArray = function (x) {\n        return Object.prototype.toString.call(x) === '[object Array]';\n      };\n    } else {\n      lib$es6$promise$utils$$_isArray = Array.isArray;\n    }\n\n    var lib$es6$promise$utils$$isArray = lib$es6$promise$utils$$_isArray;\n    var lib$es6$promise$asap$$len = 0;\n    var lib$es6$promise$asap$$vertxNext;\n    var lib$es6$promise$asap$$customSchedulerFn;\n\n    var lib$es6$promise$asap$$asap = function asap(callback, arg) {\n      lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len] = callback;\n      lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len + 1] = arg;\n      lib$es6$promise$asap$$len += 2;\n      if (lib$es6$promise$asap$$len === 2) {\n        // If len is 2, that means that we need to schedule an async flush.\n        // If additional callbacks are queued before the queue is flushed, they\n        // will be processed by this flush that we are scheduling.\n        if (lib$es6$promise$asap$$customSchedulerFn) {\n          lib$es6$promise$asap$$customSchedulerFn(lib$es6$promise$asap$$flush);\n        } else {\n          lib$es6$promise$asap$$scheduleFlush();\n        }\n      }\n    }\n\n    function lib$es6$promise$asap$$setScheduler(scheduleFn) {\n      lib$es6$promise$asap$$customSchedulerFn = scheduleFn;\n    }\n\n    function lib$es6$promise$asap$$setAsap(asapFn) {\n      lib$es6$promise$asap$$asap = asapFn;\n    }\n\n    var lib$es6$promise$asap$$browserWindow = (typeof window !== 'undefined') ? window : undefined;\n    var lib$es6$promise$asap$$browserGlobal = lib$es6$promise$asap$$browserWindow || {};\n    var lib$es6$promise$asap$$BrowserMutationObserver = lib$es6$promise$asap$$browserGlobal.MutationObserver || lib$es6$promise$asap$$browserGlobal.WebKitMutationObserver;\n    var lib$es6$promise$asap$$isNode = typeof process !== 'undefined' && {}.toString.call(process) === '[object process]';\n\n    // test for web worker but not in IE10\n    var lib$es6$promise$asap$$isWorker = typeof Uint8ClampedArray !== 'undefined' &&\n      typeof importScripts !== 'undefined' &&\n      typeof MessageChannel !== 'undefined';\n\n    // node\n    function lib$es6$promise$asap$$useNextTick() {\n      // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n      // see https://github.com/cujojs/when/issues/410 for details\n      return function() {\n        process.nextTick(lib$es6$promise$asap$$flush);\n      };\n    }\n\n    // vertx\n    function lib$es6$promise$asap$$useVertxTimer() {\n      return function() {\n        lib$es6$promise$asap$$vertxNext(lib$es6$promise$asap$$flush);\n      };\n    }\n\n    function lib$es6$promise$asap$$useMutationObserver() {\n      var iterations = 0;\n      var observer = new lib$es6$promise$asap$$BrowserMutationObserver(lib$es6$promise$asap$$flush);\n      var node = document.createTextNode('');\n      observer.observe(node, { characterData: true });\n\n      return function() {\n        node.data = (iterations = ++iterations % 2);\n      };\n    }\n\n    // web worker\n    function lib$es6$promise$asap$$useMessageChannel() {\n      var channel = new MessageChannel();\n      channel.port1.onmessage = lib$es6$promise$asap$$flush;\n      return function () {\n        channel.port2.postMessage(0);\n      };\n    }\n\n    function lib$es6$promise$asap$$useSetTimeout() {\n      return function() {\n        setTimeout(lib$es6$promise$asap$$flush, 1);\n      };\n    }\n\n    var lib$es6$promise$asap$$queue = new Array(1000);\n    function lib$es6$promise$asap$$flush() {\n      for (var i = 0; i < lib$es6$promise$asap$$len; i+=2) {\n        var callback = lib$es6$promise$asap$$queue[i];\n        var arg = lib$es6$promise$asap$$queue[i+1];\n\n        callback(arg);\n\n        lib$es6$promise$asap$$queue[i] = undefined;\n        lib$es6$promise$asap$$queue[i+1] = undefined;\n      }\n\n      lib$es6$promise$asap$$len = 0;\n    }\n\n    function lib$es6$promise$asap$$attemptVertx() {\n      try {\n        var r = require;\n        var vertx = r('vertx');\n        lib$es6$promise$asap$$vertxNext = vertx.runOnLoop || vertx.runOnContext;\n        return lib$es6$promise$asap$$useVertxTimer();\n      } catch(e) {\n        return lib$es6$promise$asap$$useSetTimeout();\n      }\n    }\n\n    var lib$es6$promise$asap$$scheduleFlush;\n    // Decide what async method to use to triggering processing of queued callbacks:\n    if (lib$es6$promise$asap$$isNode) {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useNextTick();\n    } else if (lib$es6$promise$asap$$BrowserMutationObserver) {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useMutationObserver();\n    } else if (lib$es6$promise$asap$$isWorker) {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useMessageChannel();\n    } else if (lib$es6$promise$asap$$browserWindow === undefined && typeof require === 'function') {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$attemptVertx();\n    } else {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useSetTimeout();\n    }\n    function lib$es6$promise$then$$then(onFulfillment, onRejection) {\n      var parent = this;\n      var state = parent._state;\n\n      if (state === lib$es6$promise$$internal$$FULFILLED && !onFulfillment || state === lib$es6$promise$$internal$$REJECTED && !onRejection) {\n        return this;\n      }\n\n      var child = new this.constructor(lib$es6$promise$$internal$$noop);\n      var result = parent._result;\n\n      if (state) {\n        var callback = arguments[state - 1];\n        lib$es6$promise$asap$$asap(function(){\n          lib$es6$promise$$internal$$invokeCallback(state, child, callback, result);\n        });\n      } else {\n        lib$es6$promise$$internal$$subscribe(parent, child, onFulfillment, onRejection);\n      }\n\n      return child;\n    }\n    var lib$es6$promise$then$$default = lib$es6$promise$then$$then;\n    function lib$es6$promise$promise$resolve$$resolve(object) {\n      /*jshint validthis:true */\n      var Constructor = this;\n\n      if (object && typeof object === 'object' && object.constructor === Constructor) {\n        return object;\n      }\n\n      var promise = new Constructor(lib$es6$promise$$internal$$noop);\n      lib$es6$promise$$internal$$resolve(promise, object);\n      return promise;\n    }\n    var lib$es6$promise$promise$resolve$$default = lib$es6$promise$promise$resolve$$resolve;\n\n    function lib$es6$promise$$internal$$noop() {}\n\n    var lib$es6$promise$$internal$$PENDING   = void 0;\n    var lib$es6$promise$$internal$$FULFILLED = 1;\n    var lib$es6$promise$$internal$$REJECTED  = 2;\n\n    var lib$es6$promise$$internal$$GET_THEN_ERROR = new lib$es6$promise$$internal$$ErrorObject();\n\n    function lib$es6$promise$$internal$$selfFulfillment() {\n      return new TypeError(\"You cannot resolve a promise with itself\");\n    }\n\n    function lib$es6$promise$$internal$$cannotReturnOwn() {\n      return new TypeError('A promises callback cannot return that same promise.');\n    }\n\n    function lib$es6$promise$$internal$$getThen(promise) {\n      try {\n        return promise.then;\n      } catch(error) {\n        lib$es6$promise$$internal$$GET_THEN_ERROR.error = error;\n        return lib$es6$promise$$internal$$GET_THEN_ERROR;\n      }\n    }\n\n    function lib$es6$promise$$internal$$tryThen(then, value, fulfillmentHandler, rejectionHandler) {\n      try {\n        then.call(value, fulfillmentHandler, rejectionHandler);\n      } catch(e) {\n        return e;\n      }\n    }\n\n    function lib$es6$promise$$internal$$handleForeignThenable(promise, thenable, then) {\n       lib$es6$promise$asap$$asap(function(promise) {\n        var sealed = false;\n        var error = lib$es6$promise$$internal$$tryThen(then, thenable, function(value) {\n          if (sealed) { return; }\n          sealed = true;\n          if (thenable !== value) {\n            lib$es6$promise$$internal$$resolve(promise, value);\n          } else {\n            lib$es6$promise$$internal$$fulfill(promise, value);\n          }\n        }, function(reason) {\n          if (sealed) { return; }\n          sealed = true;\n\n          lib$es6$promise$$internal$$reject(promise, reason);\n        }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n        if (!sealed && error) {\n          sealed = true;\n          lib$es6$promise$$internal$$reject(promise, error);\n        }\n      }, promise);\n    }\n\n    function lib$es6$promise$$internal$$handleOwnThenable(promise, thenable) {\n      if (thenable._state === lib$es6$promise$$internal$$FULFILLED) {\n        lib$es6$promise$$internal$$fulfill(promise, thenable._result);\n      } else if (thenable._state === lib$es6$promise$$internal$$REJECTED) {\n        lib$es6$promise$$internal$$reject(promise, thenable._result);\n      } else {\n        lib$es6$promise$$internal$$subscribe(thenable, undefined, function(value) {\n          lib$es6$promise$$internal$$resolve(promise, value);\n        }, function(reason) {\n          lib$es6$promise$$internal$$reject(promise, reason);\n        });\n      }\n    }\n\n    function lib$es6$promise$$internal$$handleMaybeThenable(promise, maybeThenable, then) {\n      if (maybeThenable.constructor === promise.constructor &&\n          then === lib$es6$promise$then$$default &&\n          constructor.resolve === lib$es6$promise$promise$resolve$$default) {\n        lib$es6$promise$$internal$$handleOwnThenable(promise, maybeThenable);\n      } else {\n        if (then === lib$es6$promise$$internal$$GET_THEN_ERROR) {\n          lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$GET_THEN_ERROR.error);\n        } else if (then === undefined) {\n          lib$es6$promise$$internal$$fulfill(promise, maybeThenable);\n        } else if (lib$es6$promise$utils$$isFunction(then)) {\n          lib$es6$promise$$internal$$handleForeignThenable(promise, maybeThenable, then);\n        } else {\n          lib$es6$promise$$internal$$fulfill(promise, maybeThenable);\n        }\n      }\n    }\n\n    function lib$es6$promise$$internal$$resolve(promise, value) {\n      if (promise === value) {\n        lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$selfFulfillment());\n      } else if (lib$es6$promise$utils$$objectOrFunction(value)) {\n        lib$es6$promise$$internal$$handleMaybeThenable(promise, value, lib$es6$promise$$internal$$getThen(value));\n      } else {\n        lib$es6$promise$$internal$$fulfill(promise, value);\n      }\n    }\n\n    function lib$es6$promise$$internal$$publishRejection(promise) {\n      if (promise._onerror) {\n        promise._onerror(promise._result);\n      }\n\n      lib$es6$promise$$internal$$publish(promise);\n    }\n\n    function lib$es6$promise$$internal$$fulfill(promise, value) {\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) { return; }\n\n      promise._result = value;\n      promise._state = lib$es6$promise$$internal$$FULFILLED;\n\n      if (promise._subscribers.length !== 0) {\n        lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish, promise);\n      }\n    }\n\n    function lib$es6$promise$$internal$$reject(promise, reason) {\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) { return; }\n      promise._state = lib$es6$promise$$internal$$REJECTED;\n      promise._result = reason;\n\n      lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publishRejection, promise);\n    }\n\n    function lib$es6$promise$$internal$$subscribe(parent, child, onFulfillment, onRejection) {\n      var subscribers = parent._subscribers;\n      var length = subscribers.length;\n\n      parent._onerror = null;\n\n      subscribers[length] = child;\n      subscribers[length + lib$es6$promise$$internal$$FULFILLED] = onFulfillment;\n      subscribers[length + lib$es6$promise$$internal$$REJECTED]  = onRejection;\n\n      if (length === 0 && parent._state) {\n        lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish, parent);\n      }\n    }\n\n    function lib$es6$promise$$internal$$publish(promise) {\n      var subscribers = promise._subscribers;\n      var settled = promise._state;\n\n      if (subscribers.length === 0) { return; }\n\n      var child, callback, detail = promise._result;\n\n      for (var i = 0; i < subscribers.length; i += 3) {\n        child = subscribers[i];\n        callback = subscribers[i + settled];\n\n        if (child) {\n          lib$es6$promise$$internal$$invokeCallback(settled, child, callback, detail);\n        } else {\n          callback(detail);\n        }\n      }\n\n      promise._subscribers.length = 0;\n    }\n\n    function lib$es6$promise$$internal$$ErrorObject() {\n      this.error = null;\n    }\n\n    var lib$es6$promise$$internal$$TRY_CATCH_ERROR = new lib$es6$promise$$internal$$ErrorObject();\n\n    function lib$es6$promise$$internal$$tryCatch(callback, detail) {\n      try {\n        return callback(detail);\n      } catch(e) {\n        lib$es6$promise$$internal$$TRY_CATCH_ERROR.error = e;\n        return lib$es6$promise$$internal$$TRY_CATCH_ERROR;\n      }\n    }\n\n    function lib$es6$promise$$internal$$invokeCallback(settled, promise, callback, detail) {\n      var hasCallback = lib$es6$promise$utils$$isFunction(callback),\n          value, error, succeeded, failed;\n\n      if (hasCallback) {\n        value = lib$es6$promise$$internal$$tryCatch(callback, detail);\n\n        if (value === lib$es6$promise$$internal$$TRY_CATCH_ERROR) {\n          failed = true;\n          error = value.error;\n          value = null;\n        } else {\n          succeeded = true;\n        }\n\n        if (promise === value) {\n          lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$cannotReturnOwn());\n          return;\n        }\n\n      } else {\n        value = detail;\n        succeeded = true;\n      }\n\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) {\n        // noop\n      } else if (hasCallback && succeeded) {\n        lib$es6$promise$$internal$$resolve(promise, value);\n      } else if (failed) {\n        lib$es6$promise$$internal$$reject(promise, error);\n      } else if (settled === lib$es6$promise$$internal$$FULFILLED) {\n        lib$es6$promise$$internal$$fulfill(promise, value);\n      } else if (settled === lib$es6$promise$$internal$$REJECTED) {\n        lib$es6$promise$$internal$$reject(promise, value);\n      }\n    }\n\n    function lib$es6$promise$$internal$$initializePromise(promise, resolver) {\n      try {\n        resolver(function resolvePromise(value){\n          lib$es6$promise$$internal$$resolve(promise, value);\n        }, function rejectPromise(reason) {\n          lib$es6$promise$$internal$$reject(promise, reason);\n        });\n      } catch(e) {\n        lib$es6$promise$$internal$$reject(promise, e);\n      }\n    }\n\n    function lib$es6$promise$promise$all$$all(entries) {\n      return new lib$es6$promise$enumerator$$default(this, entries).promise;\n    }\n    var lib$es6$promise$promise$all$$default = lib$es6$promise$promise$all$$all;\n    function lib$es6$promise$promise$race$$race(entries) {\n      /*jshint validthis:true */\n      var Constructor = this;\n\n      var promise = new Constructor(lib$es6$promise$$internal$$noop);\n\n      if (!lib$es6$promise$utils$$isArray(entries)) {\n        lib$es6$promise$$internal$$reject(promise, new TypeError('You must pass an array to race.'));\n        return promise;\n      }\n\n      var length = entries.length;\n\n      function onFulfillment(value) {\n        lib$es6$promise$$internal$$resolve(promise, value);\n      }\n\n      function onRejection(reason) {\n        lib$es6$promise$$internal$$reject(promise, reason);\n      }\n\n      for (var i = 0; promise._state === lib$es6$promise$$internal$$PENDING && i < length; i++) {\n        lib$es6$promise$$internal$$subscribe(Constructor.resolve(entries[i]), undefined, onFulfillment, onRejection);\n      }\n\n      return promise;\n    }\n    var lib$es6$promise$promise$race$$default = lib$es6$promise$promise$race$$race;\n    function lib$es6$promise$promise$reject$$reject(reason) {\n      /*jshint validthis:true */\n      var Constructor = this;\n      var promise = new Constructor(lib$es6$promise$$internal$$noop);\n      lib$es6$promise$$internal$$reject(promise, reason);\n      return promise;\n    }\n    var lib$es6$promise$promise$reject$$default = lib$es6$promise$promise$reject$$reject;\n\n    var lib$es6$promise$promise$$counter = 0;\n\n    function lib$es6$promise$promise$$needsResolver() {\n      throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n    }\n\n    function lib$es6$promise$promise$$needsNew() {\n      throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n    }\n\n    var lib$es6$promise$promise$$default = lib$es6$promise$promise$$Promise;\n    /**\n      Promise objects represent the eventual result of an asynchronous operation. The\n      primary way of interacting with a promise is through its `then` method, which\n      registers callbacks to receive either a promise's eventual value or the reason\n      why the promise cannot be fulfilled.\n\n      Terminology\n      -----------\n\n      - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n      - `thenable` is an object or function that defines a `then` method.\n      - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n      - `exception` is a value that is thrown using the throw statement.\n      - `reason` is a value that indicates why a promise was rejected.\n      - `settled` the final resting state of a promise, fulfilled or rejected.\n\n      A promise can be in one of three states: pending, fulfilled, or rejected.\n\n      Promises that are fulfilled have a fulfillment value and are in the fulfilled\n      state.  Promises that are rejected have a rejection reason and are in the\n      rejected state.  A fulfillment value is never a thenable.\n\n      Promises can also be said to *resolve* a value.  If this value is also a\n      promise, then the original promise's settled state will match the value's\n      settled state.  So a promise that *resolves* a promise that rejects will\n      itself reject, and a promise that *resolves* a promise that fulfills will\n      itself fulfill.\n\n\n      Basic Usage:\n      ------------\n\n      ```js\n      var promise = new Promise(function(resolve, reject) {\n        // on success\n        resolve(value);\n\n        // on failure\n        reject(reason);\n      });\n\n      promise.then(function(value) {\n        // on fulfillment\n      }, function(reason) {\n        // on rejection\n      });\n      ```\n\n      Advanced Usage:\n      ---------------\n\n      Promises shine when abstracting away asynchronous interactions such as\n      `XMLHttpRequest`s.\n\n      ```js\n      function getJSON(url) {\n        return new Promise(function(resolve, reject){\n          var xhr = new XMLHttpRequest();\n\n          xhr.open('GET', url);\n          xhr.onreadystatechange = handler;\n          xhr.responseType = 'json';\n          xhr.setRequestHeader('Accept', 'application/json');\n          xhr.send();\n\n          function handler() {\n            if (this.readyState === this.DONE) {\n              if (this.status === 200) {\n                resolve(this.response);\n              } else {\n                reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n              }\n            }\n          };\n        });\n      }\n\n      getJSON('/posts.json').then(function(json) {\n        // on fulfillment\n      }, function(reason) {\n        // on rejection\n      });\n      ```\n\n      Unlike callbacks, promises are great composable primitives.\n\n      ```js\n      Promise.all([\n        getJSON('/posts'),\n        getJSON('/comments')\n      ]).then(function(values){\n        values[0] // => postsJSON\n        values[1] // => commentsJSON\n\n        return values;\n      });\n      ```\n\n      @class Promise\n      @param {function} resolver\n      Useful for tooling.\n      @constructor\n    */\n    function lib$es6$promise$promise$$Promise(resolver) {\n      this._id = lib$es6$promise$promise$$counter++;\n      this._state = undefined;\n      this._result = undefined;\n      this._subscribers = [];\n\n      if (lib$es6$promise$$internal$$noop !== resolver) {\n        typeof resolver !== 'function' && lib$es6$promise$promise$$needsResolver();\n        this instanceof lib$es6$promise$promise$$Promise ? lib$es6$promise$$internal$$initializePromise(this, resolver) : lib$es6$promise$promise$$needsNew();\n      }\n    }\n\n    lib$es6$promise$promise$$Promise.all = lib$es6$promise$promise$all$$default;\n    lib$es6$promise$promise$$Promise.race = lib$es6$promise$promise$race$$default;\n    lib$es6$promise$promise$$Promise.resolve = lib$es6$promise$promise$resolve$$default;\n    lib$es6$promise$promise$$Promise.reject = lib$es6$promise$promise$reject$$default;\n    lib$es6$promise$promise$$Promise._setScheduler = lib$es6$promise$asap$$setScheduler;\n    lib$es6$promise$promise$$Promise._setAsap = lib$es6$promise$asap$$setAsap;\n    lib$es6$promise$promise$$Promise._asap = lib$es6$promise$asap$$asap;\n\n    lib$es6$promise$promise$$Promise.prototype = {\n      constructor: lib$es6$promise$promise$$Promise,\n\n    /**\n      The primary way of interacting with a promise is through its `then` method,\n      which registers callbacks to receive either a promise's eventual value or the\n      reason why the promise cannot be fulfilled.\n\n      ```js\n      findUser().then(function(user){\n        // user is available\n      }, function(reason){\n        // user is unavailable, and you are given the reason why\n      });\n      ```\n\n      Chaining\n      --------\n\n      The return value of `then` is itself a promise.  This second, 'downstream'\n      promise is resolved with the return value of the first promise's fulfillment\n      or rejection handler, or rejected if the handler throws an exception.\n\n      ```js\n      findUser().then(function (user) {\n        return user.name;\n      }, function (reason) {\n        return 'default name';\n      }).then(function (userName) {\n        // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n        // will be `'default name'`\n      });\n\n      findUser().then(function (user) {\n        throw new Error('Found user, but still unhappy');\n      }, function (reason) {\n        throw new Error('`findUser` rejected and we're unhappy');\n      }).then(function (value) {\n        // never reached\n      }, function (reason) {\n        // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n        // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n      });\n      ```\n      If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n\n      ```js\n      findUser().then(function (user) {\n        throw new PedagogicalException('Upstream error');\n      }).then(function (value) {\n        // never reached\n      }).then(function (value) {\n        // never reached\n      }, function (reason) {\n        // The `PedgagocialException` is propagated all the way down to here\n      });\n      ```\n\n      Assimilation\n      ------------\n\n      Sometimes the value you want to propagate to a downstream promise can only be\n      retrieved asynchronously. This can be achieved by returning a promise in the\n      fulfillment or rejection handler. The downstream promise will then be pending\n      until the returned promise is settled. This is called *assimilation*.\n\n      ```js\n      findUser().then(function (user) {\n        return findCommentsByAuthor(user);\n      }).then(function (comments) {\n        // The user's comments are now available\n      });\n      ```\n\n      If the assimliated promise rejects, then the downstream promise will also reject.\n\n      ```js\n      findUser().then(function (user) {\n        return findCommentsByAuthor(user);\n      }).then(function (comments) {\n        // If `findCommentsByAuthor` fulfills, we'll have the value here\n      }, function (reason) {\n        // If `findCommentsByAuthor` rejects, we'll have the reason here\n      });\n      ```\n\n      Simple Example\n      --------------\n\n      Synchronous Example\n\n      ```javascript\n      var result;\n\n      try {\n        result = findResult();\n        // success\n      } catch(reason) {\n        // failure\n      }\n      ```\n\n      Errback Example\n\n      ```js\n      findResult(function(result, err){\n        if (err) {\n          // failure\n        } else {\n          // success\n        }\n      });\n      ```\n\n      Promise Example;\n\n      ```javascript\n      findResult().then(function(result){\n        // success\n      }, function(reason){\n        // failure\n      });\n      ```\n\n      Advanced Example\n      --------------\n\n      Synchronous Example\n\n      ```javascript\n      var author, books;\n\n      try {\n        author = findAuthor();\n        books  = findBooksByAuthor(author);\n        // success\n      } catch(reason) {\n        // failure\n      }\n      ```\n\n      Errback Example\n\n      ```js\n\n      function foundBooks(books) {\n\n      }\n\n      function failure(reason) {\n\n      }\n\n      findAuthor(function(author, err){\n        if (err) {\n          failure(err);\n          // failure\n        } else {\n          try {\n            findBoooksByAuthor(author, function(books, err) {\n              if (err) {\n                failure(err);\n              } else {\n                try {\n                  foundBooks(books);\n                } catch(reason) {\n                  failure(reason);\n                }\n              }\n            });\n          } catch(error) {\n            failure(err);\n          }\n          // success\n        }\n      });\n      ```\n\n      Promise Example;\n\n      ```javascript\n      findAuthor().\n        then(findBooksByAuthor).\n        then(function(books){\n          // found books\n      }).catch(function(reason){\n        // something went wrong\n      });\n      ```\n\n      @method then\n      @param {Function} onFulfilled\n      @param {Function} onRejected\n      Useful for tooling.\n      @return {Promise}\n    */\n      then: lib$es6$promise$then$$default,\n\n    /**\n      `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n      as the catch block of a try/catch statement.\n\n      ```js\n      function findAuthor(){\n        throw new Error('couldn't find that author');\n      }\n\n      // synchronous\n      try {\n        findAuthor();\n      } catch(reason) {\n        // something went wrong\n      }\n\n      // async with promises\n      findAuthor().catch(function(reason){\n        // something went wrong\n      });\n      ```\n\n      @method catch\n      @param {Function} onRejection\n      Useful for tooling.\n      @return {Promise}\n    */\n      'catch': function(onRejection) {\n        return this.then(null, onRejection);\n      }\n    };\n    var lib$es6$promise$enumerator$$default = lib$es6$promise$enumerator$$Enumerator;\n    function lib$es6$promise$enumerator$$Enumerator(Constructor, input) {\n      this._instanceConstructor = Constructor;\n      this.promise = new Constructor(lib$es6$promise$$internal$$noop);\n\n      if (Array.isArray(input)) {\n        this._input     = input;\n        this.length     = input.length;\n        this._remaining = input.length;\n\n        this._result = new Array(this.length);\n\n        if (this.length === 0) {\n          lib$es6$promise$$internal$$fulfill(this.promise, this._result);\n        } else {\n          this.length = this.length || 0;\n          this._enumerate();\n          if (this._remaining === 0) {\n            lib$es6$promise$$internal$$fulfill(this.promise, this._result);\n          }\n        }\n      } else {\n        lib$es6$promise$$internal$$reject(this.promise, this._validationError());\n      }\n    }\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._validationError = function() {\n      return new Error('Array Methods must be provided an Array');\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._enumerate = function() {\n      var length  = this.length;\n      var input   = this._input;\n\n      for (var i = 0; this._state === lib$es6$promise$$internal$$PENDING && i < length; i++) {\n        this._eachEntry(input[i], i);\n      }\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._eachEntry = function(entry, i) {\n      var c = this._instanceConstructor;\n      var resolve = c.resolve;\n\n      if (resolve === lib$es6$promise$promise$resolve$$default) {\n        var then = lib$es6$promise$$internal$$getThen(entry);\n\n        if (then === lib$es6$promise$then$$default &&\n            entry._state !== lib$es6$promise$$internal$$PENDING) {\n          this._settledAt(entry._state, i, entry._result);\n        } else if (typeof then !== 'function') {\n          this._remaining--;\n          this._result[i] = entry;\n        } else if (c === lib$es6$promise$promise$$default) {\n          var promise = new c(lib$es6$promise$$internal$$noop);\n          lib$es6$promise$$internal$$handleMaybeThenable(promise, entry, then);\n          this._willSettleAt(promise, i);\n        } else {\n          this._willSettleAt(new c(function(resolve) { resolve(entry); }), i);\n        }\n      } else {\n        this._willSettleAt(resolve(entry), i);\n      }\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._settledAt = function(state, i, value) {\n      var promise = this.promise;\n\n      if (promise._state === lib$es6$promise$$internal$$PENDING) {\n        this._remaining--;\n\n        if (state === lib$es6$promise$$internal$$REJECTED) {\n          lib$es6$promise$$internal$$reject(promise, value);\n        } else {\n          this._result[i] = value;\n        }\n      }\n\n      if (this._remaining === 0) {\n        lib$es6$promise$$internal$$fulfill(promise, this._result);\n      }\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._willSettleAt = function(promise, i) {\n      var enumerator = this;\n\n      lib$es6$promise$$internal$$subscribe(promise, undefined, function(value) {\n        enumerator._settledAt(lib$es6$promise$$internal$$FULFILLED, i, value);\n      }, function(reason) {\n        enumerator._settledAt(lib$es6$promise$$internal$$REJECTED, i, reason);\n      });\n    };\n    function lib$es6$promise$polyfill$$polyfill() {\n      var local;\n\n      if (typeof global !== 'undefined') {\n          local = global;\n      } else if (typeof self !== 'undefined') {\n          local = self;\n      } else {\n          try {\n              local = Function('return this')();\n          } catch (e) {\n              throw new Error('polyfill failed because global object is unavailable in this environment');\n          }\n      }\n\n      var P = local.Promise;\n\n      if (P && Object.prototype.toString.call(P.resolve()) === '[object Promise]' && !P.cast) {\n        return;\n      }\n\n      local.Promise = lib$es6$promise$promise$$default;\n    }\n    var lib$es6$promise$polyfill$$default = lib$es6$promise$polyfill$$polyfill;\n\n    var lib$es6$promise$umd$$ES6Promise = {\n      'Promise': lib$es6$promise$promise$$default,\n      'polyfill': lib$es6$promise$polyfill$$default\n    };\n\n    /* global define:true module:true window: true */\n    if (typeof define === 'function' && define['amd']) {\n      define(function() { return lib$es6$promise$umd$$ES6Promise; });\n    } else if (typeof module !== 'undefined' && module['exports']) {\n      module['exports'] = lib$es6$promise$umd$$ES6Promise;\n    } else if (typeof this !== 'undefined') {\n      this['ES6Promise'] = lib$es6$promise$umd$$ES6Promise;\n    }\n\n    lib$es6$promise$polyfill$$default();\n}).call(this);\n\n","'use strict';\n\nmodule.exports = require('./is-implemented')() ? Symbol : require('./polyfill');\n","'use strict';\n\nmodule.exports = function () {\n\tvar symbol;\n\tif (typeof Symbol !== 'function') return false;\n\tsymbol = Symbol('test symbol');\n\ttry { String(symbol); } catch (e) { return false; }\n\tif (typeof Symbol.iterator === 'symbol') return true;\n\n\t// Return 'true' for polyfills\n\tif (typeof Symbol.isConcatSpreadable !== 'object') return false;\n\tif (typeof Symbol.iterator !== 'object') return false;\n\tif (typeof Symbol.toPrimitive !== 'object') return false;\n\tif (typeof Symbol.toStringTag !== 'object') return false;\n\tif (typeof Symbol.unscopables !== 'object') return false;\n\n\treturn true;\n};\n","'use strict';\n\nmodule.exports = function (x) {\n\treturn (x && ((typeof x === 'symbol') || (x['@@toStringTag'] === 'Symbol'))) || false;\n};\n","// ES2015 Symbol polyfill for environments that do not support it (or partially support it_\n\n'use strict';\n\nvar d              = require('d')\n  , validateSymbol = require('./validate-symbol')\n\n  , create = Object.create, defineProperties = Object.defineProperties\n  , defineProperty = Object.defineProperty, objPrototype = Object.prototype\n  , NativeSymbol, SymbolPolyfill, HiddenSymbol, globalSymbols = create(null);\n\nif (typeof Symbol === 'function') NativeSymbol = Symbol;\n\nvar generateName = (function () {\n\tvar created = create(null);\n\treturn function (desc) {\n\t\tvar postfix = 0, name, ie11BugWorkaround;\n\t\twhile (created[desc + (postfix || '')]) ++postfix;\n\t\tdesc += (postfix || '');\n\t\tcreated[desc] = true;\n\t\tname = '@@' + desc;\n\t\tdefineProperty(objPrototype, name, d.gs(null, function (value) {\n\t\t\t// For IE11 issue see:\n\t\t\t// https://connect.microsoft.com/IE/feedbackdetail/view/1928508/\n\t\t\t//    ie11-broken-getters-on-dom-objects\n\t\t\t// https://github.com/medikoo/es6-symbol/issues/12\n\t\t\tif (ie11BugWorkaround) return;\n\t\t\tie11BugWorkaround = true;\n\t\t\tdefineProperty(this, name, d(value));\n\t\t\tie11BugWorkaround = false;\n\t\t}));\n\t\treturn name;\n\t};\n}());\n\n// Internal constructor (not one exposed) for creating Symbol instances.\n// This one is used to ensure that `someSymbol instanceof Symbol` always return false\nHiddenSymbol = function Symbol(description) {\n\tif (this instanceof HiddenSymbol) throw new TypeError('TypeError: Symbol is not a constructor');\n\treturn SymbolPolyfill(description);\n};\n\n// Exposed `Symbol` constructor\n// (returns instances of HiddenSymbol)\nmodule.exports = SymbolPolyfill = function Symbol(description) {\n\tvar symbol;\n\tif (this instanceof Symbol) throw new TypeError('TypeError: Symbol is not a constructor');\n\tsymbol = create(HiddenSymbol.prototype);\n\tdescription = (description === undefined ? '' : String(description));\n\treturn defineProperties(symbol, {\n\t\t__description__: d('', description),\n\t\t__name__: d('', generateName(description))\n\t});\n};\ndefineProperties(SymbolPolyfill, {\n\tfor: d(function (key) {\n\t\tif (globalSymbols[key]) return globalSymbols[key];\n\t\treturn (globalSymbols[key] = SymbolPolyfill(String(key)));\n\t}),\n\tkeyFor: d(function (s) {\n\t\tvar key;\n\t\tvalidateSymbol(s);\n\t\tfor (key in globalSymbols) if (globalSymbols[key] === s) return key;\n\t}),\n\n\t// If there's native implementation of given symbol, let's fallback to it\n\t// to ensure proper interoperability with other native functions e.g. Array.from\n\thasInstance: d('', (NativeSymbol && NativeSymbol.hasInstance) || SymbolPolyfill('hasInstance')),\n\tisConcatSpreadable: d('', (NativeSymbol && NativeSymbol.isConcatSpreadable) ||\n\t\tSymbolPolyfill('isConcatSpreadable')),\n\titerator: d('', (NativeSymbol && NativeSymbol.iterator) || SymbolPolyfill('iterator')),\n\tmatch: d('', (NativeSymbol && NativeSymbol.match) || SymbolPolyfill('match')),\n\treplace: d('', (NativeSymbol && NativeSymbol.replace) || SymbolPolyfill('replace')),\n\tsearch: d('', (NativeSymbol && NativeSymbol.search) || SymbolPolyfill('search')),\n\tspecies: d('', (NativeSymbol && NativeSymbol.species) || SymbolPolyfill('species')),\n\tsplit: d('', (NativeSymbol && NativeSymbol.split) || SymbolPolyfill('split')),\n\ttoPrimitive: d('', (NativeSymbol && NativeSymbol.toPrimitive) || SymbolPolyfill('toPrimitive')),\n\ttoStringTag: d('', (NativeSymbol && NativeSymbol.toStringTag) || SymbolPolyfill('toStringTag')),\n\tunscopables: d('', (NativeSymbol && NativeSymbol.unscopables) || SymbolPolyfill('unscopables'))\n});\n\n// Internal tweaks for real symbol producer\ndefineProperties(HiddenSymbol.prototype, {\n\tconstructor: d(SymbolPolyfill),\n\ttoString: d('', function () { return this.__name__; })\n});\n\n// Proper implementation of methods exposed on Symbol.prototype\n// They won't be accessible on produced symbol instances as they derive from HiddenSymbol.prototype\ndefineProperties(SymbolPolyfill.prototype, {\n\ttoString: d(function () { return 'Symbol (' + validateSymbol(this).__description__ + ')'; }),\n\tvalueOf: d(function () { return validateSymbol(this); })\n});\ndefineProperty(SymbolPolyfill.prototype, SymbolPolyfill.toPrimitive, d('',\n\tfunction () { return validateSymbol(this); }));\ndefineProperty(SymbolPolyfill.prototype, SymbolPolyfill.toStringTag, d('c', 'Symbol'));\n\n// Proper implementaton of toPrimitive and toStringTag for returned symbol instances\ndefineProperty(HiddenSymbol.prototype, SymbolPolyfill.toStringTag,\n\td('c', SymbolPolyfill.prototype[SymbolPolyfill.toStringTag]));\n\n// Note: It's important to define `toPrimitive` as last one, as some implementations\n// implement `toPrimitive` natively without implementing `toStringTag` (or other specified symbols)\n// And that may invoke error in definition flow:\n// See: https://github.com/medikoo/es6-symbol/issues/13#issuecomment-164146149\ndefineProperty(HiddenSymbol.prototype, SymbolPolyfill.toPrimitive,\n\td('c', SymbolPolyfill.prototype[SymbolPolyfill.toPrimitive]));\n","'use strict';\n\nvar isSymbol = require('./is-symbol');\n\nmodule.exports = function (value) {\n\tif (!isSymbol(value)) throw new TypeError(value + \" is not a symbol\");\n\treturn value;\n};\n","'use strict';\n\nvar d        = require('d')\n  , callable = require('es5-ext/object/valid-callable')\n\n  , apply = Function.prototype.apply, call = Function.prototype.call\n  , create = Object.create, defineProperty = Object.defineProperty\n  , defineProperties = Object.defineProperties\n  , hasOwnProperty = Object.prototype.hasOwnProperty\n  , descriptor = { configurable: true, enumerable: false, writable: true }\n\n  , on, once, off, emit, methods, descriptors, base;\n\non = function (type, listener) {\n\tvar data;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) {\n\t\tdata = descriptor.value = create(null);\n\t\tdefineProperty(this, '__ee__', descriptor);\n\t\tdescriptor.value = null;\n\t} else {\n\t\tdata = this.__ee__;\n\t}\n\tif (!data[type]) data[type] = listener;\n\telse if (typeof data[type] === 'object') data[type].push(listener);\n\telse data[type] = [data[type], listener];\n\n\treturn this;\n};\n\nonce = function (type, listener) {\n\tvar once, self;\n\n\tcallable(listener);\n\tself = this;\n\ton.call(this, type, once = function () {\n\t\toff.call(self, type, once);\n\t\tapply.call(listener, this, arguments);\n\t});\n\n\tonce.__eeOnceListener__ = listener;\n\treturn this;\n};\n\noff = function (type, listener) {\n\tvar data, listeners, candidate, i;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return this;\n\tdata = this.__ee__;\n\tif (!data[type]) return this;\n\tlisteners = data[type];\n\n\tif (typeof listeners === 'object') {\n\t\tfor (i = 0; (candidate = listeners[i]); ++i) {\n\t\t\tif ((candidate === listener) ||\n\t\t\t\t\t(candidate.__eeOnceListener__ === listener)) {\n\t\t\t\tif (listeners.length === 2) data[type] = listeners[i ? 0 : 1];\n\t\t\t\telse listeners.splice(i, 1);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif ((listeners === listener) ||\n\t\t\t\t(listeners.__eeOnceListener__ === listener)) {\n\t\t\tdelete data[type];\n\t\t}\n\t}\n\n\treturn this;\n};\n\nemit = function (type) {\n\tvar i, l, listener, listeners, args;\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return;\n\tlisteners = this.__ee__[type];\n\tif (!listeners) return;\n\n\tif (typeof listeners === 'object') {\n\t\tl = arguments.length;\n\t\targs = new Array(l - 1);\n\t\tfor (i = 1; i < l; ++i) args[i - 1] = arguments[i];\n\n\t\tlisteners = listeners.slice();\n\t\tfor (i = 0; (listener = listeners[i]); ++i) {\n\t\t\tapply.call(listener, this, args);\n\t\t}\n\t} else {\n\t\tswitch (arguments.length) {\n\t\tcase 1:\n\t\t\tcall.call(listeners, this);\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tcall.call(listeners, this, arguments[1]);\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tcall.call(listeners, this, arguments[1], arguments[2]);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tl = arguments.length;\n\t\t\targs = new Array(l - 1);\n\t\t\tfor (i = 1; i < l; ++i) {\n\t\t\t\targs[i - 1] = arguments[i];\n\t\t\t}\n\t\t\tapply.call(listeners, this, args);\n\t\t}\n\t}\n};\n\nmethods = {\n\ton: on,\n\tonce: once,\n\toff: off,\n\temit: emit\n};\n\ndescriptors = {\n\ton: d(on),\n\tonce: d(once),\n\toff: d(off),\n\temit: d(emit)\n};\n\nbase = defineProperties({}, descriptors);\n\nmodule.exports = exports = function (o) {\n\treturn (o == null) ? create(base) : defineProperties(Object(o), descriptors);\n};\nexports.methods = methods;\n","'use strict';\n\nvar forEach    = require('es5-ext/object/for-each')\n  , validValue = require('es5-ext/object/valid-object')\n\n  , push = Array.prototype.apply, defineProperty = Object.defineProperty\n  , create = Object.create, hasOwnProperty = Object.prototype.hasOwnProperty\n  , d = { configurable: true, enumerable: false, writable: true };\n\nmodule.exports = function (e1, e2) {\n\tvar data;\n\t(validValue(e1) && validValue(e2));\n\tif (!hasOwnProperty.call(e1, '__ee__')) {\n\t\tif (!hasOwnProperty.call(e2, '__ee__')) {\n\t\t\td.value = create(null);\n\t\t\tdefineProperty(e1, '__ee__', d);\n\t\t\tdefineProperty(e2, '__ee__', d);\n\t\t\td.value = null;\n\t\t\treturn;\n\t\t}\n\t\td.value = e2.__ee__;\n\t\tdefineProperty(e1, '__ee__', d);\n\t\td.value = null;\n\t\treturn;\n\t}\n\tdata = d.value = e1.__ee__;\n\tif (!hasOwnProperty.call(e2, '__ee__')) {\n\t\tdefineProperty(e2, '__ee__', d);\n\t\td.value = null;\n\t\treturn;\n\t}\n\tif (data === e2.__ee__) return;\n\tforEach(e2.__ee__, function (listener, name) {\n\t\tif (!data[name]) {\n\t\t\tdata[name] = listener;\n\t\t\treturn;\n\t\t}\n\t\tif (typeof data[name] === 'object') {\n\t\t\tif (typeof listener === 'object') push.apply(data[name], listener);\n\t\t\telse data[name].push(listener);\n\t\t} else if (typeof listener === 'object') {\n\t\t\tlistener.unshift(data[name]);\n\t\t\tdata[name] = listener;\n\t\t} else {\n\t\t\tdata[name] = [data[name], listener];\n\t\t}\n\t});\n\tdefineProperty(e2, '__ee__', d);\n\td.value = null;\n};\n","'use strict';\n\nvar callable, byObserver;\n\ncallable = function (fn) {\n\tif (typeof fn !== 'function') throw new TypeError(fn + \" is not a function\");\n\treturn fn;\n};\n\nbyObserver = function (Observer) {\n\tvar node = document.createTextNode(''), queue, i = 0;\n\tnew Observer(function () {\n\t\tvar data;\n\t\tif (!queue) return;\n\t\tdata = queue;\n\t\tqueue = null;\n\t\tif (typeof data === 'function') {\n\t\t\tdata();\n\t\t\treturn;\n\t\t}\n\t\tdata.forEach(function (fn) { fn(); });\n\t}).observe(node, { characterData: true });\n\treturn function (fn) {\n\t\tcallable(fn);\n\t\tif (queue) {\n\t\t\tif (typeof queue === 'function') queue = [queue, fn];\n\t\t\telse queue.push(fn);\n\t\t\treturn;\n\t\t}\n\t\tqueue = fn;\n\t\tnode.data = (i = ++i % 2);\n\t};\n};\n\nmodule.exports = (function () {\n\t// Node.js\n\tif ((typeof process !== 'undefined') && process &&\n\t\t\t(typeof process.nextTick === 'function')) {\n\t\treturn process.nextTick;\n\t}\n\n\t// MutationObserver=\n\tif ((typeof document === 'object') && document) {\n\t\tif (typeof MutationObserver === 'function') {\n\t\t\treturn byObserver(MutationObserver);\n\t\t}\n\t\tif (typeof WebKitMutationObserver === 'function') {\n\t\t\treturn byObserver(WebKitMutationObserver);\n\t\t}\n\t}\n\n\t// W3C Draft\n\t// http://dvcs.w3.org/hg/webperf/raw-file/tip/specs/setImmediate/Overview.html\n\tif (typeof setImmediate === 'function') {\n\t\treturn function (cb) { setImmediate(callable(cb)); };\n\t}\n\n\t// Wide available standard\n\tif (typeof setTimeout === 'function') {\n\t\treturn function (cb) { setTimeout(callable(cb), 0); };\n\t}\n\n\treturn null;\n}());\n","// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","(function (factory) {\n    if (typeof exports === 'object') {\n        // Node/CommonJS\n        module.exports = factory();\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD\n        define(factory);\n    } else {\n        // Browser globals (with support for web workers)\n        var glob;\n\n        try {\n            glob = window;\n        } catch (e) {\n            glob = self;\n        }\n\n        glob.SparkMD5 = factory();\n    }\n}(function (undefined) {\n\n    'use strict';\n\n    /*\n     * Fastest md5 implementation around (JKM md5).\n     * Credits: Joseph Myers\n     *\n     * @see http://www.myersdaily.org/joseph/javascript/md5-text.html\n     * @see http://jsperf.com/md5-shootout/7\n     */\n\n    /* this function is much faster,\n      so if possible we use it. Some IEs\n      are the only ones I know of that\n      need the idiotic second function,\n      generated by an if clause.  */\n    var add32 = function (a, b) {\n        return (a + b) & 0xFFFFFFFF;\n    },\n        hex_chr = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\n\n\n    function cmn(q, a, b, x, s, t) {\n        a = add32(add32(a, q), add32(x, t));\n        return add32((a << s) | (a >>> (32 - s)), b);\n    }\n\n    function ff(a, b, c, d, x, s, t) {\n        return cmn((b & c) | ((~b) & d), a, b, x, s, t);\n    }\n\n    function gg(a, b, c, d, x, s, t) {\n        return cmn((b & d) | (c & (~d)), a, b, x, s, t);\n    }\n\n    function hh(a, b, c, d, x, s, t) {\n        return cmn(b ^ c ^ d, a, b, x, s, t);\n    }\n\n    function ii(a, b, c, d, x, s, t) {\n        return cmn(c ^ (b | (~d)), a, b, x, s, t);\n    }\n\n    function md5cycle(x, k) {\n        var a = x[0],\n            b = x[1],\n            c = x[2],\n            d = x[3];\n\n        a = ff(a, b, c, d, k[0], 7, -680876936);\n        d = ff(d, a, b, c, k[1], 12, -389564586);\n        c = ff(c, d, a, b, k[2], 17, 606105819);\n        b = ff(b, c, d, a, k[3], 22, -1044525330);\n        a = ff(a, b, c, d, k[4], 7, -176418897);\n        d = ff(d, a, b, c, k[5], 12, 1200080426);\n        c = ff(c, d, a, b, k[6], 17, -1473231341);\n        b = ff(b, c, d, a, k[7], 22, -45705983);\n        a = ff(a, b, c, d, k[8], 7, 1770035416);\n        d = ff(d, a, b, c, k[9], 12, -1958414417);\n        c = ff(c, d, a, b, k[10], 17, -42063);\n        b = ff(b, c, d, a, k[11], 22, -1990404162);\n        a = ff(a, b, c, d, k[12], 7, 1804603682);\n        d = ff(d, a, b, c, k[13], 12, -40341101);\n        c = ff(c, d, a, b, k[14], 17, -1502002290);\n        b = ff(b, c, d, a, k[15], 22, 1236535329);\n\n        a = gg(a, b, c, d, k[1], 5, -165796510);\n        d = gg(d, a, b, c, k[6], 9, -1069501632);\n        c = gg(c, d, a, b, k[11], 14, 643717713);\n        b = gg(b, c, d, a, k[0], 20, -373897302);\n        a = gg(a, b, c, d, k[5], 5, -701558691);\n        d = gg(d, a, b, c, k[10], 9, 38016083);\n        c = gg(c, d, a, b, k[15], 14, -660478335);\n        b = gg(b, c, d, a, k[4], 20, -405537848);\n        a = gg(a, b, c, d, k[9], 5, 568446438);\n        d = gg(d, a, b, c, k[14], 9, -1019803690);\n        c = gg(c, d, a, b, k[3], 14, -187363961);\n        b = gg(b, c, d, a, k[8], 20, 1163531501);\n        a = gg(a, b, c, d, k[13], 5, -1444681467);\n        d = gg(d, a, b, c, k[2], 9, -51403784);\n        c = gg(c, d, a, b, k[7], 14, 1735328473);\n        b = gg(b, c, d, a, k[12], 20, -1926607734);\n\n        a = hh(a, b, c, d, k[5], 4, -378558);\n        d = hh(d, a, b, c, k[8], 11, -2022574463);\n        c = hh(c, d, a, b, k[11], 16, 1839030562);\n        b = hh(b, c, d, a, k[14], 23, -35309556);\n        a = hh(a, b, c, d, k[1], 4, -1530992060);\n        d = hh(d, a, b, c, k[4], 11, 1272893353);\n        c = hh(c, d, a, b, k[7], 16, -155497632);\n        b = hh(b, c, d, a, k[10], 23, -1094730640);\n        a = hh(a, b, c, d, k[13], 4, 681279174);\n        d = hh(d, a, b, c, k[0], 11, -358537222);\n        c = hh(c, d, a, b, k[3], 16, -722521979);\n        b = hh(b, c, d, a, k[6], 23, 76029189);\n        a = hh(a, b, c, d, k[9], 4, -640364487);\n        d = hh(d, a, b, c, k[12], 11, -421815835);\n        c = hh(c, d, a, b, k[15], 16, 530742520);\n        b = hh(b, c, d, a, k[2], 23, -995338651);\n\n        a = ii(a, b, c, d, k[0], 6, -198630844);\n        d = ii(d, a, b, c, k[7], 10, 1126891415);\n        c = ii(c, d, a, b, k[14], 15, -1416354905);\n        b = ii(b, c, d, a, k[5], 21, -57434055);\n        a = ii(a, b, c, d, k[12], 6, 1700485571);\n        d = ii(d, a, b, c, k[3], 10, -1894986606);\n        c = ii(c, d, a, b, k[10], 15, -1051523);\n        b = ii(b, c, d, a, k[1], 21, -2054922799);\n        a = ii(a, b, c, d, k[8], 6, 1873313359);\n        d = ii(d, a, b, c, k[15], 10, -30611744);\n        c = ii(c, d, a, b, k[6], 15, -1560198380);\n        b = ii(b, c, d, a, k[13], 21, 1309151649);\n        a = ii(a, b, c, d, k[4], 6, -145523070);\n        d = ii(d, a, b, c, k[11], 10, -1120210379);\n        c = ii(c, d, a, b, k[2], 15, 718787259);\n        b = ii(b, c, d, a, k[9], 21, -343485551);\n\n        x[0] = add32(a, x[0]);\n        x[1] = add32(b, x[1]);\n        x[2] = add32(c, x[2]);\n        x[3] = add32(d, x[3]);\n    }\n\n    function md5blk(s) {\n        var md5blks = [],\n            i; /* Andy King said do it this way. */\n\n        for (i = 0; i < 64; i += 4) {\n            md5blks[i >> 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) << 8) + (s.charCodeAt(i + 2) << 16) + (s.charCodeAt(i + 3) << 24);\n        }\n        return md5blks;\n    }\n\n    function md5blk_array(a) {\n        var md5blks = [],\n            i; /* Andy King said do it this way. */\n\n        for (i = 0; i < 64; i += 4) {\n            md5blks[i >> 2] = a[i] + (a[i + 1] << 8) + (a[i + 2] << 16) + (a[i + 3] << 24);\n        }\n        return md5blks;\n    }\n\n    function md51(s) {\n        var n = s.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n            md5cycle(state, md5blk(s.substring(i - 64, i)));\n        }\n        s = s.substring(i - 64);\n        length = s.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= s.charCodeAt(i) << ((i % 4) << 3);\n        }\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(state, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Beware that the final length might not fit in 32 bits so we take care of that\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n\n        md5cycle(state, tail);\n        return state;\n    }\n\n    function md51_array(a) {\n        var n = a.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n            md5cycle(state, md5blk_array(a.subarray(i - 64, i)));\n        }\n\n        // Not sure if it is a bug, however IE10 will always produce a sub array of length 1\n        // containing the last element of the parent array if the sub array specified starts\n        // beyond the length of the parent array - weird.\n        // https://connect.microsoft.com/IE/feedback/details/771452/typed-array-subarray-issue\n        a = (i - 64) < n ? a.subarray(i - 64) : new Uint8Array(0);\n\n        length = a.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= a[i] << ((i % 4) << 3);\n        }\n\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(state, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Beware that the final length might not fit in 32 bits so we take care of that\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n\n        md5cycle(state, tail);\n\n        return state;\n    }\n\n    function rhex(n) {\n        var s = '',\n            j;\n        for (j = 0; j < 4; j += 1) {\n            s += hex_chr[(n >> (j * 8 + 4)) & 0x0F] + hex_chr[(n >> (j * 8)) & 0x0F];\n        }\n        return s;\n    }\n\n    function hex(x) {\n        var i;\n        for (i = 0; i < x.length; i += 1) {\n            x[i] = rhex(x[i]);\n        }\n        return x.join('');\n    }\n\n    // In some cases the fast add32 function cannot be used..\n    if (hex(md51('hello')) !== '5d41402abc4b2a76b9719d911017c592') {\n        add32 = function (x, y) {\n            var lsw = (x & 0xFFFF) + (y & 0xFFFF),\n                msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n            return (msw << 16) | (lsw & 0xFFFF);\n        };\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * ArrayBuffer slice polyfill.\n     *\n     * @see https://github.com/ttaubert/node-arraybuffer-slice\n     */\n\n    if (typeof ArrayBuffer !== 'undefined' && !ArrayBuffer.prototype.slice) {\n        (function () {\n            function clamp(val, length) {\n                val = (val | 0) || 0;\n\n                if (val < 0) {\n                    return Math.max(val + length, 0);\n                }\n\n                return Math.min(val, length);\n            }\n\n            ArrayBuffer.prototype.slice = function (from, to) {\n                var length = this.byteLength,\n                    begin = clamp(from, length),\n                    end = length,\n                    num,\n                    target,\n                    targetArray,\n                    sourceArray;\n\n                if (to !== undefined) {\n                    end = clamp(to, length);\n                }\n\n                if (begin > end) {\n                    return new ArrayBuffer(0);\n                }\n\n                num = end - begin;\n                target = new ArrayBuffer(num);\n                targetArray = new Uint8Array(target);\n\n                sourceArray = new Uint8Array(this, begin, num);\n                targetArray.set(sourceArray);\n\n                return target;\n            };\n        })();\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * Helpers.\n     */\n\n    function toUtf8(str) {\n        if (/[\\u0080-\\uFFFF]/.test(str)) {\n            str = unescape(encodeURIComponent(str));\n        }\n\n        return str;\n    }\n\n    function utf8Str2ArrayBuffer(str, returnUInt8Array) {\n        var length = str.length,\n           buff = new ArrayBuffer(length),\n           arr = new Uint8Array(buff),\n           i;\n\n        for (i = 0; i < length; i += 1) {\n            arr[i] = str.charCodeAt(i);\n        }\n\n        return returnUInt8Array ? arr : buff;\n    }\n\n    function arrayBuffer2Utf8Str(buff) {\n        return String.fromCharCode.apply(null, new Uint8Array(buff));\n    }\n\n    function concatenateArrayBuffers(first, second, returnUInt8Array) {\n        var result = new Uint8Array(first.byteLength + second.byteLength);\n\n        result.set(new Uint8Array(first));\n        result.set(new Uint8Array(second), first.byteLength);\n\n        return returnUInt8Array ? result : result.buffer;\n    }\n\n    function hexToBinaryString(hex) {\n        var bytes = [],\n            length = hex.length,\n            x;\n\n        for (x = 0; x < length - 1; x += 2) {\n            bytes.push(parseInt(hex.substr(x, 2), 16));\n        }\n\n        return String.fromCharCode.apply(String, bytes);\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * SparkMD5 OOP implementation.\n     *\n     * Use this class to perform an incremental md5, otherwise use the\n     * static methods instead.\n     */\n\n    function SparkMD5() {\n        // call reset to init the instance\n        this.reset();\n    }\n\n    /**\n     * Appends a string.\n     * A conversion will be applied if an utf8 string is detected.\n     *\n     * @param {String} str The string to be appended\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.append = function (str) {\n        // Converts the string to utf8 bytes if necessary\n        // Then append as binary\n        this.appendBinary(toUtf8(str));\n\n        return this;\n    };\n\n    /**\n     * Appends a binary string.\n     *\n     * @param {String} contents The binary string to be appended\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.appendBinary = function (contents) {\n        this._buff += contents;\n        this._length += contents.length;\n\n        var length = this._buff.length,\n            i;\n\n        for (i = 64; i <= length; i += 64) {\n            md5cycle(this._hash, md5blk(this._buff.substring(i - 64, i)));\n        }\n\n        this._buff = this._buff.substring(i - 64);\n\n        return this;\n    };\n\n    /**\n     * Finishes the incremental computation, reseting the internal state and\n     * returning the result.\n     *\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            i,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= buff.charCodeAt(i) << ((i % 4) << 3);\n        }\n\n        this._finish(tail, length);\n        ret = hex(this._hash);\n\n        if (raw) {\n            ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n\n        return ret;\n    };\n\n    /**\n     * Resets the internal state of the computation.\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.reset = function () {\n        this._buff = '';\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n\n        return this;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @return {Object} The state\n     */\n    SparkMD5.prototype.getState = function () {\n        return {\n            buff: this._buff,\n            length: this._length,\n            hash: this._hash\n        };\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @param {Object} state The state\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.setState = function (state) {\n        this._buff = state.buff;\n        this._length = state.length;\n        this._hash = state.hash;\n\n        return this;\n    };\n\n    /**\n     * Releases memory used by the incremental buffer and other additional\n     * resources. If you plan to use the instance again, use reset instead.\n     */\n    SparkMD5.prototype.destroy = function () {\n        delete this._hash;\n        delete this._buff;\n        delete this._length;\n    };\n\n    /**\n     * Finish the final calculation based on the tail.\n     *\n     * @param {Array}  tail   The tail (will be modified)\n     * @param {Number} length The length of the remaining buffer\n     */\n    SparkMD5.prototype._finish = function (tail, length) {\n        var i = length,\n            tmp,\n            lo,\n            hi;\n\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(this._hash, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Do the final computation based on the tail and length\n        // Beware that the final length may not fit in 32 bits so we take care of that\n        tmp = this._length * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n        md5cycle(this._hash, tail);\n    };\n\n    /**\n     * Performs the md5 hash on a string.\n     * A conversion will be applied if utf8 string is detected.\n     *\n     * @param {String}  str The string\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.hash = function (str, raw) {\n        // Converts the string to utf8 bytes if necessary\n        // Then compute it using the binary function\n        return SparkMD5.hashBinary(toUtf8(str), raw);\n    };\n\n    /**\n     * Performs the md5 hash on a binary string.\n     *\n     * @param {String}  content The binary string\n     * @param {Boolean} raw     True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.hashBinary = function (content, raw) {\n        var hash = md51(content),\n            ret = hex(hash);\n\n        return raw ? hexToBinaryString(ret) : ret;\n    };\n\n    // ---------------------------------------------------\n\n    /**\n     * SparkMD5 OOP implementation for array buffers.\n     *\n     * Use this class to perform an incremental md5 ONLY for array buffers.\n     */\n    SparkMD5.ArrayBuffer = function () {\n        // call reset to init the instance\n        this.reset();\n    };\n\n    /**\n     * Appends an array buffer.\n     *\n     * @param {ArrayBuffer} arr The array to be appended\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.append = function (arr) {\n        var buff = concatenateArrayBuffers(this._buff.buffer, arr, true),\n            length = buff.length,\n            i;\n\n        this._length += arr.byteLength;\n\n        for (i = 64; i <= length; i += 64) {\n            md5cycle(this._hash, md5blk_array(buff.subarray(i - 64, i)));\n        }\n\n        this._buff = (i - 64) < length ? new Uint8Array(buff.buffer.slice(i - 64)) : new Uint8Array(0);\n\n        return this;\n    };\n\n    /**\n     * Finishes the incremental computation, reseting the internal state and\n     * returning the result.\n     *\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.ArrayBuffer.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            i,\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= buff[i] << ((i % 4) << 3);\n        }\n\n        this._finish(tail, length);\n        ret = hex(this._hash);\n\n        if (raw) {\n            ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n\n        return ret;\n    };\n\n    /**\n     * Resets the internal state of the computation.\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.reset = function () {\n        this._buff = new Uint8Array(0);\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n\n        return this;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @return {Object} The state\n     */\n    SparkMD5.ArrayBuffer.prototype.getState = function () {\n        var state = SparkMD5.prototype.getState.call(this);\n\n        // Convert buffer to a string\n        state.buff = arrayBuffer2Utf8Str(state.buff);\n\n        return state;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @param {Object} state The state\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.setState = function (state) {\n        // Convert string to buffer\n        state.buff = utf8Str2ArrayBuffer(state.buff, true);\n\n        return SparkMD5.prototype.setState.call(this, state);\n    };\n\n    SparkMD5.ArrayBuffer.prototype.destroy = SparkMD5.prototype.destroy;\n\n    SparkMD5.ArrayBuffer.prototype._finish = SparkMD5.prototype._finish;\n\n    /**\n     * Performs the md5 hash on an array buffer.\n     *\n     * @param {ArrayBuffer} arr The array buffer\n     * @param {Boolean}     raw True to get the raw string, false to get the hex one\n     *\n     * @return {String} The result\n     */\n    SparkMD5.ArrayBuffer.hash = function (arr, raw) {\n        var hash = md51_array(new Uint8Array(arr)),\n            ret = hex(hash);\n\n        return raw ? hexToBinaryString(ret) : ret;\n    };\n\n    return SparkMD5;\n}));\n","'use strict';\n\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define([], factory);\n    } else if (typeof module === 'object' && module.exports) {\n        // Node. Does not work with strict CommonJS, but\n        // only CommonJS-like environments that support module.exports,\n        // like Node.\n        module.exports = factory();\n    } else {\n        // Browser globals (root is window)\n        root.striptags = factory();\n  }\n}(this, function () {\n    var STATE_OUTPUT       = 0,\n        STATE_HTML         = 1,\n        STATE_PRE_COMMENT  = 2,\n        STATE_COMMENT      = 3,\n        WHITESPACE         = /\\s/,\n        ALLOWED_TAGS_REGEX = /<(\\w*)>/g;\n\n    function striptags(html, allowableTags) {\n        var html = html || '',\n            state = STATE_OUTPUT,\n            depth = 0,\n            output = '',\n            tagBuffer = '',\n            inQuote = false,\n            i, length, c;\n\n        if (typeof allowableTags === 'string') {\n            // Parse the string into an array of tags\n            allowableTags = parseAllowableTags(allowableTags);\n        } else if (!Array.isArray(allowableTags)) {\n            // If it is not an array, explicitly set to null\n            allowableTags = null;\n        }\n\n        for (i = 0, length = html.length; i < length; i++) {\n            c = html[i];\n\n            switch (c) {\n                case '<': {\n                    // ignore '<' if inside a quote\n                    if (inQuote) {\n                        break;\n                    }\n\n                    // '<' followed by a space is not a valid tag, continue\n                    if (html[i + 1] == ' ') {\n                        consumeCharacter(c);\n                        break;\n                    }\n\n                    // change to STATE_HTML\n                    if (state == STATE_OUTPUT) {\n                        state = STATE_HTML;\n\n                        consumeCharacter(c);\n                        break;\n                    }\n\n                    // ignore additional '<' characters when inside a tag\n                    if (state == STATE_HTML) {\n                        depth++;\n                        break;\n                    }\n\n                    consumeCharacter(c);\n                    break;\n                }\n\n                case '>': {\n                    // something like this is happening: '<<>>'\n                    if (depth) {\n                        depth--;\n                        break;\n                    }\n\n                    // ignore '>' if inside a quote\n                    if (inQuote) {\n                        break;\n                    }\n\n                    // an HTML tag was closed\n                    if (state == STATE_HTML) {\n                        inQuote = state = 0;\n\n                        if (allowableTags) {\n                            tagBuffer += '>';\n                            flushTagBuffer();\n                        }\n\n                        break;\n                    }\n\n                    // '<!' met its ending '>'\n                    if (state == STATE_PRE_COMMENT) {\n                        inQuote = state = 0;\n                        tagBuffer = '';\n                        break;\n                    }\n\n                    // if last two characters were '--', then end comment\n                    if (state == STATE_COMMENT &&\n                        html[i - 1] == '-' &&\n                        html[i - 2] == '-') {\n\n                        inQuote = state = 0;\n                        tagBuffer = '';\n                        break;\n                    }\n\n                    consumeCharacter(c);\n                    break;\n                }\n\n                // catch both single and double quotes\n                case '\"':\n                case '\\'': {\n                    if (state == STATE_HTML) {\n                        if (inQuote == c) {\n                            // end quote found\n                            inQuote = false;\n                        } else if (!inQuote) {\n                            // start quote only if not already in one\n                            inQuote = c;\n                        }\n                    }\n\n                    consumeCharacter(c);\n                    break;\n                }\n\n                case '!': {\n                    if (state == STATE_HTML &&\n                        html[i - 1] == '<') {\n\n                        // looks like we might be starting a comment\n                        state = STATE_PRE_COMMENT;\n                        break;\n                    }\n\n                    consumeCharacter(c);\n                    break;\n                }\n\n                case '-': {\n                    // if the previous two characters were '!-', this is a comment\n                    if (state == STATE_PRE_COMMENT &&\n                        html[i - 1] == '-' &&\n                        html[i - 2] == '!') {\n\n                        state = STATE_COMMENT;\n                        break;\n                    }\n\n                    consumeCharacter(c);\n                    break;\n                }\n\n                case 'E':\n                case 'e': {\n                    // check for DOCTYPE, because it looks like a comment and isn't\n                    if (state == STATE_PRE_COMMENT &&\n                        html.substr(i - 6, 7).toLowerCase() == 'doctype') {\n\n                        state = STATE_HTML;\n                        break;\n                    }\n\n                    consumeCharacter(c);\n                    break;\n                }\n\n                default: {\n                    consumeCharacter(c);\n                }\n            }\n        }\n\n        function consumeCharacter(c) {\n            if (state == STATE_OUTPUT) {\n                output += c;\n            } else if (allowableTags && state == STATE_HTML) {\n                tagBuffer += c;\n            }\n        }\n\n        function flushTagBuffer() {\n            var normalized = '',\n                nonWhitespaceSeen = false,\n                i, length, c;\n\n            normalizeTagBuffer:\n            for (i = 0, length = tagBuffer.length; i < length; i++) {\n                c = tagBuffer[i].toLowerCase();\n\n                switch (c) {\n                    case '<': {\n                        break;\n                    }\n\n                    case '>': {\n                        break normalizeTagBuffer;\n                    }\n\n                    case '/': {\n                        nonWhitespaceSeen = true;\n                        break;\n                    }\n\n                    default: {\n                        if (!c.match(WHITESPACE)) {\n                            nonWhitespaceSeen = true;\n                            normalized += c;\n                        } else if (nonWhitespaceSeen) {\n                            break normalizeTagBuffer;\n                        }\n                    }\n                }\n            }\n\n            if (allowableTags.indexOf(normalized) !== -1) {\n                output += tagBuffer;\n            }\n\n            tagBuffer = '';\n        }\n\n        return output;\n    }\n\n    /**\n     * Return an array containing tags that are allowed to pass through the\n     * algorithm.\n     *\n     * @param string allowableTags A string of tags to allow (e.g. \"<b><strong>\").\n     * @return array|null An array of allowed tags or null if none.\n     */\n    function parseAllowableTags(allowableTags) {\n        var tagsArray = [],\n            match;\n\n        while ((match = ALLOWED_TAGS_REGEX.exec(allowableTags)) !== null) {\n            tagsArray.push(match[1]);\n        }\n\n        return tagsArray.length !== 0 ? tagsArray : null;\n    }\n\n    return striptags;\n}));\n","'use strict';\n\nmodule.exports = 2147483647;\n","'use strict';\n\nvar toPosInt   = require('es5-ext/number/to-pos-integer')\n  , maxTimeout = require('./max-timeout');\n\nmodule.exports = function (value) {\n\tvalue = toPosInt(value);\n\tif (value > maxTimeout) throw new TypeError(value + \" exceeds maximum possible timeout\");\n\treturn value;\n};\n","'use strict';\n\nvar log = require('./Log.js').Logger('libZotero:Ajax');\nvar Ajax = {};\n\nAjax.errorCallback = function(response){\n\t//log.error(response);\n\tlog.debug('ajax error callback', 2);\n\tlog.debug('textStatus: ' + response.textStatus, 2);\n\tlog.debug('errorThrown: ', 2);\n\tlog.debug(response.errorThrown, 2);\n\tlog.debug(response.jqxhr, 2);\n};\n\nAjax.error = Ajax.errorCallback;\nAjax.activeRequests = [];\n\n/*\n * Requires {target:items|collections|tags, libraryType:user|group, libraryID:<>}\n */\nAjax.apiRequestUrl = function(params){\n\tlog.debug('Zotero.Ajax.apiRequestUrl', 3);\n\tlog.debug(params, 4);\n\tObject.keys(params).forEach(function(key){\n\t\tvar val = params[key];\n\t\t//should probably figure out exactly why I'm doing this, is it just to make sure no hashes snuck in?\n\t\t//if so the new validation below takes care of that instead\n\t\tif(typeof val == 'string'){\n\t\t\tval = val.split('#', 1);\n\t\t\tparams[key] = val[0];\n\t\t}\n\t\t\n\t\t//validate params based on patterns in Zotero.validate\n\t\tif(Zotero.validator.validate(val, key) === false){\n\t\t\t//warn on invalid parameter and drop from params that will be used\n\t\t\tlog.warn('API argument failed validation: ' + key + ' cannot be ' + val);\n\t\t\tlog.warn(params);\n\t\t\tdelete params[key];\n\t\t}\n\t});\n\t\n\tif(!params.target) throw new Error('No target defined for api request');\n\tif(!(params.libraryType == 'user' ||\n\t\tparams.libraryType == 'group' ||\n\t\tparams.libraryType === '')) {\n\t\tthrow new Error('Unexpected libraryType for api request ' + JSON.stringify(params));\n\t}\n\tif((params.libraryType) && !(params.libraryID)) {\n\t\tthrow new Error('No libraryID defined for api request');\n\t}\n\tif((params.target == 'publications') && (params.libraryType != 'user')){\n\t\tthrow new Error('publications is only valid for user libraries');\n\t}\n\t\n\tvar base = Zotero.config.baseApiUrl;\n\tvar url;\n\t\n\tif(params.libraryType !== ''){\n\t\turl = base + '/' + params.libraryType + 's/' + params.libraryID;\n\t\tif(params.collectionKey){\n\t\t\tif(params.collectionKey == 'trash'){\n\t\t\t\turl += '/items/trash';\n\t\t\t\treturn url;\n\t\t\t}\n\t\t\telse if(params.collectionKey.indexOf(',') !== -1){\n\t\t\t\t\n\t\t\t}\n\t\t\telse if(params.target != 'collections'){\n\t\t\t\turl += '/collections/' + params.collectionKey;\n\t\t\t}\n\t\t}\n\t}\n\telse{\n\t\turl = base;\n\t}\n\t\n\tswitch(params.target){\n\t\tcase 'items':\n\t\t\turl += '/items';\n\t\t\tbreak;\n\t\tcase 'item':\n\t\t\tif(params.itemKey){\n\t\t\t\turl += '/items/' + params.itemKey;\n\t\t\t}\n\t\t\telse{\n\t\t\t\turl += '/items';\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'collections':\n\t\t\turl += '/collections';\n\t\t\tbreak;\n\t\tcase 'childCollections':\n\t\t\turl += '/collections';\n\t\t\tbreak;\n\t\tcase 'collection':\n\t\t\tbreak;\n\t\tcase 'tags':\n\t\t\turl += '/tags';\n\t\t\tbreak;\n\t\tcase 'children':\n\t\t\turl += '/items/' + params.itemKey + '/children';\n\t\t\tbreak;\n\t\tcase 'key':\n\t\t\turl = base + '/users/' + params.libraryID + '/keys/' + params.apiKey;\n\t\t\tbreak;\n\t\tcase 'deleted':\n\t\t\turl += '/deleted';\n\t\t\tbreak;\n\t\tcase 'userGroups':\n\t\t\turl = base + '/users/' + params.libraryID + '/groups';\n\t\t\tbreak;\n\t\tcase 'settings':\n\t\t\turl += '/settings/' + (params.settingsKey || '');\n\t\t\tbreak;\n\t\tcase 'publications':\n\t\t\turl += '/publications/items';\n\t\t\tbreak;\n\t\tdefault:\n\t\t\treturn false;\n\t}\n\tswitch(params.targetModifier){\n\t\tcase 'top':\n\t\t\turl += '/top';\n\t\t\tbreak;\n\t\tcase 'file':\n\t\t\turl += '/file';\n\t\t\tbreak;\n\t\tcase 'viewsnapshot':\n\t\t\turl += '/file/view';\n\t\t\tbreak;\n\t}\n\treturn url;\n};\n\nAjax.apiQueryString = function(passedParams, useConfigKey){\n\tlog.debug('Zotero.Ajax.apiQueryString', 4);\n\tlog.debug(passedParams, 4);\n\tif(useConfigKey === null || typeof useConfigKey === 'undefined'){\n\t\tuseConfigKey = true;\n\t}\n\t\n\tObject.keys(passedParams).forEach(function(key){\n\t\tvar val = passedParams[key];\n\t\tif(typeof val == 'string'){\n\t\t\tval = val.split('#', 1);\n\t\t\tpassedParams[key] = val[0];\n\t\t}\n\t});\n\tif(passedParams.hasOwnProperty('order') && passedParams['order'] == 'creatorSummary'){\n\t\tpassedParams['order'] = 'creator';\n\t}\n\tif(passedParams.hasOwnProperty('order') && passedParams['order'] == 'year'){\n\t\tpassedParams['order'] = 'date';\n\t}\n\tif(useConfigKey && Zotero.config.sessionAuth) {\n\t\tvar sessionKey = Zotero.utils.readCookie(Zotero.config.sessionCookieName);\n\t\tpassedParams['session'] = sessionKey;\n\t}\n\telse if(useConfigKey && Zotero.config.apiKey){\n\t\tpassedParams['key'] = Zotero.config.apiKey;\n\t}\n\t\n\tif(passedParams.hasOwnProperty('sort') && passedParams['sort'] == 'undefined' ){\n\t\t//alert('fixed a bad sort');\n\t\tpassedParams['sort'] = 'asc';\n\t}\n\t\n\tlog.debug(passedParams, 4);\n\t\n\tvar queryString = '?';\n\tvar queryParamsArray = [];\n\tvar queryParamOptions = ['start',\n\t\t\t\t\t\t\t'limit',\n\t\t\t\t\t\t\t'order',\n\t\t\t\t\t\t\t'sort',\n\t\t\t\t\t\t\t'content',\n\t\t\t\t\t\t\t'include',\n\t\t\t\t\t\t\t'format',\n\t\t\t\t\t\t\t'q',\n\t\t\t\t\t\t\t'fq',\n\t\t\t\t\t\t\t'itemType',\n\t\t\t\t\t\t\t'itemKey',\n\t\t\t\t\t\t\t'collectionKey',\n\t\t\t\t\t\t\t'searchKey',\n\t\t\t\t\t\t\t'locale',\n\t\t\t\t\t\t\t'tag',\n\t\t\t\t\t\t\t'tagType',\n\t\t\t\t\t\t\t'key',\n\t\t\t\t\t\t\t'style',\n\t\t\t\t\t\t\t'linkMode',\n\t\t\t\t\t\t\t'linkwrap',\n\t\t\t\t\t\t\t'session',\n\t\t\t\t\t\t\t'newer',\n\t\t\t\t\t\t\t'since'\n\t];\n\tqueryParamOptions.sort();\n\t//build simple api query parameters object\n\tvar queryParams = {};\n\tqueryParamOptions.forEach(function(val){\n\t\tif(passedParams.hasOwnProperty(val) && (passedParams[val] !== '')){\n\t\t\tqueryParams[val] = passedParams[val];\n\t\t}\n\t});\n\t\n\t//take out itemKey if it is not a list\n\tif(passedParams.hasOwnProperty('target') && passedParams['target'] !== 'items'){\n\t\tif(queryParams.hasOwnProperty('itemKey') && queryParams['itemKey'].indexOf(',') == -1){\n\t\t\tdelete queryParams['itemKey'];\n\t\t}\n\t}\n\t\n\t//take out collectionKey if it is not a list\n\tif(passedParams.hasOwnProperty('target') && passedParams['target'] !== 'collections'){\n\t\tif(queryParams.hasOwnProperty('collectionKey') && queryParams['collectionKey'].indexOf(',') === -1){\n\t\t\tdelete queryParams['collectionKey'];\n\t\t}\n\t}\n\t\n\t//add each of the found queryParams onto array\n\tObject.keys(queryParams).forEach(function(key){\n\t\tvar value = queryParams[key];\n\t\tif(Array.isArray(value)){\n\t\t\tvalue.forEach(function(v){\n\t\t\t\tif(key == 'tag' && v[0] == '-'){\n\t\t\t\t\tv = '\\\\' + v;\n\t\t\t\t}\n\t\t\t\tqueryParamsArray.push(encodeURIComponent(key) + '=' + encodeURIComponent(v));\n\t\t\t});\n\t\t}\n\t\telse{\n\t\t\tif(key == 'tag' && value[0] == '-'){\n\t\t\t\tvalue = '\\\\' + value;\n\t\t\t}\n\t\t\tqueryParamsArray.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\n\t\t}\n\t});\n\t\n\t//build query string by concatenating array\n\tqueryString += queryParamsArray.join('&');\n\treturn queryString;\n};\n\nAjax.apiRequestString = function(config){\n\treturn Ajax.apiRequestUrl(config) + Ajax.apiQueryString(config);\n};\n\nAjax.proxyWrapper = function(requestUrl, method){\n\tif(Zotero.config.proxy){\n\t\tif(!method){\n\t\t\tmethod = 'GET';\n\t\t}\n\t\treturn Zotero.config.proxyPath + '?requestMethod=' + method + '&requestUrl=' + encodeURIComponent(requestUrl);\n\t}\n\telse{\n\t\treturn requestUrl;\n\t}\n};\n\nAjax.parseQueryString = function(query){\n\t\n};\n\nAjax.webUrl = function(args){\n\t\n};\n\nAjax.downloadBlob = function(url){\n\treturn new Promise(function(resolve, reject){\n\t\tvar xhr = new XMLHttpRequest();\n\t\tvar blob;\n\t\t\n\t\txhr.open('GET', url, true);\n\t\txhr.responseType = 'blob';\n\t\t\n\t\txhr.addEventListener('load', function () {\n\t\t\tif (xhr.status === 200) {\n\t\t\t\tlog.debug('downloadBlob Image retrieved. resolving', 3);\n\t\t\t\tresolve(xhr.response);\n\t\t\t}\n\t\t\telse {\n\t\t\t\treject(xhr.response);\n\t\t\t}\n\t\t} );\n\t\t// Send XHR\n\t\txhr.send();\n\t});\n};\n\nmodule.exports = Ajax;\n","'use strict';\n\nvar log = require('./Log.js').Logger('libZotero:ApiObject');\n\nmodule.exports = function(){\n\tthis.instance = 'Zotero.ApiObject';\n\tthis.version = 0;\n};\n\n//associate Entry with a library so we can update it on the server\nmodule.exports.prototype.associateWithLibrary = function(library){\n\tvar apiObject = this;\n\tapiObject.owningLibrary = library;\n\tif(typeof this.apiObj.library == 'object'){\n\t\tthis.apiObj.library.type = library.type;\n\t\tthis.apiObj.library.id = library.libraryID;\n\t}\n\treturn apiObject;\n};\n\nmodule.exports.prototype.fieldComparer = function(attr){\n\tif(Intl){\n\t\tvar collator = new Intl.Collator();\n\t\treturn function(a, b){\n\t\t\treturn collator.compare(a.apiObj.data[attr], b.apiObj.data[attr]);\n\t\t};\n\t} else {\n\t\treturn function(a, b){\n\t\t\tif(a.apiObj.data[attr].toLowerCase() == b.apiObj.data[attr].toLowerCase()){\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tif(a.apiObj.data[attr].toLowerCase() < b.apiObj.data[attr].toLowerCase()){\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\treturn 1;\n\t\t};\n\t}\n};\n","'use strict';\n\nvar log = require('./Log.js').Logger('libZotero:ApiResponse');\n\nmodule.exports = function(response) {\n\tlog.debug('Zotero.ApiResponse', 3);\n\tthis.totalResults = 0;\n\tthis.apiVersion = null;\n\tthis.lastModifiedVersion = 0;\n\tthis.linkHeader = '';\n\tthis.links = {};\n\t\n\tif(response){\n\t\tif(!response.isError){\n\t\t\tthis.isError = false;\n\t\t} else {\n\t\t\tthis.isError = true;\n\t\t}\n\t\tthis.data = response.data;\n\t\t//this.jqxhr = response.jqxhr;\n\t\tthis.parseResponse(response);\n\t}\n};\n\nmodule.exports.prototype.parseResponse = function(response){\n\tlog.debug('parseResponse', 3);\n\tvar apiResponse = this;\n\tapiResponse.jqxhr = response.jqxhr;\n\tapiResponse.status = response.jqxhr.status;\n\t//keep track of relevant headers\n\tapiResponse.lastModifiedVersion = response.jqxhr.getResponseHeader('Last-Modified-Version');\n\tapiResponse.apiVersion = response.jqxhr.getResponseHeader('Zotero-API-Version');\n\tapiResponse.backoff = response.jqxhr.getResponseHeader('Backoff');\n\tapiResponse.retryAfter = response.jqxhr.getResponseHeader('Retry-After');\n\tapiResponse.contentType = response.jqxhr.getResponseHeader('Content-Type');\n\tapiResponse.linkHeader = response.jqxhr.getResponseHeader('Link');\n\tapiResponse.totalResults = response.jqxhr.getResponseHeader('Total-Results');\n\tif(apiResponse.backoff){\n\t\tapiResponse.backoff = parseInt(apiResponse.backoff, 10);\n\t}\n\tif(apiResponse.retryAfter){\n\t\tapiResponse.retryAfter = parseInt(apiResponse.retryAfter, 10);\n\t}\n\t//TODO: parse link header into individual links\n\tlog.debug('parse link header', 4);\n\tlog.debug(apiResponse.linkHeader, 4);\n\tif(apiResponse.linkHeader){\n\t\tvar links = apiResponse.linkHeader.split(',');\n\t\tvar parsedLinks = {};\n\t\tvar linkRegex = /^<([^>]+)>; rel=\"([^\\\"]*)\"$/;\n\t\tfor(var i = 0; i < links.length; i++){\n\t\t\tvar matches = linkRegex.exec(links[i].trim());\n\t\t\tif(matches[2]){\n\t\t\t\tparsedLinks[matches[2]] = matches[1];\n\t\t\t}\n\t\t}\n\t\tapiResponse.parsedLinks = parsedLinks;\n\t}\n};","'use strict';\n\nvar log = require('./Log.js').Logger('libZotero:Base');\n\nvar Zotero = {\n\tcallbacks: {},\n\toffline: {},\n\ttemp: {},\n\t\n\tconfig: {librarySettings: {},\n\t\t\tbaseApiUrl: 'https://api.zotero.org',\n\t\t\tbaseWebsiteUrl: 'https://zotero.org',\n\t\t\tbaseFeedUrl: 'https://api.zotero.org',\n\t\t\tbaseZoteroWebsiteUrl: 'https://www.zotero.org',\n\t\t\tbaseDownloadUrl: 'https://www.zotero.org',\n\t\t\tnonparsedBaseUrl: '',\n\t\t\tdebugLogEndpoint: '',\n\t\t\tstoreDebug: true,\n\t\t\tdirectDownloads: true,\n\t\t\tproxyPath: '/proxyrequest',\n\t\t\tignoreLoggedInStatus: false,\n\t\t\tstorePrefsRemote: true,\n\t\t\tpreferUrlItem: true,\n\t\t\tsessionAuth: false,\n\t\t\tproxy: false,\n\t\t\tapiKey: '',\n\t\t\tapiVersion: 3,\n\t\t\tlocale: 'en-US',\n\t\t\tcacheStoreType: 'localStorage',\n\t\t\tpreloadCachedLibrary: true,\n\t\t\tsortOrdering: {\n\t\t\t\t'dateAdded': 'desc',\n\t\t\t\t'dateModified': 'desc',\n\t\t\t\t'date': 'desc',\n\t\t\t\t'year': 'desc',\n\t\t\t\t'accessDate': 'desc',\n\t\t\t\t'title': 'asc',\n\t\t\t\t'creator': 'asc'\n\t\t\t},\n\t\t\tdefaultSortColumn: 'title',\n\t\t\tdefaultSortOrder: 'asc',\n\t\t\tlargeFields: {\n\t\t\t\t'title': 1,\n\t\t\t\t'abstractNote': 1,\n\t\t\t\t'extra' : 1\n\t\t\t},\n\t\t\trichTextFields: {\n\t\t\t\t'note': 1\n\t\t\t},\n\t\t\tmaxFieldSummaryLength: {title:60},\n\t\t\texportFormats: [\n\t\t\t\t'bibtex',\n\t\t\t\t'bookmarks',\n\t\t\t\t'mods',\n\t\t\t\t'refer',\n\t\t\t\t'rdf_bibliontology',\n\t\t\t\t'rdf_dc',\n\t\t\t\t'rdf_zotero',\n\t\t\t\t'ris',\n\t\t\t\t'wikipedia'\n\t\t\t\t],\n\t\t\texportFormatsMap: {\n\t\t\t\t'bibtex': 'BibTeX',\n\t\t\t\t'bookmarks': 'Bookmarks',\n\t\t\t\t'mods': 'MODS',\n\t\t\t\t'refer': 'Refer/BibIX',\n\t\t\t\t'rdf_bibliontology': 'Bibliontology RDF',\n\t\t\t\t'rdf_dc': 'Unqualified Dublin Core RDF',\n\t\t\t\t'rdf_zotero': 'Zotero RDF',\n\t\t\t\t'ris': 'RIS',\n\t\t\t\t'wikipedia': 'Wikipedia Citation Templates'\n\t\t\t},\n\t\t\tdefaultApiArgs: {\n\t\t\t\t'order': 'title',\n\t\t\t\t'sort': 'asc',\n\t\t\t\t'limit': 50,\n\t\t\t\t'start': 0\n\t\t\t}\n\t},\n\t/*\n\tdebug: function(debugstring, level){\n\t\tvar prefLevel = 3;\n\t\tif(Zotero.config.storeDebug){\n\t\t\tif(level <= prefLevel){\n\t\t\t\tZotero.debugstring += 'DEBUG:' + debugstring + '\\n';\n\t\t\t}\n\t\t}\n\t\tif(typeof console == 'undefined'){\n\t\t\treturn;\n\t\t}\n\t\tif(typeof(level) !== 'number'){\n\t\t\tlevel = 1;\n\t\t}\n\t\tif(Zotero.preferences !== undefined){\n\t\t\tprefLevel = Zotero.preferences.getPref('debug_level');\n\t\t}\n\t\tif(level <= prefLevel) {\n\t\t\tconsole.log(debugstring);\n\t\t}\n\t},\n\t\n\twarn: function(warnstring){\n\t\tif(Zotero.config.storeDebug){\n\t\t\tZotero.debugstring += 'WARN:' + warnstring + '\\n';\n\t\t}\n\t\tif(typeof console == 'undefined' || typeof console.warn == 'undefined'){\n\t\t\tthis.debug(warnstring);\n\t\t}\n\t\telse{\n\t\t\tconsole.warn(warnstring);\n\t\t}\n\t},\n\t\n\terror: function(errorstring){\n\t\tif(Zotero.config.storeDebug){\n\t\t\tZotero.debugstring += 'ERROR:' + errorstring + '\\n';\n\t\t}\n\t\tif(typeof console == 'undefined' || typeof console.error == 'undefined'){\n\t\t\tthis.debug(errorstring);\n\t\t}\n\t\telse{\n\t\t\tconsole.error(errorstring);\n\t\t}\n\t},\n\t*/\n\tsubmitDebugLog: function(){\n\t\tZotero.net.ajax({\n\t\t\turl: Zotero.config.debugLogEndpoint,\n\t\t\tdata: {'debug_string': Zotero.debugstring}\n\t\t}).then(function(xhr){\n\t\t\tvar data = JSON.parse(xhr.responseText);\n\t\t\tif(data.logID) {\n\t\t\t\talert('ZoteroWWW debug logID:' + data.logID);\n\t\t\t} else if (data.error) {\n\t\t\t\talert('Error submitting ZoteroWWW debug log:' + data.error);\n\t\t\t}\n\t\t});\n\t},\n\t\n\tcatchPromiseError: function(err){\n\t\tlog.error(err);\n\t},\n\t\n\tlibraries: {},\n\t\n\tvalidator: {\n\t\tpatterns: {\n\t\t\t//'itemKey': /^([A-Z0-9]{8,},?)+$/,\n\t\t\t'itemKey': /^.+$/,\n\t\t\t'collectionKey': /^([A-Z0-9]{8,})|trash$/,\n\t\t\t//'tag': /^[^#]*$/,\n\t\t\t'libraryID': /^[0-9]+$/,\n\t\t\t'libraryType': /^(user|group|)$/,\n\t\t\t'target': /^(items?|collections?|tags|children|deleted|userGroups|key|settings|publications)$/,\n\t\t\t'targetModifier': /^(top|file|file\\/view)$/,\n\t\t\t\n\t\t\t//get params\n\t\t\t'sort': /^(asc|desc)$/,\n\t\t\t'start': /^[0-9]*$/,\n\t\t\t'limit': /^[0-9]*$/,\n\t\t\t'order': /^\\S*$/,\n\t\t\t'content': /^((html|json|data|bib|none|bibtex|bookmarks|coins|csljson|mods|refer|rdf_bibliontology|rdf_dc|ris|tei|wikipedia),?)+$/,\n\t\t\t'include': /^((html|json|data|bib|none|bibtex|bookmarks|coins|csljson|mods|refer|rdf_bibliontology|rdf_dc|ris|tei|wikipedia),?)+$/,\n\t\t\t'q': /^.*$/,\n\t\t\t'fq': /^\\S*$/,\n\t\t\t'itemType': /^\\S*$/,\n\t\t\t'locale': /^\\S*$/,\n\t\t\t'tag': /^.*$/,\n\t\t\t'tagType': /^(0|1)$/,\n\t\t\t'key': /^\\S*/,\n\t\t\t'format': /^(json|atom|bib|keys|versions|bibtex|bookmarks|mods|refer|rdf_bibliontology|rdf_dc|rdf_zotero|ris|wikipedia)$/,\n\t\t\t'style': /^\\S*$/,\n\t\t\t'linkwrap': /^(0|1)*$/\n\t\t},\n\t\t\n\t\tvalidate: function(arg, type){\n\t\t\tlog.debug('Zotero.validate', 4);\n\t\t\tif(arg === ''){\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\telse if(arg === null){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tlog.debug(arg + ' ' + type, 4);\n\t\t\tvar patterns = this.patterns;\n\t\t\t\n\t\t\tif(patterns.hasOwnProperty(type)){\n\t\t\t\treturn patterns[type].test(arg);\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t},\n\t\n\t_logEnabled: 0,\n\tenableLogging: function(){\n\t\tZotero._logEnabled++;\n\t\tif(Zotero._logEnabled > 0){\n\t\t\t//TODO: enable debug_log?\n\t\t}\n\t},\n\t\n\tdisableLogging: function(){\n\t\tZotero._logEnabled--;\n\t\tif(Zotero._logEnabled <= 0){\n\t\t\tZotero._logEnabled = 0;\n\t\t\t//TODO: disable debug_log?\n\t\t}\n\t},\n\t\n\tinit: function(){\n\t\tvar store;\n\t\tif(Zotero.config.cacheStoreType == 'localStorage' && typeof localStorage != 'undefined'){\n\t\t\tstore = localStorage;\n\t\t}\n\t\telse if(Zotero.config.cacheStoreType == 'sessionStorage' && typeof sessionStorage != 'undefined'){\n\t\t\tstore = sessionStorage;\n\t\t}\n\t\telse{\n\t\t\tstore = {};\n\t\t}\n\t\tZotero.store = store;\n\t\t\n\t\tZotero.cache = new Zotero.Cache(store);\n\t\t\n\t\t//initialize global preferences object\n\t\tZotero.preferences = new Zotero.Preferences(Zotero.store, 'global');\n\t\t\n\t\t//get localized item constants if not stored in localstorage\n\t\tvar locale = 'en-US';\n\t\tif(Zotero.config.locale){\n\t\t\tlocale = Zotero.config.locale;\n\t\t}\n\t\tlocale = 'en-US';\n\t}\n};\n\n\nZotero.ajaxRequest = function(url, type, options){\n\tlog.debug('Zotero.ajaxRequest ==== ' + url, 3);\n\tif(!type){\n\t\ttype = 'GET';\n\t}\n\tif(!options){\n\t\toptions = {};\n\t}\n\tvar requestObject = {\n\t\turl: url,\n\t\ttype: type\n\t};\n\trequestObject = Z.extend({}, requestObject, options);\n\tlog.debug(requestObject, 3);\n\treturn Zotero.net.queueRequest(requestObject);\n};\n\n//non-DOM (jquery) event management\nZotero.eventmanager = {\n\tcallbacks: {}\n};\n\nZotero.trigger = function(eventType, data={}, filter=false){\n\tif(filter){\n\t\tlog.debug('filter is not false', 3);\n\t\teventType += '_' + filter;\n\t}\n\tlog.debug('Triggering eventful ' + eventType, 3);\n\t\n\tdata.zeventful = true;\n\t// if(data.triggeringElement === null || data.triggeringElement === undefined){\n\t// \tdata.triggeringElement = J('#eventful');\n\t// }\n\t\n\ttry{\n\t\tif(Zotero.eventmanager.callbacks.hasOwnProperty(eventType)){\n\t\t\tvar callbacks = Zotero.eventmanager.callbacks[eventType];\n\t\t\tcallbacks.forEach(function(callback){\n\t\t\t\tvar cdata = Z.extend({}, data, callback.data);\n\t\t\t\tvar e = {\n\t\t\t\t\tdata: cdata\n\t\t\t\t};\n\t\t\t\tcallback.f(e);\n\t\t\t});\n\t\t}\n\t}\n\tcatch(e){\n\t\tlog.error(`failed triggering:${eventType}`);\n\t\tlog.error(e);\n\t}\n};\n\nZotero.listen = function(events, handler, data, filter){\n\tlog.debug('Zotero.listen: ' + events, 3);\n\t//append filter to event strings if it's specified\n\tvar eventsArray = events.split(' ');\n\tif(eventsArray.length > 0 && filter){\n\t\tfor(var i = 0; i < eventsArray.length; i++){\n\t\t\teventsArray[i] += '_' + filter;\n\t\t}\n\t}\n\teventsArray.forEach(function(ev){\n\t\tif(Zotero.eventmanager.callbacks.hasOwnProperty(ev)){\n\t\t\tZotero.eventmanager.callbacks[ev].push({\n\t\t\t\tdata: data,\n\t\t\t\tf: handler\n\t\t\t});\n\t\t} else {\n\t\t\tZotero.eventmanager.callbacks[ev] = [{\n\t\t\t\tdata: data,\n\t\t\t\tf: handler\n\t\t\t}];\n\t\t}\n\t});\n};\n\nZotero.extend = function() {\n\tvar res = {};\n\tfor(var i = 0; i < arguments.length; i++){\n\t\tvar a = arguments[i];\n\t\tif(typeof a != 'object'){\n\t\t\tcontinue;\n\t\t}\n\t\tObject.keys(a).forEach(function(key){\n\t\t\tres[key] = a[key];\n\t\t});\n\t}\n\treturn res;\n};\n\nZotero.deepExtend = function(out) {\n  out = out || {};\n\n  for (var i = 1; i < arguments.length; i++) {\n    var obj = arguments[i];\n\n    if (!obj)\n      continue;\n\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        if (typeof obj[key] === 'object')\n          out[key] = Zotero.deepExtend(out[key], obj[key]);\n        else\n          out[key] = obj[key];\n      }\n    }\n  }\n\n  return out;\n};\n\nmodule.exports = Zotero;","'use strict';\n\nvar log = require('./Log.js').Logger('libZotero:Cache');\n\n//build a consistent string from an object to use as a cache key\n//put object key/value pairs into array, sort array, and concatenate\n//array with '/'\nmodule.exports = function(store) {\n\tthis.store = store;\n\tvar registry = this.store._registry;\n\tif(registry === null || typeof registry == 'undefined'){\n\t\tregistry = {};\n\t\tthis.store._registry = JSON.stringify(registry);\n\t}\n};\n\nmodule.exports.prototype.objectCacheString = function(params){\n\tvar paramVarsArray = [];\n\tObject.keys(params).forEach(function(index){\n\t\tvar value = params[index];\n\t\tif(!value) { return; }\n\t\telse if(Array.isArray(value)){\n\t\t\tvalue.forEach(function(v){\n\t\t\t\tparamVarsArray.push(index + '/' + encodeURIComponent(v) );\n\t\t\t});\n\t\t}\n\t\telse{\n\t\t\tparamVarsArray.push(index + '/' + encodeURIComponent(value) );\n\t\t}\n\t});\n\tparamVarsArray.sort();\n\tlog.debug(paramVarsArray, 4);\n\tvar objectCacheString = paramVarsArray.join('/');\n\treturn objectCacheString;\n};\n\n//should use setItem and getItem if I extend that to the case where no Storage object is available in the browser\nmodule.exports.prototype.save = function(params, object, cachetags){\n\t//cachetags for expiring entries\n\tif(!Array.isArray(cachetags)){\n\t\tcachetags = [];\n\t}\n\t//get registry object from storage\n\tvar registry = JSON.parse(this.store._registry);\n\tif(!registry){\n\t\tregistry = {};\n\t}\n\tvar objectCacheString = this.objectCacheString(params);\n\t//save object in storage\n\tthis.store[objectCacheString] = JSON.stringify(object);\n\t//make registry entry for object\n\tvar registryEntry = {'id':objectCacheString, saved:Date.now(), cachetags:cachetags};\n\tregistry[objectCacheString] = registryEntry;\n\t//save registry back to storage\n\tthis.store._registry = JSON.stringify(registry);\n};\n\nmodule.exports.prototype.load = function(params){\n\tlog.debug('Zotero.Cache.load', 3);\n\tvar objectCacheString = this.objectCacheString(params);\n\tlog.debug(objectCacheString, 4);\n\ttry{\n\t\tvar s = this.store[objectCacheString];\n\t\tif(!s){\n\t\t\tlog.warn('No value found in cache store - ' + objectCacheString, 3);\n\t\t\treturn null;\n\t\t}\n\t\telse{\n\t\t\treturn JSON.parse(s);\n\t\t}\n\t}\n\tcatch(e){\n\t\tlog.error(`Error parsing retrieved cache data: ${objectCacheString} : ${s}`);\n\t\treturn null;\n\t}\n};\n\nmodule.exports.prototype.expireCacheTag = function(tag){\n\tlog.debug('Zotero.Cache.expireCacheTag', 3);\n\tvar registry = JSON.parse(this.store._registry);\n\tvar store = this.store;\n\tObject.keys(registry).forEach(function(index){\n\t\tvar value = registry[index];\n\t\tif(value.cachetags.indexOf(tag) != (-1)){\n\t\t\tlog.debug('tag ' + tag + ' found for item ' + value['id'] + ' : expiring', 4);\n\t\t\tdelete store[value['id']];\n\t\t\tdelete registry[value['id']];\n\t\t}\n\t});\n};\n\nmodule.exports.prototype.clear = function(){\n\tif(typeof(this.store.clear) == 'function'){\n\t\tthis.store.clear();\n\t}\n\telse{\n\t\tthis.store = {};\n\t}\n};","'use strict';\n\nvar log = require('./Log.js').Logger('libZotero:Collection');\n\nmodule.exports = function(collectionObj){\n\tthis.instance = 'Zotero.Collection';\n\tthis.libraryUrlIdentifier = '';\n\tthis.itemKeys = false;\n\tthis.key = '';\n\tthis.version = 0;\n\tthis.synced = false;\n\tthis.pristineData = null;\n\tthis.apiObj = {\n\t\t'key': '',\n\t\t'version': 0,\n\t\t'library':{},\n\t\t'links':{},\n\t\t'meta':{},\n\t\t'data':{\n\t\t\t'key': '',\n\t\t\t'version': 0,\n\t\t\t'name': '',\n\t\t\t'parentCollection': false,\n\t\t\t'relations':{}\n\t\t}\n\t};\n\tthis.children = [];\n\tthis.topLevel = true;\n\tif(collectionObj){\n\t\tthis.parseJsonCollection(collectionObj);\n\t}\n};\n\nmodule.exports.prototype = new Zotero.ApiObject();\nmodule.exports.prototype.instance = 'Zotero.Collection';\n\nmodule.exports.prototype.updateObjectKey = function(collectionKey){\n\tthis.updateCollectionKey(collectionKey);\n};\n\nmodule.exports.prototype.updateCollectionKey = function(collectionKey){\n\tvar collection = this;\n\tcollection.key = collectionKey;\n\tcollection.apiObj.key = collectionKey;\n\tcollection.apiObj.data.key = collectionKey;\n\treturn collection;\n};\n\nmodule.exports.prototype.parseJsonCollection = function(apiObj) {\n\tlog.debug('parseJsonCollection', 4);\n\tvar collection = this;\n\tcollection.key = apiObj.key;\n\tcollection.version = apiObj.version;\n\tcollection.apiObj = Z.extend({}, apiObj);\n\tcollection.pristineData = Z.extend({}, apiObj.data);\n\n\tcollection.parentCollection = false;\n\tcollection.topLevel = true;\n\tcollection.synced = true;\n\tcollection.initSecondaryData();\n};\n\nmodule.exports.prototype.initSecondaryData = function() {\n\tvar collection = this;\n\t\n\tif(collection.apiObj.data['parentCollection']){\n\t\tcollection.topLevel = false;\n\t} else {\n\t\tcollection.topLevel = true;\n\t}\n\t\n\tif(Zotero.config.librarySettings.libraryPathString){\n\t\tcollection.websiteCollectionLink = Zotero.config.librarySettings.libraryPathString + \n\t\t'/collectionKey/' + collection.apiObj.key;\n\t}\n\telse {\n\t\tcollection.websiteCollectionLink = '';\n\t}\n\tcollection.hasChildren = (collection.apiObj.meta.numCollections) ? true : false;\n\t\n};\n\nmodule.exports.prototype.nestCollection = function(collectionsObject) {\n\tlog.debug('Zotero.Collection.nestCollection', 4);\n\tvar collection = this;\n\tvar parentCollectionKey = collection.get('parentCollection');\n\tif(parentCollectionKey !== false){\n\t\tif(collectionsObject.hasOwnProperty(parentCollectionKey)) {\n\t\t\tvar parentOb = collectionsObject[parentCollectionKey];\n\t\t\tparentOb.children.push(collection);\n\t\t\tparentOb.hasChildren = true;\n\t\t\tcollection.topLevel = false;\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nmodule.exports.prototype.addItems = function(itemKeys){\n\tlog.debug('Zotero.Collection.addItems', 3);\n\tvar collection = this;\n\tvar config = {\n\t\t'target':'items',\n\t\t'libraryType':collection.apiObj.library.type,\n\t\t'libraryID':collection.apiObj.library.id,\n\t\t'collectionKey':collection.key\n\t};\n\tvar requestData = itemKeys.join(' ');\n\t\n\treturn Zotero.ajaxRequest(config, 'POST', {\n\t\tdata: requestData\n\t});\n};\n\nmodule.exports.prototype.getMemberItemKeys = function(){\n\tlog.debug('Zotero.Collection.getMemberItemKeys', 3);\n\tvar collection = this;\n\tvar config = {\n\t\t'target':'items',\n\t\t'libraryType':collection.apiObj.library.type,\n\t\t'libraryID':collection.apiObj.library.id,\n\t\t'collectionKey':collection.key,\n\t\t'format':'keys'\n\t};\n\t\n\treturn Zotero.ajaxRequest(config, 'GET', {processData: false} )\n\t.then(function(response){\n\t\tlog.debug('getMemberItemKeys proxied callback', 3);\n\t\tvar result = response.data;\n\t\tvar keys = result.trim().split(/[\\s]+/);\n\t\tcollection.itemKeys = keys;\n\t\treturn keys;\n\t});\n};\n\nmodule.exports.prototype.removeItem = function(itemKey){\n\tvar collection = this;\n\tvar config = {\n\t\t'target':'item',\n\t\t'libraryType':collection.apiObj.library.type,\n\t\t'libraryID':collection.apiObj.library.id,\n\t\t'collectionKey':collection.key,\n\t\t'itemKey':itemKey\n\t};\n\treturn Zotero.ajaxRequest(config, 'DELETE', {\n\t\tprocessData: false,\n\t\tcache:false\n\t});\n};\n\nmodule.exports.prototype.update = function(name, parentKey){\n\tvar collection = this;\n\tif(!parentKey) parentKey = false;\n\tvar config = {\n\t\t'target':'collection',\n\t\t'libraryType':collection.apiObj.library.type,\n\t\t'libraryID':collection.apiObj.library.id,\n\t\t'collectionKey':collection.key\n\t};\n\t\n\tcollection.set('name', name);\n\tcollection.set('parentCollection', parentKey);\n\t\n\tvar writeObject = collection.writeApiObj();\n\tvar requestData = JSON.stringify(writeObject);\n\t\n\treturn Zotero.ajaxRequest(config, 'PUT', {\n\t\tdata: requestData,\n\t\tprocessData: false,\n\t\theaders:{\n\t\t\t'If-Unmodified-Since-Version': collection.version\n\t\t},\n\t\tcache:false\n\t});\n};\n\nmodule.exports.prototype.writeApiObj = function(){\n\tvar collection = this;\n\tvar writeObj = Z.extend({}, collection.pristineData, collection.apiObj.data);\n\treturn writeObj;\n};\n\nmodule.exports.prototype.remove = function(){\n\tlog.debug('Zotero.Collection.delete', 3);\n\tvar collection = this;\n\tvar owningLibrary = collection.owningLibrary;\n\tvar config = {\n\t\t'target':'collection',\n\t\t'libraryType':collection.apiObj.library.type,\n\t\t'libraryID':collection.apiObj.library.id,\n\t\t'collectionKey':collection.key\n\t};\n\t\n\treturn Zotero.ajaxRequest(config, 'DELETE', {\n\t\tprocessData: false,\n\t\theaders:{\n\t\t\t'If-Unmodified-Since-Version': collection.version\n\t\t},\n\t\tcache:false\n\t}).then(function(){\n\t\tlog.debug('done deleting collection. remove local copy.', 3);\n\t\towningLibrary.collections.removeLocalCollection(collection.key);\n\t\towningLibrary.trigger('libraryCollectionsUpdated');\n\t});\n};\n\nmodule.exports.prototype.get = function(key){\n\tvar collection = this;\n\tswitch(key) {\n\t\tcase 'title':\n\t\tcase 'name':\n\t\t\treturn collection.apiObj.data.name;\n\t\tcase 'collectionKey':\n\t\tcase 'key':\n\t\t\treturn collection.apiObj.key || collection.key;\n\t\tcase 'collectionVersion':\n\t\tcase 'version':\n\t\t\treturn collection.apiObj.version;\n\t\tcase 'parentCollection':\n\t\t\treturn collection.apiObj.data.parentCollection;\n\t}\n\t\n\tif(key in collection.apiObj.data){\n\t\treturn collection.apiObj.data[key];\n\t}\n\telse if(collection.apiObj.meta.hasOwnProperty(key)){\n\t\treturn collection.apiObj.meta[key];\n\t}\n\telse if(collection.hasOwnProperty(key)){\n\t\treturn collection[key];\n\t}\n\t\n\treturn null;\n};\n/*\n module.exports.prototype.get = function(key){\n\tvar collection = this;\n\tswitch(key) {\n\t\tcase 'title':\n\t\tcase 'name':\n\t\t\treturn collection.apiObj.data['name'];\n\t\tcase 'collectionKey':\n\t\tcase 'key':\n\t\t\treturn collection.apiObj.key;\n\t\tcase 'parentCollection':\n\t\t\treturn collection.apiObj.data['parentCollection'];\n\t\tcase 'collectionVersion':\n\t\tcase 'version':\n\t\t\treturn collection.apiObj.version;\n\t}\n\t\n\tif(key in collection.apiObj.data){\n\t\treturn collection.apiObj.data[key];\n\t}\n\telse if(key in collection.apiObj.meta){\n\t\treturn collection.apiObj.meta[key];\n\t}\n\telse if(collection.hasOwnProperty(key)){\n\t\treturn collection[key];\n\t}\n\t\n\treturn null;\n};\n*/\n\nmodule.exports.prototype.set = function(key, val){\n\tvar collection = this;\n\tif(key in collection.apiObj.data){\n\t\tcollection.apiObj.data[key] = val;\n\t}\n\tswitch(key){\n\t\tcase 'title':\n\t\tcase 'name':\n\t\t\tcollection.apiObj.data['name'] = val;\n\t\tbreak;\n\t\tcase 'collectionKey':\n\t\tcase 'key':\n\t\t\tcollection.key = val;\n\t\t\tcollection.apiObj.key = val;\n\t\t\tcollection.apiObj.data.key = val;\n\t\tbreak;\n\t\tcase 'parentCollection':\n\t\t\tcollection.apiObj.data['parentCollection'] = val;\n\t\tbreak;\n\t\tcase 'collectionVersion':\n\t\tcase 'version':\n\t\t\tcollection.version = val;\n\t\t\tcollection.apiObj.version = val;\n\t\t\tcollection.apiObj.data.version = val;\n\t\tbreak;\n\t}\n\t\n\tif(collection.hasOwnProperty(key)) {\n\t\tcollection[key] = val;\n\t}\n};\n","'use strict';\n\nvar log = require('./Log.js').Logger('libZotero:Collections');\n\nmodule.exports = function(jsonBody){\n\tvar collections = this;\n\tthis.instance = 'Zotero.Collections';\n\tthis.version = 0;\n\tthis.syncState = {\n\t\tearliestVersion: null,\n\t\tlatestVersion: null\n\t};\n\tthis.collectionObjects = {};\n\tthis.collectionsArray = [];\n\tthis.objectMap = this.collectionObjects;\n\tthis.objectArray = this.collectionsArray;\n\tthis.dirty = false;\n\tthis.loaded = false;\n\t\n\tif(jsonBody){\n\t\tthis.addCollectionsFromJson(jsonBody);\n\t\tthis.initSecondaryData();\n\t}\n};\n\n module.exports.prototype = new Zotero.Container();\n//build up secondary data necessary to rendering and easy operations but that\n//depend on all collections already being present\n module.exports.prototype.initSecondaryData = function(){\n\tlog.debug('Zotero.Collections.initSecondaryData', 3);\n\tvar collections = this;\n\t\n\t//rebuild collectionsArray\n\tcollections.collectionsArray = [];\n\tObject.keys(collections.collectionObjects).forEach(function(key){\n\t\tvar collection = collections.collectionObjects[key];\n\t\tcollections.collectionsArray.push(collection);\n\t});\n\t\n\tcollections.collectionsArray.sort(Zotero.ApiObject.prototype.fieldComparer('name'));\n\tcollections.nestCollections();\n\tcollections.assignDepths(0, collections.collectionsArray);\n};\n\n//take Collection XML and insert a Collection object\n module.exports.prototype.addCollection = function(collection){\n\tthis.addObject(collection);\n\treturn this;\n};\n\n module.exports.prototype.addCollectionsFromJson = function(jsonBody){\n\tlog.debug('addCollectionsFromJson');\n\tlog.debug(jsonBody);\n\tvar collections = this;\n\tvar collectionsAdded = [];\n\tjsonBody.forEach(function(collectionObj){\n\t\tvar collection = new Zotero.Collection(collectionObj);\n\t\tcollections.addObject(collection);\n\t\tcollectionsAdded.push(collection);\n\t});\n\treturn collectionsAdded;\n};\n\n module.exports.prototype.assignDepths = function(depth, cArray){\n\tlog.debug('Zotero.Collections.assignDepths', 3);\n\tvar collections = this;\n\tvar insertchildren = function(depth, children){\n\t\tchildren.forEach(function(col){\n\t\t\tcol.nestingDepth = depth;\n\t\t\tif(col.hasChildren){\n\t\t\t\tinsertchildren((depth + 1), col.children);\n\t\t\t}\n\t\t});\n\t};\n\tcollections.collectionsArray.forEach(function(collection){\n\t\tif(collection.topLevel){\n\t\t\tcollection.nestingDepth = 1;\n\t\t\tif(collection.hasChildren){\n\t\t\t\tinsertchildren(2, collection.children);\n\t\t\t}\n\t\t}\n\t});\n};\n\n module.exports.prototype.nestedOrderingArray = function(){\n\tlog.debug('Zotero.Collections.nestedOrderingArray', 3);\n\tvar collections = this;\n\tvar nested = [];\n\tvar insertchildren = function(a, children){\n\t\tchildren.forEach(function(col){\n\t\t\ta.push(col);\n\t\t\tif(col.hasChildren){\n\t\t\t\tinsertchildren(a, col.children);\n\t\t\t}\n\t\t});\n\t};\n\tcollections.collectionsArray.forEach(function(collection){\n\t\tif(collection.topLevel){\n\t\t\tnested.push(collection);\n\t\t\tif(collection.hasChildren){\n\t\t\t\tinsertchildren(nested, collection.children);\n\t\t\t}\n\t\t}\n\t});\n\tlog.debug('Done with nestedOrderingArray', 3);\n\treturn nested;\n};\n\n module.exports.prototype.getCollection = function(key){\n\treturn this.getObject(key);\n};\n\n module.exports.prototype.remoteDeleteCollection = function(collectionKey){\n\tvar collections = this;\n\treturn collections.removeLocalCollection(collectionKey);\n};\n\n module.exports.prototype.removeLocalCollection = function(collectionKey){\n\tvar collections = this;\n\treturn collections.removeLocalCollections([collectionKey]);\n};\n\n module.exports.prototype.removeLocalCollections = function(collectionKeys){\n\tvar collections = this;\n\t//delete Collection from collectionObjects\n\tfor(var i = 0; i < collectionKeys.length; i++){\n\t\tdelete collections.collectionObjects[collectionKeys[i]];\n\t}\n\t\n\t//rebuild collectionsArray\n\tcollections.initSecondaryData();\n};\n\n//reprocess all collections to add references to children inside their parents\n module.exports.prototype.nestCollections = function(){\n\tvar collections = this;\n\t//clear out all child references so we don't duplicate\n\tcollections.collectionsArray.forEach(function(collection){\n\t\tcollection.children = [];\n\t});\n\t\n\tcollections.collectionsArray.sort(Zotero.ApiObject.prototype.fieldComparer('name'));\n\tcollections.collectionsArray.forEach(function(collection){\n\t\tcollection.nestCollection(collections.collectionObjects);\n\t});\n};\n\n module.exports.prototype.writeCollections = function(collectionsArray){\n\tlog.debug('Zotero.Collections.writeCollections', 3);\n\tvar collections = this;\n\tvar library = collections.owningLibrary;\n\tvar i;\n\t\n\tvar config = {\n\t\t'target':'collections',\n\t\t'libraryType':collections.owningLibrary.libraryType,\n\t\t'libraryID':collections.owningLibrary.libraryID\n\t};\n\tvar requestUrl = Zotero.ajax.apiRequestString(config);\n\t\n\t//add collectionKeys to collections if they don't exist yet\n\tfor(i = 0; i < collectionsArray.length; i++){\n\t\tvar collection = collectionsArray[i];\n\t\t//generate a collectionKey if the collection does not already have one\n\t\tvar collectionKey = collection.get('key');\n\t\tif(collectionKey === '' || collectionKey === null) {\n\t\t\tvar newCollectionKey = Zotero.utils.getKey();\n\t\t\tcollection.set('key', newCollectionKey);\n\t\t\tcollection.set('version', 0);\n\t\t}\n\t}\n\n\tvar writeChunks = collections.chunkObjectsArray(collectionsArray);\n\tvar rawChunkObjects = collections.rawChunks(writeChunks);\n\t//update collections with server response if successful\n\tvar writeCollectionsSuccessCallback = function(response){\n\t\tlog.debug('writeCollections successCallback', 3);\n\t\tvar library = this.library;\n\t\tvar writeChunk = this.writeChunk;\n\t\tlibrary.collections.updateObjectsFromWriteResponse(this.writeChunk, response);\n\t\t//save updated collections to collections\n\t\tfor(var i = 0; i < writeChunk.length; i++){\n\t\t\tvar collection = writeChunk[i];\n\t\t\tif(collection.synced && (!collection.writeFailure)) {\n\t\t\t\tlibrary.collections.addCollection(collection);\n\t\t\t\t//save updated collections to IDB\n\t\t\t\tif(Zotero.config.useIndexedDB){\n\t\t\t\t\tlog.debug('updating indexedDB collections');\n\t\t\t\t\tlibrary.idbLibrary.updateCollections(writeChunk);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tresponse.returnCollections = writeChunk;\n\t\treturn response;\n\t};\n\t\n\tlog.debug('collections.version: ' + collections.version, 3);\n\tlog.debug('collections.libraryVersion: ' + collections.libraryVersion, 3);\n\t\n\tvar requestObjects = [];\n\tfor(i = 0; i < writeChunks.length; i++){\n\t\tvar successContext = {\n\t\t\twriteChunk: writeChunks[i],\n\t\t\tlibrary: library\n\t\t};\n\t\t\n\t\tvar requestData = JSON.stringify(rawChunkObjects[i]);\n\t\trequestObjects.push({\n\t\t\turl: requestUrl,\n\t\t\ttype: 'POST',\n\t\t\tdata: requestData,\n\t\t\tprocessData: false,\n\t\t\theaders:{\n\t\t\t\t//'If-Unmodified-Since-Version': collections.version,\n\t\t\t\t//'Content-Type': 'application/json'\n\t\t\t},\n\t\t\tsuccess: writeCollectionsSuccessCallback.bind(successContext)\n\t\t});\n\t}\n\n\treturn library.sequentialRequests(requestObjects)\n\t.then(function(responses){\n\t\tlog.debug('Done with writeCollections sequentialRequests promise', 3);\n\t\tcollections.initSecondaryData();\n\t\t\n\t\tresponses.forEach(function(response){\n\t\t\tif(response.isError || (response.data.hasOwnProperty('failed') && Object.keys(response.data.failed).length > 0) ){\n\t\t\t\tthrow new Error('failure when writing collections');\n\t\t\t}\n\t\t});\n\t\treturn responses;\n\t})\n\t.catch(function(err){\n\t\tlog.error(err);\n\t\t//rethrow so widget doesn't report success\n\t\tthrow(err);\n\t});\n};\n","'use strict';\n\nvar log = require('./Log.js').Logger('libZotero:Container');\n\nmodule.exports = function(){\n\t\n};\n\nmodule.exports.prototype.initSecondaryData = function(){\n\t\n};\n\nmodule.exports.prototype.addObject = function(object){\n\tlog.debug('Zotero.Container.addObject', 4);\n\tvar container = this;\n\tcontainer.objectArray.push(object);\n\tcontainer.objectMap[object.key] = object;\n\tif(container.owningLibrary){\n\t\tobject.associateWithLibrary(container.owningLibrary);\n\t}\n\t\n\treturn container;\n};\n\nmodule.exports.prototype.fieldComparer = function(field){\n\tif(Intl){\n\t\tvar collator = new Intl.Collator();\n\t\treturn function(a, b){\n\t\t\treturn collator.compare(a.apiObj.data[field], b.apiObj.data[field]);\n\t\t};\n\t} else {\n\t\treturn function(a, b){\n\t\t\tif(a.apiObj.data[field].toLowerCase() == b.apiObj.data[field].toLowerCase()){\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tif(a.apiObj.data[field].toLowerCase() < b.apiObj.data[field].toLowerCase()){\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\treturn 1;\n\t\t};\n\t}\n};\n\nmodule.exports.prototype.getObject = function(key){\n\tvar container = this;\n\tif(container.objectMap.hasOwnProperty(key)){\n\t\treturn container.objectMap[key];\n\t}\n\telse{\n\t\treturn false;\n\t}\n};\n\nmodule.exports.prototype.getObjects = function(keys){\n\tvar container = this;\n\tvar objects = [];\n\tvar object;\n\tfor(var i = 0; i < keys.length; i++){\n\t\tobject = container.getObject(keys[i]);\n\t\tif(object){\n\t\t\tobjects.push(object);\n\t\t}\n\t}\n\treturn objects;\n};\n\nmodule.exports.prototype.removeObject = function(key){\n\tvar container = this;\n\tif(container.objectMap.hasOwnProperty(key)){\n\t\tdelete container.objectmap[key];\n\t\tcontainer.initSecondaryData();\n\t}\n};\n\nmodule.exports.prototype.removeObjects = function(keys){\n\tvar container = this;\n\t//delete Objects from objectMap;\n\tfor(var i = 0; i < keys.length; i++){\n\t\tdelete container.objectMap[keys[i]];\n\t}\n\t\n\t//rebuild array\n\tcontainer.initSecondaryData();\n};\n\nmodule.exports.prototype.writeObjects = function(objects){\n\t//TODO:implement\n};\n\n//generate keys for objects about to be written if they are new\nmodule.exports.prototype.assignKeys = function(objectsArray){\n\tvar object;\n\tfor(var i = 0; i < objectsArray.length; i++){\n\t\tobject = objectsArray[i];\n\t\tvar key = object.get('key');\n\t\tif(!key) {\n\t\t\tvar newObjectKey = Zotero.utils.getKey();\n\t\t\tobject.set('key', newObjectKey);\n\t\t\tobject.set('version', 0);\n\t\t}\n\t}\n\treturn objectsArray;\n};\n\n//split an array of objects into chunks to write over multiple api requests\nmodule.exports.prototype.chunkObjectsArray = function(objectsArray){\n\tvar chunkSize = 50;\n\tvar writeChunks = [];\n\t\n\tfor(var i = 0; i < objectsArray.length; i = i + chunkSize){\n\t\twriteChunks.push(objectsArray.slice(i, i+chunkSize));\n\t}\n\t\n\treturn writeChunks;\n};\n\nmodule.exports.prototype.rawChunks = function(chunks){\n\tvar rawChunkObjects = [];\n\t\n\tfor(var i = 0; i < chunks.length; i++){\n\t\trawChunkObjects[i] = [];\n\t\tfor(var j = 0; j < chunks[i].length; j++){\n\t\t\trawChunkObjects[i].push(chunks[i][j].writeApiObj());\n\t\t}\n\t}\n\treturn rawChunkObjects;\n};\n\n/**\n * Update syncState property on container to keep track of updates that occur during sync process.\n * Set earliestVersion to MIN(earliestVersion, version).\n * Set latestVersion to MAX(latestVersion, version).\n * This should be called with the modifiedVersion header for each response tied to this container\n * during a sync process.\n * @param  {int} version\n * @return {null}\n */\nmodule.exports.prototype.updateSyncState = function(version) {\n\tvar container = this;\n\tlog.debug('updateSyncState: ' + version, 3);\n\tif(!container.hasOwnProperty('syncState')){\n\t\tlog.debug('no syncState property');\n\t\tthrow new Error('Attempt to update sync state of object with no syncState property');\n\t}\n\tif(container.syncState.earliestVersion === null){\n\t\tcontainer.syncState.earliestVersion = version;\n\t}\n\tif(container.syncState.latestVersion === null){\n\t\tcontainer.syncState.latestVersion = version;\n\t}\n\tif(version < container.syncState.earliestVersion){\n\t\tcontainer.syncState.earliestVersion = version;\n\t}\n\tif(version > container.syncState.latestVersion){\n\t\tcontainer.syncState.latestVersion = version;\n\t}\n\tlog.debug('done updating sync state', 3);\n};\n\nmodule.exports.prototype.updateSyncedVersion = function(versionField) {\n\tvar container = this;\n\tif(container.syncState.earliestVersion !== null &&\n\t\t(container.syncState.earliestVersion == container.syncState.latestVersion) ){\n\t\tcontainer.version = container.syncState.latestVersion;\n\t\tcontainer.synced = true;\n\t}\n\telse if(container.syncState.earliestVersion !== null) {\n\t\tcontainer.version = container.syncState.earliestVersion;\n\t}\n};\n\nmodule.exports.prototype.processDeletions = function(deletedKeys) {\n\tvar container = this;\n\tfor(var i = 0; i < deletedKeys.length; i++){\n\t\tvar localObject = container.get(deletedKeys[i]);\n\t\tif(localObject !== false){\n\t\t\t//still have object locally\n\t\t\tif(localObject.synced === true){\n\t\t\t\t//our object is not modified, so delete it as the server thinks we should\n\t\t\t\tcontainer.removeObjects([deletedKeys[i]]);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t//TODO: conflict resolution\n\t\t\t}\n\t\t}\n\t}\n};\n\n//update items appropriately based on response to multi-write request\n//for success:\n//  update objectKey if item doesn't have one yet (newly created item)\n//  update itemVersion to response's Last-Modified-Version header\n//  mark as synced\n//for unchanged:\n//  don't need to do anything? itemVersion should remain the same?\n//  mark as synced if not already?\n//for failed:\n//  add the failure to the object under writeFailure\n//  don't mark as synced\n//  calling code should check for writeFailure after the written objects\n//  are returned\nmodule.exports.prototype.updateObjectsFromWriteResponse = function(objectsArray, response){\n\tlog.debug('Zotero.Container.updateObjectsFromWriteResponse', 3);\n\tlog.debug('statusCode: ' + response.status, 3);\n\tvar data = response.data;\n\tif(response.status == 200){\n\t\tlog.debug('newLastModifiedVersion: ' + response.lastModifiedVersion, 3);\n\t\t//make sure writes were actually successful and\n\t\t//update the itemKey for the parent\n\t\tif(data.hasOwnProperty('success')){\n\t\t\t//update each successfully written item, possibly with new itemKeys\n\t\t\tObject.keys(data.success).forEach(function(ind){\n\t\t\t\tvar i = parseInt(ind, 10);\n\t\t\t\tvar key = data.success[ind];\n\t\t\t\tvar object = objectsArray[i];\n\t\t\t\t//throw error if objectKey mismatch\n\t\t\t\tif(object.key !== '' && object.key !== key){\n\t\t\t\t\tthrow new Error('object key mismatch in multi-write response');\n\t\t\t\t}\n\t\t\t\tif(object.key === ''){\n\t\t\t\t\tobject.updateObjectKey(key);\n\t\t\t\t}\n\t\t\t\tobject.set('version', response.lastModifiedVersion);\n\t\t\t\tobject.synced = true;\n\t\t\t\tobject.writeFailure = false;\n\t\t\t});\n\t\t}\n\t\tif(data.hasOwnProperty('failed')){\n\t\t\tlog.debug('updating objects with failed writes', 3);\n\t\t\tObject.keys(data.failed).forEach(function(ind){\n\t\t\t\tvar failure = data.failed[ind];\n\t\t\t\tlog.error('failed write ' + ind + ' - ' + failure);\n\t\t\t\tvar i = parseInt(ind, 10);\n\t\t\t\tvar object = objectsArray[i];\n\t\t\t\tobject.writeFailure = failure;\n\t\t\t});\n\t\t}\n\t}\n\telse if(response.status == 204){\n\t\t//single item put response, this probably should never go to this function\n\t\tobjectsArray[0].synced = true;\n\t}\n};\n\n//return the key as a string when passed an argument that \n//could be either a string key or an object with a key property\nmodule.exports.prototype.extractKey = function(object){\n\tif(typeof object == 'string'){\n\t\treturn object;\n\t}\n\treturn object.get('key');\n};\n","'use strict';\n\nvar log = require('./Log.js').Logger('libZotero:Deleted');\n\nmodule.exports = function(data){\n\tthis.instance = 'Zotero.Deleted';\n\tif(typeof data === 'string'){\n\t\tthis.deletedData = JSON.parse(data);\n\t}\n\telse {\n\t\tthis.deletedData = data;\n\t}\n\tthis.untilVersion = null;\n\tthis.sinceVersion = null;\n\tthis.waitingPromises = [];\n\tthis.pending = false;\n};\n\n//create, save referece, and return a Promise that will be resolved\n//the next time we finish a deleted request\nmodule.exports.prototype.addWaiter = function(){\n\t\n};\n","'use strict';\n\nvar log = require('./Log.js').Logger('libZotero:File');\n\nvar SparkMD5 = require('spark-md5');\n\n\nmodule.exports = {};\n\nmodule.exports.getFileInfo = function(file){\n\t//fileInfo: md5, filename, filesize, mtime, zip, contentType, charset\n\tif(typeof FileReader === 'undefined'){\n\t\treturn Promise.reject(new Error('FileReader not supported'));\n\t}\n\t\n\treturn new Promise(function(resolve, reject){\n\t\tvar fileInfo = {};\n\t\tvar reader = new FileReader();\n\t\treader.onload = function(e){\n\t\t\tlog.debug('Zotero.file.getFileInfo onloadFunc', 3);\n\t\t\tvar result = e.target.result;\n\t\t\tlog.debug(result, 3);\n\t\t\tfileInfo.md5 = SparkMD5.ArrayBuffer.hash(result);\n\t\t\tfileInfo.filename = file.name;\n\t\t\tfileInfo.filesize = file.size;\n\t\t\tfileInfo.mtime = Date.now();\n\t\t\tfileInfo.contentType = file.type;\n\t\t\t//fileInfo.reader = reader;\n\t\t\tfileInfo.filedata = result;\n\t\t\tresolve(fileInfo);\n\t\t};\n\t\t\n\t\treader.readAsArrayBuffer(file);\n\t});\n};\n\nmodule.exports.uploadFile = function(uploadInfo, fileInfo){\n\tlog.debug('Zotero.file.uploadFile', 3);\n\tlog.debug(uploadInfo, 4);\n\t\n\tvar formData = new FormData();\n\tObject.keys(uploadInfo.params).forEach(function(key){\n\t\tvar val = uploadInfo.params[key];\n\t\tformData.append(key, val);\n\t});\n\t\n\tvar blobData = new Blob([fileInfo.filedata], {type : fileInfo.contentType});\n\tformData.append('file', blobData);\n\t\n\tvar xhr = new XMLHttpRequest();\n\t\n\txhr.open('POST', uploadInfo.url, true);\n\t\n\treturn new Promise(function(resolve, reject){\n\t\txhr.onload = function(evt){\n\t\t\tlog.debug('uploadFile onload event', 3);\n\t\t\tif(this.status == 201){\n\t\t\t\tlog.debug('successful upload - 201', 3);\n\t\t\t\tresolve();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlog.error('uploadFile failed - ' + xhr.status);\n\t\t\t\treject({\n\t\t\t\t\t'message': 'Failure uploading file.',\n\t\t\t\t\t'code': xhr.status,\n\t\t\t\t\t'serverMessage': xhr.responseText\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t\t\n\t\txhr.onprogress = function(evt){\n\t\t\tlog.debug('progress event');\n\t\t\tlog.debug(evt);\n\t\t};\n\t\txhr.send(formData);\n\t});\n\t\n\t//If CORS is not enabled on s3 this XHR will not have the normal status\n\t//information, but will still fire readyStateChanges so you can tell\n\t//when the upload has finished (even if you can't tell if it was successful\n\t//from JS)\n};\n\n","'use strict';\n\nvar log = require('./Log.js').Logger('libZotero:Group');\n\nmodule.exports = function (groupObj) {\n\tvar group = this;\n\tgroup.instance = 'Zotero.Group';\n\tif(groupObj){\n\t\tthis.parseJsonGroup(groupObj);\n\t}\n};\n\nmodule.exports.prototype = new Zotero.ApiObject();\n\nmodule.exports.prototype.parseJsonGroup = function(groupObj) {\n\tvar group = this;\n\tgroup.apiObj = groupObj;\n};\n\nmodule.exports.prototype.get = function(key) {\n\tvar group = this;\n\tswitch(key) {\n\t\tcase 'title':\n\t\tcase 'name':\n\t\t\treturn group.apiObj.data.name;\n\t\tcase 'members':\n\t\t\tif(!group.apiObj.data.members){\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\treturn group.apiObj.data.members;\n\t\tcase 'admins':\n\t\t\tif(!group.apiObj.data.admins){\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\treturn group.apiObj.data.admins;\n\t}\n\t\n\tif(key in group.apiObj){\n\t\treturn group.apiObj[key];\n\t}\n\tif(key in group.apiObj.data){\n\t\treturn group.apiObj.data[key];\n\t}\n\tif(key in group.apiObj.meta){\n\t\treturn group.apiObj.meta[key];\n\t}\n\tif(group.hasOwnProperty(key)){\n\t\treturn group[key];\n\t}\n\t\n\treturn null;\n};\n\nmodule.exports.prototype.isWritable = function(userID){\n\tvar group = this;\n\tlog.debug(group);\n\tlet admins = group.apiObj.data.admins;\n\tif(!admins){\n\t\tadmins = [];\n\t}\n\n\tswitch(true){\n\t\tcase group.get('owner') == userID:\n\t\t\treturn true;\n\t\tcase (admins.indexOf(userID) != -1):\n\t\t\treturn true;\n\t\tcase ((group.apiObj.data.libraryEditing == 'members') &&\n\t\t\t(group.apiObj.data.members) &&\n\t\t\t(group.apiObj.data.members.indexOf(userID) != -1)):\n\t\t\treturn true;\n\t\tdefault:\n\t\t\treturn false;\n\t}\n};\n\nmodule.exports.prototype.typeMap = {\n\t'Private': 'Private',\n\t'PublicOpen': 'Public, Open Membership',\n\t'PublicClosed': 'Public, Closed Membership'\n};\n\nmodule.exports.prototype.accessMap = {\n\t'all'     : {\n\t\t'members' : 'Anyone can view, only members can edit',\n\t\t'admins'  : 'Anyone can view, only admins can edit'\n\t},\n\t'members' : {\n\t\t'members' : 'Only members can view and edit',\n\t\t'admins'  : 'Only members can view, only admins can edit'\n\t},\n\t'admins'  : {\n\t\t'members' : 'Only admins can view, only members can edit',\n\t\t'admins'  : 'Only admins can view and edit'\n\t}\n};\n\n","'use strict';\n\nvar log = require('./Log.js').Logger('libZotero:Groups');\n\nmodule.exports = function(){\n\tthis.instance = 'Zotero.Groups';\n\tthis.groupsArray = [];\n};\n/*\n module.exports.prototype.fetchGroup = function(groupID, apikey){\n\t//TODO: implement\n};\n*/\nmodule.exports.prototype.addGroupsFromJson = function(jsonBody){\n\tvar groups = this;\n\tvar groupsAdded = [];\n\tjsonBody.forEach(function(groupObj){\n\t\tlog.debug(groupObj, 3);\n\t\tvar group = new Zotero.Group(groupObj);\n\t\tgroups.groupsArray.push(group);\n\t\tgroupsAdded.push(group);\n\t});\n\treturn groupsAdded;\n};\n\nmodule.exports.prototype.fetchUserGroups = function(userID, apikey){\n\tvar groups = this;\n\tvar aparams = {\n\t\t'target':'userGroups',\n\t\t'libraryType':'user',\n\t\t'libraryID': userID,\n\t\t'order':'title'\n\t};\n\t\n\tif(apikey){\n\t\taparams['key'] = apikey;\n\t}\n\telse if(groups.owningLibrary) {\n\t\taparams['key'] = groups.owningLibrary._apiKey;\n\t}\n\t\n\treturn Zotero.ajaxRequest(aparams)\n\t.then(function(response){\n\t\tlog.debug('fetchUserGroups proxied callback', 3);\n\t\tvar fetchedGroups = groups.addGroupsFromJson(response.data);\n\t\tresponse.fetchedGroups = fetchedGroups;\n\t\treturn response;\n\t});\n};\n\n","'use strict';\n\nvar log = require('./Log.js').Logger('libZotero:Idb');\n\nmodule.exports = {};\n\n//Initialize an indexedDB for the specified library user or group + id\n//returns a promise that is resolved with a Zotero.Idb.Library instance when successful\n//and rejected onerror\nmodule.exports.Library = function(libraryString){\n\tlog.debug('Zotero.Idb.Library', 3);\n\tlog.debug('Initializing Zotero IDB', 3);\n\tthis.libraryString = libraryString;\n\tthis.owningLibrary = null;\n\tthis.initialized = false;\n};\n\nmodule.exports.Library.prototype.init = function(){\n\tvar idbLibrary = this;\n\treturn new Promise(function(resolve, reject){\n\t\t//Don't bother with the prefixed names because they should all be irrelevant by now\n\t\tvar indexedDB = window.indexedDB;\n\t\tidbLibrary.indexedDB = indexedDB;\n\t\t\n\t\t// Now we can open our database\n\t\tlog.debug('requesting indexedDb from browser', 3);\n\t\tvar request = indexedDB.open('Zotero_' + idbLibrary.libraryString, 4);\n\t\trequest.onerror = function(e){\n\t\t\tlog.error('ERROR OPENING INDEXED DB');\n\t\t\treject();\n\t\t};\n\t\t\n\t\tvar upgradeCallback = function(event){\n\t\t\tlog.debug('Zotero.Idb onupgradeneeded or onsuccess', 3);\n\t\t\tvar oldVersion = event.oldVersion;\n\t\t\tlog.debug('oldVersion: ' + event.oldVersion, 3);\n\t\t\tvar db = event.target.result;\n\t\t\tidbLibrary.db = db;\n\t\t\t\n\t\t\tif(oldVersion < 4){\n\t\t\t\t//delete old versions of object stores\n\t\t\t\tlog.debug('Existing object store names:', 3);\n\t\t\t\tlog.debug(JSON.stringify(db.objectStoreNames), 3);\n\t\t\t\tlog.debug('Deleting old object stores', 3);\n\t\t\t\tif(db.objectStoreNames['items']){\n\t\t\t\t\tdb.deleteObjectStore('items');\n\t\t\t\t}\n\t\t\t\tif(db.objectStoreNames['tags']){\n\t\t\t\t\tdb.deleteObjectStore('tags');\n\t\t\t\t}\n\t\t\t\tif(db.objectStoreNames['collections']){\n\t\t\t\t\tdb.deleteObjectStore('collections');\n\t\t\t\t}\n\t\t\t\tif(db.objectStoreNames['files']){\n\t\t\t\t\tdb.deleteObjectStore('files');\n\t\t\t\t}\n\t\t\t\tif(db.objectStoreNames['versions']){\n\t\t\t\t\tdb.deleteObjectStore('versions');\n\t\t\t\t}\n\t\t\t\tlog.debug('Existing object store names:', 3);\n\t\t\t\tlog.debug(JSON.stringify(db.objectStoreNames), 3);\n\t\t\t\t\n\t\t\t\t// Create object stores to hold items, collections, and tags.\n\t\t\t\t// IDB keys are just the zotero object keys\n\t\t\t\tvar itemStore = db.createObjectStore('items', { keyPath: 'key' });\n\t\t\t\tvar collectionStore = db.createObjectStore('collections', { keyPath: 'key' });\n\t\t\t\tvar tagStore = db.createObjectStore('tags', { keyPath: 'tag' });\n\t\t\t\tvar fileStore = db.createObjectStore('files');\n\t\t\t\tvar versionStore = db.createObjectStore('versions');\n\t\t\t\t\n\t\t\t\tlog.debug('itemStore index names:', 3);\n\t\t\t\tlog.debug(JSON.stringify(itemStore.indexNames), 3);\n\t\t\t\tlog.debug('collectionStore index names:', 3);\n\t\t\t\tlog.debug(JSON.stringify(collectionStore.indexNames), 3);\n\t\t\t\tlog.debug('tagStore index names:', 3);\n\t\t\t\tlog.debug(JSON.stringify(tagStore.indexNames), 3);\n\t\t\t\t\n\t\t\t\t// Create index to search/sort items by each attribute\n\t\t\t\tObject.keys(Zotero.Item.prototype.fieldMap).forEach(function(key){\n\t\t\t\t\tlog.debug('Creating index on ' + key, 3);\n\t\t\t\t\titemStore.createIndex(key, 'data.' + key, { unique: false });\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t//itemKey index was created above with all other item fields\n\t\t\t\t//itemStore.createIndex(\"itemKey\", \"itemKey\", { unique: false });\n\t\t\t\t\n\t\t\t\t//create multiEntry indices on item collectionKeys and tags\n\t\t\t\titemStore.createIndex('collectionKeys', 'data.collections', {unique: false, multiEntry:true});\n\t\t\t\t//index on extra tagstrings array since tags are objects and we can't index them directly\n\t\t\t\titemStore.createIndex('itemTagStrings', '_supplement.tagstrings', {unique: false, multiEntry:true});\n\t\t\t\t//example filter for tag: Zotero.Idb.filterItems(\"itemTagStrings\", \"Unread\");\n\t\t\t\t//example filter collection: Zotero.Idb.filterItems(\"collectionKeys\", \"<collectionKey>\");\n\t\t\t\t\n\t\t\t\t//itemStore.createIndex(\"itemType\", \"itemType\", { unique: false });\n\t\t\t\titemStore.createIndex('parentItemKey', 'data.parentItem', { unique: false });\n\t\t\t\titemStore.createIndex('libraryKey', 'libraryKey', { unique: false });\n\t\t\t\titemStore.createIndex('deleted', 'data.deleted', { unique: false });\n\t\t\t\t\n\t\t\t\tcollectionStore.createIndex('name', 'data.name', { unique: false });\n\t\t\t\tcollectionStore.createIndex('key', 'key', { unique: false });\n\t\t\t\tcollectionStore.createIndex('parentCollection', 'data.parentCollection', { unique: false });\n\t\t\t\t//collectionStore.createIndex(\"libraryKey\", \"libraryKey\", { unique: false });\n\t\t\t\t\n\t\t\t\ttagStore.createIndex('tag', 'tag', { unique: false });\n\t\t\t\t//tagStore.createIndex(\"libraryKey\", \"libraryKey\", { unique: false });\n\t\t\t}\n\t\t};\n\t\t\n\t\trequest.onupgradeneeded = upgradeCallback;\n\t\t\n\t\trequest.onsuccess = function(){\n\t\t\tlog.debug('IDB success', 3);\n\t\t\tidbLibrary.db = request.result;\n\t\t\tidbLibrary.initialized = true;\n\t\t\tresolve(idbLibrary);\n\t\t};\n\t});\n};\n\nmodule.exports.Library.prototype.deleteDB = function(){\n\tvar idbLibrary = this;\n\tidbLibrary.db.close();\n\treturn new Promise(function(resolve, reject){\n\t\tvar deleteRequest = idbLibrary.indexedDB.deleteDatabase('Zotero_' + idbLibrary.libraryString);\n\t\tdeleteRequest.onerror = function(){\n\t\t\tlog.error('Error deleting indexedDB');\n\t\t\treject();\n\t\t};\n\t\tdeleteRequest.onsuccess = function(){\n\t\t\tlog.debug('Successfully deleted indexedDB', 2);\n\t\t\tresolve();\n\t\t};\n\t});\n};\n\n/**\n* @param {string} store_name\n* @param {string} mode either \"readonly\" or \"readwrite\"\n*/\nmodule.exports.Library.prototype.getObjectStore = function (store_name, mode) {\n\tvar idbLibrary = this;\n\tvar tx = idbLibrary.db.transaction(store_name, mode);\n\treturn tx.objectStore(store_name);\n};\n\nmodule.exports.Library.prototype.clearObjectStore = function (store_name) {\n\tvar idbLibrary = this;\n\tvar store = idbLibrary.getObjectStore(store_name, 'readwrite');\n\treturn new Promise(function(resolve, reject){\n\t\tvar req = store.clear();\n\t\treq.onsuccess = function(evt) {\n\t\t\tlog.debug('Store cleared', 3);\n\t\t\tresolve();\n\t\t};\n\t\treq.onerror = function (evt) {\n\t\t\tlog.error('clearObjectStore:', evt.target.errorCode);\n\t\t\treject();\n\t\t};\n\t});\n};\n\n/**\n* Add array of items to indexedDB\n* @param {array} items\n*/\nmodule.exports.Library.prototype.addItems = function(items){\n\treturn this.addObjects(items, 'item');\n};\n\n/**\n* Update/add array of items to indexedDB\n* @param {array} items\n*/\nmodule.exports.Library.prototype.updateItems = function(items){\n\treturn this.updateObjects(items, 'item');\n};\n\n/**\n* Remove array of items to indexedDB. Just references itemKey and does no other checks that items match\n* @param {array} items\n*/\nmodule.exports.Library.prototype.removeItems = function(items){\n\treturn this.removeObjects(items, 'item');\n};\n\n/**\n* Get item from indexedDB that has given itemKey\n* @param {string} itemKey\n*/\nmodule.exports.Library.prototype.getItem = function(itemKey){\n\tvar idbLibrary = this;\n\treturn new Promise(function(resolve, reject){\n\t\tvar success = function(event){\n\t\t\tresolve(event.target.result);\n\t\t};\n\t\tidbLibrary.db.transaction('items').objectStore(['items'], 'readonly').get(itemKey).onsuccess = success;\n\t});\n};\n\n/**\n* Get all the items in this indexedDB\n* @param {array} items\n*/\nmodule.exports.Library.prototype.getAllItems = function(){\n\treturn this.getAllObjects('item');\n};\n\nmodule.exports.Library.prototype.getOrderedItemKeys = function(field, order){\n\tvar idbLibrary = this;\n\tlog.debug('Zotero.Idb.getOrderedItemKeys', 3);\n\tlog.debug('' + field + ' ' + order, 3);\n\treturn new Promise(function(resolve, reject){\n\t\tvar objectStore = idbLibrary.db.transaction(['items'], 'readonly').objectStore('items');\n\t\tvar index = objectStore.index(field);\n\t\tif(!index){\n\t\t\tthrow new Error(\"Index for requested field '\" + field + \"'' not found\");\n\t\t}\n\t\t\n\t\tvar cursorDirection = 'next';\n\t\tif(order == 'desc'){\n\t\t\tcursorDirection = 'prev';\n\t\t}\n\t\t\n\t\tvar cursorRequest = index.openKeyCursor(null, cursorDirection);\n\t\tvar itemKeys = [];\n\t\tcursorRequest.onsuccess = function(event) {\n\t\t\tvar cursor = event.target.result;\n\t\t\tif (cursor) {\n\t\t\t\titemKeys.push(cursor.primaryKey);\n\t\t\t\tcursor.continue();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlog.debug('No more cursor: done. Resolving deferred.', 3);\n\t\t\t\tresolve(itemKeys);\n\t\t\t}\n\t\t}.bind(this);\n\t\t\n\t\tcursorRequest.onfailure = function(event){\n\t\t\treject();\n\t\t}.bind(this);\n\t});\n};\n\n//filter the items in indexedDB by value in field\nmodule.exports.Library.prototype.filterItems = function(field, value){\n\tvar idbLibrary = this;\n\tlog.debug('Zotero.Idb.filterItems ' + field + ' - ' + value, 3);\n\treturn new Promise(function(resolve, reject){\n\t\tvar itemKeys = [];\n\t\tvar objectStore = idbLibrary.db.transaction(['items'], 'readonly').objectStore('items');\n\t\tvar index = objectStore.index(field);\n\t\tif(!index){\n\t\t\tthrow new Error(\"Index for requested field '\" + field + \"'' not found\");\n\t\t}\n\t\t\n\t\tvar cursorDirection = 'next';\n\t\t/*if(order == \"desc\"){\n\t\t\tcursorDirection = \"prev\";\n\t\t}*/\n\t\t\n\t\tvar range = IDBKeyRange.only(value);\n\t\tvar cursorRequest = index.openKeyCursor(range, cursorDirection);\n\t\tcursorRequest.onsuccess = function(event) {\n\t\t\tvar cursor = event.target.result;\n\t\t\tif (cursor) {\n\t\t\t\titemKeys.push(cursor.primaryKey);\n\t\t\t\tcursor.continue();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlog.debug('No more cursor: done. Resolving deferred.', 3);\n\t\t\t\tresolve(itemKeys);\n\t\t\t}\n\t\t}.bind(this);\n\t\t\n\t\tcursorRequest.onfailure = function(event){\n\t\t\treject();\n\t\t}.bind(this);\n\t});\n};\n\nmodule.exports.Library.prototype.inferType = function(object){\n\tif(!object){\n\t\treturn false;\n\t}\n\tif(!object.instance){\n\t\treturn false;\n\t}\n\tswitch(object.instance){\n\t\tcase 'Zotero.Item':\n\t\t\treturn 'item';\n\t\tcase 'Zotero.Collection':\n\t\t\treturn 'collection';\n\t\tcase 'Zotero.Tag':\n\t\t\treturn 'tag';\n\t\tdefault:\n\t\t\treturn false;\n\t}\n};\n\nmodule.exports.Library.prototype.getTransactionAndStore = function(type, access){\n\tvar idbLibrary = this;\n\tvar transaction;\n\tvar objectStore;\n\tswitch(type){\n\t\tcase 'item':\n\t\t\ttransaction = idbLibrary.db.transaction(['items'], access);\n\t\t\tobjectStore = transaction.objectStore('items');\n\t\t\tbreak;\n\t\tcase 'collection':\n\t\t\ttransaction = idbLibrary.db.transaction(['collections'], access);\n\t\t\tobjectStore = transaction.objectStore('collections');\n\t\t\tbreak;\n\t\tcase 'tag':\n\t\t\ttransaction = idbLibrary.db.transaction(['tags'], access);\n\t\t\tobjectStore = transaction.objectStore('tags');\n\t\t\tbreak;\n\t\tdefault:\n\t\t\treturn Promise.reject();\n\t}\n\treturn [transaction, objectStore];\n};\n\nmodule.exports.Library.prototype.addObjects = function(objects, type){\n\tlog.debug('Zotero.Idb.Library.addObjects', 3);\n\tvar idbLibrary = this;\n\tif(!type){\n\t\ttype = idbLibrary.inferType(objects[0]);\n\t}\n\tvar TS = idbLibrary.getTransactionAndStore(type, 'readwrite');\n\tvar transaction = TS[0];\n\tvar objectStore = TS[1];\n\t\n\treturn new Promise(function(resolve, reject){\n\t\ttransaction.oncomplete = function(event){\n\t\t\tlog.debug('Add Objects transaction completed.', 3);\n\t\t\tresolve();\n\t\t};\n\t\t\n\t\ttransaction.onerror = function(event){\n\t\t\tlog.error('Add Objects transaction failed.');\n\t\t\treject();\n\t\t};\n\t\t\n\t\tvar reqSuccess = function(event){\n\t\t\tlog.debug('Added Object ' + event.target.result, 4);\n\t\t};\n\t\tfor (var i in objects) {\n\t\t\tvar request = objectStore.add(objects[i].apiObj);\n\t\t\trequest.onsuccess = reqSuccess;\n\t\t}\n\t});\n};\n\nmodule.exports.Library.prototype.updateObjects = function(objects, type){\n\tlog.debug('Zotero.Idb.Library.updateObjects', 3);\n\tvar idbLibrary = this;\n\tif(!type){\n\t\ttype = idbLibrary.inferType(objects[0]);\n\t}\n\tvar TS = idbLibrary.getTransactionAndStore(type, 'readwrite');\n\tvar transaction = TS[0];\n\tvar objectStore = TS[1];\n\t\n\treturn new Promise(function(resolve, reject){\n\t\ttransaction.oncomplete = function(event){\n\t\t\tlog.debug('Update Objects transaction completed.', 3);\n\t\t\tresolve();\n\t\t};\n\t\t\n\t\ttransaction.onerror = function(event){\n\t\t\tlog.error('Update Objects transaction failed.');\n\t\t\treject();\n\t\t};\n\t\t\n\t\tvar reqSuccess = function(event){\n\t\t\tlog.debug('Updated Object ' + event.target.result, 4);\n\t\t};\n\t\tfor (var i in objects) {\n\t\t\tvar request = objectStore.put(objects[i].apiObj);\n\t\t\trequest.onsuccess = reqSuccess;\n\t\t}\n\t});\n};\n\nmodule.exports.Library.prototype.removeObjects = function(objects, type){\n\tvar idbLibrary = this;\n\tif(!type){\n\t\ttype = idbLibrary.inferType(objects[0]);\n\t}\n\tvar TS = idbLibrary.getTransactionAndStore(type, 'readwrite');\n\tvar transaction = TS[0];\n\tvar objectStore = TS[1];\n\t\n\treturn new Promise(function(resolve, reject){\n\t\ttransaction.oncomplete = function(event){\n\t\t\tlog.debug('Remove Objects transaction completed.', 3);\n\t\t\tresolve();\n\t\t};\n\t\t\n\t\ttransaction.onerror = function(event){\n\t\t\tlog.error('Remove Objects transaction failed.');\n\t\t\treject();\n\t\t};\n\t\t\n\t\tvar reqSuccess = function(event){\n\t\t\tlog.debug('Removed Object ' + event.target.result, 4);\n\t\t};\n\t\tfor (var i in objects) {\n\t\t\tvar request = objectStore.delete(objects[i].key);\n\t\t\trequest.onsuccess = reqSuccess;\n\t\t}\n\t});\n};\n\nmodule.exports.Library.prototype.getAllObjects = function(type){\n\tvar idbLibrary = this;\n\treturn new Promise(function(resolve, reject){\n\t\tvar objects = [];\n\t\tvar objectStore = idbLibrary.db.transaction(type + 's').objectStore(type + 's');\n\t\t\n\t\tobjectStore.openCursor().onsuccess = function(event) {\n\t\t\tvar cursor = event.target.result;\n\t\t\tif (cursor) {\n\t\t\t\tobjects.push(cursor.value);\n\t\t\t\tcursor.continue();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tresolve(objects);\n\t\t\t}\n\t\t};\n\t});\n};\n\nmodule.exports.Library.prototype.addCollections = function(collections){\n\treturn this.addObjects(collections, 'collection');\n};\n\nmodule.exports.Library.prototype.updateCollections = function(collections){\n\tlog.debug('Zotero.Idb.Library.updateCollections', 3);\n\treturn this.updateObjects(collections, 'collection');\n};\n\n/**\n* Get collection from indexedDB that has given collectionKey\n* @param {string} collectionKey\n*/\nmodule.exports.Library.prototype.getCollection = function(collectionKey){\n\tvar idbLibrary = this;\n\treturn new Promise(function(resolve, reject){\n\t\tvar success = function(event){\n\t\t\tresolve(event.target.result);\n\t\t};\n\t\tidbLibrary.db.transaction('collections').objectStore(['collections'], 'readonly').get(collectionKey).onsuccess = success;\n\t});\n};\n\nmodule.exports.Library.prototype.removeCollections = function(collections){\n\tlog.debug('Zotero.Idb.Library.removeCollections', 3);\n\treturn this.removeObjects(collections, 'collection');\n};\n\nmodule.exports.Library.prototype.getAllCollections = function(){\n\tlog.debug('Zotero.Idb.Library.getAllCollections', 3);\n\treturn this.getAllObjects('collection');\n};\n\nmodule.exports.Library.prototype.addTags = function(tags){\n\treturn this.addObjects(tags, 'tag');\n};\n\nmodule.exports.Library.prototype.updateTags = function(tags){\n\tlog.debug('Zotero.Idb.Library.updateTags', 3);\n\treturn this.updateObjects(tags, 'tag');\n};\n\nmodule.exports.Library.prototype.getAllTags = function(){\n\tlog.debug('getAllTags', 3);\n\treturn this.getAllObjects('tag');\n};\n\nmodule.exports.Library.prototype.setVersion = function(type, version){\n\tlog.debug('Zotero.Idb.Library.setVersion', 3);\n\tvar idbLibrary = this;\n\treturn new Promise(function(resolve, reject){\n\t\tvar transaction = idbLibrary.db.transaction(['versions'], 'readwrite');\n\t\t\n\t\ttransaction.oncomplete = function(event){\n\t\t\tlog.debug('set version transaction completed.', 3);\n\t\t\tresolve();\n\t\t};\n\t\t\n\t\ttransaction.onerror = function(event){\n\t\t\tlog.error('set version transaction failed.');\n\t\t\treject();\n\t\t};\n\t\t\n\t\tvar versionStore = transaction.objectStore('versions');\n\t\tvar reqSuccess = function(event){\n\t\t\tlog.debug('Set Version' + event.target.result, 3);\n\t\t};\n\t\tvar request = versionStore.put(version, type);\n\t\trequest.onsuccess = reqSuccess;\n\t});\n};\n\n/**\n* Get version data from indexedDB\n* @param {string} type\n*/\nmodule.exports.Library.prototype.getVersion = function(type){\n\tlog.debug('Zotero.Idb.Library.getVersion', 3);\n\tvar idbLibrary = this;\n\treturn new Promise(function(resolve, reject){\n\t\tvar success = function(event){\n\t\t\tlog.debug('done getting version');\n\t\t\tresolve(event.target.result);\n\t\t};\n\t\tidbLibrary.db.transaction(['versions'], 'readonly').objectStore('versions').get(type).onsuccess = success;\n\t});\n};\n\nmodule.exports.Library.prototype.setFile = function(itemKey, fileData){\n\tlog.debug('Zotero.Idb.Library.setFile', 3);\n\tvar idbLibrary = this;\n\treturn new Promise(function(resolve, reject){\n\t\tvar transaction = idbLibrary.db.transaction(['files'], 'readwrite');\n\t\t\n\t\ttransaction.oncomplete = function(event){\n\t\t\tlog.debug('set file transaction completed.', 3);\n\t\t\tresolve();\n\t\t};\n\t\t\n\t\ttransaction.onerror = function(event){\n\t\t\tlog.error('set file transaction failed.');\n\t\t\treject();\n\t\t};\n\t\t\n\t\tvar fileStore = transaction.objectStore('files');\n\t\tvar reqSuccess = function(event){\n\t\t\tlog.debug('Set File' + event.target.result, 3);\n\t\t};\n\t\tvar request = fileStore.put(fileData, itemKey);\n\t\trequest.onsuccess = reqSuccess;\n\t});\n};\n\n/**\n* Get item from indexedDB that has given itemKey\n* @param {string} itemKey\n*/\nmodule.exports.Library.prototype.getFile = function(itemKey){\n\tlog.debug('Zotero.Idb.Library.getFile', 3);\n\tvar idbLibrary = this;\n\treturn new Promise(function(resolve, reject){\n\t\tvar success = function(event){\n\t\t\tlog.debug('done getting file');\n\t\t\tresolve(event.target.result);\n\t\t};\n\t\tidbLibrary.db.transaction(['files'], 'readonly').objectStore('files').get(itemKey).onsuccess = success;\n\t});\n};\n\nmodule.exports.Library.prototype.deleteFile = function(itemKey){\n\tlog.debug('Zotero.Idb.Library.deleteFile', 3);\n\tvar idbLibrary = this;\n\treturn new Promise(function(resolve, reject){\n\t\tvar transaction = idbLibrary.db.transaction(['files'], 'readwrite');\n\t\t\n\t\ttransaction.oncomplete = function(event){\n\t\t\tlog.debug('delete file transaction completed.', 3);\n\t\t\tresolve();\n\t\t};\n\t\t\n\t\ttransaction.onerror = function(event){\n\t\t\tlog.error('delete file transaction failed.');\n\t\t\treject();\n\t\t};\n\t\t\n\t\tvar fileStore = transaction.objectStore('files');\n\t\tvar reqSuccess = function(event){\n\t\t\tlog.debug('Deleted File' + event.target.result, 4);\n\t\t};\n\t\tvar request = fileStore.delete(itemKey);\n\t\trequest.onsuccess = reqSuccess;\n\t});\n};\n\n\n//intersect two arrays of strings as an AND condition on index results\nmodule.exports.Library.prototype.intersect = function(ar1, ar2){\n\tvar idbLibrary = this;\n\tvar result = [];\n\tfor(var i = 0; i < ar1.length; i++){\n\t\tif(ar2.indexOf(ar1[i]) !== -1){\n\t\t\tresult.push(ar1[i]);\n\t\t}\n\t}\n\treturn result;\n};\n\n//intersect an array of arrays of strings as an AND condition on index results\nmodule.exports.Library.prototype.intersectAll = function(arrs) {\n\tvar idbLibrary = this;\n\tvar result = arrs[0];\n\tfor(var i = 0; i < arrs.length - 1; i++){\n\t\tresult = idbLibrary.intersect(result, arrs[i+1]);\n\t}\n\treturn result;\n};\n","'use strict';\n\nvar log = require('./Log.js').Logger('libZotero:Item');\n\nvar striptags = require('striptags');\nvar ItemMaps = require('./ItemMaps.js');\n\n/*\n * TODO: several functions should not work unless we build a fresh item with a template\n * or parsed an item from the api with json content (things that depend on apiObj)\n * There should be a flag to note whether this is the case and throwing on attempts to\n * use these functions when it is not.\n */\nvar Item = function(itemObj){\n\tthis.instance = 'Zotero.Item';\n\tthis.version = 0;\n\tthis.key = '';\n\tthis.synced = false;\n\tthis.apiObj = {};\n\tthis.pristineData = null;\n\tthis.childItemKeys = [];\n\tthis.writeErrors = [];\n\tthis.notes = [];\n\tif(itemObj){\n\t\tthis.parseJsonItem(itemObj);\n\t} else {\n\t\tthis.parseJsonItem(this.emptyJsonItem());\n\t}\n\tthis.initSecondaryData();\n};\n\nItem.prototype = new Zotero.ApiObject();\n\nItem.prototype.parseJsonItem = function (apiObj) {\n\tvar item = this;\n\titem.version = apiObj.version;\n\titem.key = apiObj.key;\n\titem.apiObj = Z.extend({}, apiObj);\n\titem.pristineData = Z.extend({}, apiObj.data);\n\tif(!item.apiObj._supplement){\n\t\titem.apiObj._supplement = {};\n\t}\n};\n\nItem.prototype.emptyJsonItem = function(){\n\treturn {\n\t\tkey: '',\n\t\tversion: 0,\n\t\tlibrary:{},\n\t\tlinks:{},\n\t\tdata: {\n\t\t\tkey:'',\n\t\t\tversion:0,\n\t\t\ttitle:'',\n\t\t\tcreators:[],\n\t\t\tcollections:[],\n\t\t\ttags:[],\n\t\t\trelations:{}\n\t\t},\n\t\tmeta: {},\n\t\t_supplement: {}\n\t};\n};\n\n//populate property values derived from json content\nItem.prototype.initSecondaryData = function(){\n\tvar item = this;\n\t\n\titem.version = item.apiObj.version;\n\t\n\tif(item.apiObj.data.itemType == 'attachment'){\n\t\titem.mimeType = item.apiObj.data.contentType;\n\t\titem.translatedMimeType = Zotero.utils.translateMimeType(item.mimeType);\n\t}\n\tif('linkMode' in item.apiObj){\n\t\titem.linkMode = item.apiObj.data.linkMode;\n\t}\n\t\n\titem.attachmentDownloadUrl = Zotero.url.attachmentDownloadUrl(item);\n\t\n\tif(item.apiObj.meta.parsedDate){\n\t\titem.parsedDate = new Date(item.apiObj.meta.parsedDate);\n\t} else {\n\t\titem.parsedDate = false;\n\t}\n\t\n\titem.synced = false;\n\n\titem.updateTagStrings();\n};\n\nItem.prototype.updateTagStrings = function(){\n\tvar item = this;\n\tvar tagstrings = [];\n\tfor (var i = 0; i < item.apiObj.data.tags.length; i++) {\n\t\ttagstrings.push(item.apiObj.data.tags[i].tag);\n\t}\n\titem.apiObj._supplement.tagstrings = tagstrings;\n};\n\nItem.prototype.initEmpty = function(itemType, linkMode){\n\tvar item = this;\n\treturn item.getItemTemplate(itemType, linkMode)\n\t.then(function(template){\n\t\titem.initEmptyFromTemplate(template);\n\t\treturn item;\n\t});\n};\n\n//special case note initialization to guarentee synchronous and simplify some uses\nItem.prototype.initEmptyNote = function(){\n\tvar item = this;\n\titem.version = 0;\n\tvar noteTemplate = {'itemType':'note','note':'','tags':[],'collections':[],'relations':{}};\n\t\n\titem.initEmptyFromTemplate(noteTemplate);\n\t\n\treturn item;\n};\n\nItem.prototype.initEmptyFromTemplate = function(template){\n\tvar item = this;\n\titem.version = 0;\n\t\n\titem.key = '';\n\titem.pristineData = Z.extend({}, template);\n\titem.apiObj = {\n\t\tkey: '',\n\t\tversion: 0,\n\t\tlibrary: {},\n\t\tlinks: {},\n\t\tdata: template,\n\t\tmeta: {},\n\t\t_supplement: {}\n\t};\n\t\n\titem.initSecondaryData();\n\treturn item;\n};\n\nItem.prototype.isSupplementaryItem = function(){\n\tvar item = this;\n\tvar itemType = item.get('itemType');\n\tif(itemType == 'attachment' || itemType == 'note'){\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nItem.prototype.isSnapshot = function(){\n\tvar item = this;\n\tif(item.apiObj.links['enclosure']){\n\t\tvar ftype = item.apiObj.links['enclosure'].type;\n\t\tif(!item.apiObj.links['enclosure']['length'] && ftype == 'text/html'){\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nItem.prototype.updateObjectKey = function(objectKey){\n\treturn this.updateItemKey(objectKey);\n};\n\nItem.prototype.updateItemKey = function(itemKey){\n\tvar item = this;\n\titem.key = itemKey;\n\titem.apiObj.key = itemKey;\n\titem.apiObj.data.key = itemKey;\n\titem.pristineData.key = itemKey;\n\treturn item;\n};\n\n/*\n * Write updated information for the item to the api and potentiallyp\n * create new child notes (or attachments?) of this item\n */\nItem.prototype.writeItem = function(){\n\tvar item = this;\n\tif(!item.owningLibrary){\n\t\tthrow new Error('Item must be associated with a library');\n\t}\n\treturn item.owningLibrary.items.writeItems([item]);\n};\n\n//get the JS object to be PUT/POSTed for write\nItem.prototype.writeApiObj = function(){\n\tvar item = this;\n\t\n\t//remove any creators that have no names\n\tif(item.apiObj.data.creators){\n\t\tvar newCreatorsArray = item.apiObj.data.creators.filter(function(c){\n\t\t\tif(c.name || c.firstName || c.lastName){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\titem.apiObj.data.creators = newCreatorsArray;\n\t}\n\t\n\t//copy apiObj, extend with pristine to make sure required fields are present\n\t//and remove unwriteable fields(?)\n\tvar writeApiObj = Z.extend({}, item.pristineData, item.apiObj.data);\n\treturn writeApiObj;\n};\n\nItem.prototype.createChildNotes = function(notes){\n\tvar item = this;\n\tvar childItems = [];\n\tvar childItemPromises = [];\n\t\n\tnotes.forEach(function(note){\n\t\tvar childItem = new Item();\n\t\tvar p = childItem.initEmpty('note')\n\t\t.then(function(noteItem){\n\t\t\tnoteItem.set('note', note.note);\n\t\t\tnoteItem.set('parentItem', item.key);\n\t\t\tchildItems.push(noteItem);\n\t\t});\n\t\tchildItemPromises.push(p);\n\t});\n\t\n\treturn Promise.all(childItemPromises)\n\t.then(function(){\n\t\treturn item.owningLibrary.writeItems(childItems);\n\t});\n};\n\n//TODO: implement\nItem.prototype.writePatch = function(){\n\t\n};\n\nItem.prototype.getChildren = function(library){\n\tlog.debug('Zotero.Item.getChildren', 4);\n\tvar item = this;\n\treturn Promise.resolve()\n\t.then(function(){\n\t\t//short circuit if has item has no children\n\t\tif(!item.apiObj.meta.numChildren){\n\t\t\treturn [];\n\t\t}\n\t\t\n\t\tvar config = {\n\t\t\turl: {\n\t\t\t\t'target':'children',\n\t\t\t\t'libraryType':item.apiObj.library.type,\n\t\t\t\t'libraryID':item.apiObj.library.id,\n\t\t\t\t'itemKey':item.key\n\t\t\t}\n\t\t};\n\t\t\n\t\treturn Zotero.net.queueRequest(config)\n\t\t.then(function(response){\n\t\t\tlog.debug('getChildren proxied callback', 4);\n\t\t\tvar items = library.items;\n\t\t\tvar childItems = items.addItemsFromJson(response.data);\n\t\t\tfor (var i = childItems.length - 1; i >= 0; i--) {\n\t\t\t\tchildItems[i].associateWithLibrary(library);\n\t\t\t}\n\t\t\t\n\t\t\treturn childItems;\n\t\t});\n\t});\n};\n\nItem.prototype.getItemTypes = function (locale) {\n\tlog.debug('Zotero.Item.prototype.getItemTypes', 3);\n\tif(!locale){\n\t\tlocale = 'en-US';\n\t}\n\tlocale = 'en-US';\n\n\tvar itemTypes = Zotero.cache.load({locale:locale, target:'itemTypes'});\n\tif(itemTypes){\n\t\tlog.debug('have itemTypes in localStorage', 3);\n\t\tItem.prototype.itemTypes = itemTypes;//JSON.parse(Zotero.storage.localStorage['itemTypes']);\n\t\treturn;\n\t}\n\t\n\tvar query = Zotero.ajax.apiQueryString({locale:locale});\n\tvar url = Zotero.config.baseApiUrl + '/itemTypes' + query;\n\tZotero.net.ajax({\n\t\turl: Zotero.ajax.proxyWrapper(url, 'GET'),\n\t\ttype: 'GET'\n\t}).then(function(xhr){\n\t\tlog.debug('got itemTypes response', 3);\n\t\tlog.debug(xhr.response, 4);\n\t\tItem.prototype.itemTypes = JSON.parse(xhr.responseText);\n\t\tZotero.cache.save({locale:locale, target:'itemTypes'}, Item.prototype.itemTypes);\n\t});\n};\n\nItem.prototype.getItemFields = function (locale) {\n\tlog.debug('Zotero.Item.prototype.getItemFields', 3);\n\tif(!locale){\n\t\tlocale = 'en-US';\n\t}\n\tlocale = 'en-US';\n\t\n\tvar itemFields = Zotero.cache.load({locale:locale, target:'itemFields'});\n\tif(itemFields){\n\t\tlog.debug('have itemFields in localStorage', 3);\n\t\tItem.prototype.itemFields = itemFields;//JSON.parse(Zotero.storage.localStorage['itemFields']);\n\t\tObject.keys(Item.prototype.itemFields).forEach(function(key){\n\t\t\tvar val = Item.prototype.itemFields[key];\n\t\t\tZotero.localizations.fieldMap[val.field] = val.localized;\n\t\t});\n\t\treturn;\n\t}\n\t\n\tvar query = Zotero.ajax.apiQueryString({locale:locale});\n\tvar requestUrl = Zotero.config.baseApiUrl + '/itemFields' + query;\n\tZotero.net.ajax({\n\t\turl: Zotero.ajax.proxyWrapper(requestUrl),\n\t\ttype: 'GET'\n\t}).then(function(xhr){\n\t\tlog.debug('got itemTypes response', 4);\n\t\tvar data = JSON.parse(xhr.responseText);\n\t\tItem.prototype.itemFields = data;\n\t\tZotero.cache.save({locale:locale, target:'itemFields'}, data);\n\t\t//Zotero.storage.localStorage['itemFields'] = JSON.stringify(data);\n\t\tObject.keys(Item.prototype.itemFields).forEach(function(key){\n\t\t\tvar val = Item.prototype.itemFields[key];\n\t\t\tZotero.localizations.fieldMap[val.field] = val.localized;\n\t\t});\n\t});\n};\n\nItem.prototype.getItemTemplate = function (itemType='document', linkMode='') {\n\tlog.debug('Zotero.Item.prototype.getItemTemplate', 3);\n\tif(itemType == 'attachment' && linkMode == ''){\n\t\tthrow new Error('attachment template requested with no linkMode');\n\t}\n\t\n\tvar query = Zotero.ajax.apiQueryString({itemType:itemType, linkMode:linkMode});\n\tvar requestUrl = Zotero.config.baseApiUrl + '/items/new' + query;\n\t\n\tvar cacheConfig = {itemType:itemType, target:'itemTemplate'};\n\tvar itemTemplate = Zotero.cache.load(cacheConfig);\n\tif(itemTemplate){\n\t\tlog.debug('have itemTemplate in localStorage', 3);\n\t\tvar template = itemTemplate;// JSON.parse(Zotero.storage.localStorage[url]);\n\t\treturn Promise.resolve(template);\n\t}\n\t\n\treturn Zotero.ajaxRequest(requestUrl, 'GET', {dataType:'json'})\n\t.then(function(response){\n\t\tlog.debug('got itemTemplate response', 3);\n\t\tZotero.cache.save(cacheConfig, response.data);\n\t\treturn response.data;\n\t});\n};\n\nItem.prototype.getUploadAuthorization = function(fileinfo){\n\t//fileInfo: md5, filename, filesize, mtime, zip, contentType, charset\n\tlog.debug('Zotero.Item.getUploadAuthorization', 3);\n\tvar item = this;\n\t\n\tvar config = {\n\t\t'target':'item',\n\t\t'targetModifier':'file',\n\t\t'libraryType':item.owningLibrary.type,\n\t\t'libraryID':item.owningLibrary.libraryID,\n\t\t'itemKey':item.key\n\t};\n\tvar headers = {\n\t\t'Content-Type': 'application/x-www-form-urlencoded'\n\t};\n\tvar oldmd5 = item.get('md5');\n\tif(oldmd5){\n\t\theaders['If-Match'] = oldmd5;\n\t}\n\telse{\n\t\theaders['If-None-Match'] = '*';\n\t}\n\t\n\treturn Zotero.ajaxRequest(config, 'POST',\n\t\t{\n\t\t\tprocessData: true,\n\t\t\tdata:fileinfo,\n\t\t\theaders:headers\n\t\t}\n\t);\n};\n\nItem.prototype.registerUpload = function(uploadKey){\n\tlog.debug('Zotero.Item.registerUpload', 3);\n\tvar item = this;\n\tvar config = {\n\t\t'target':'item',\n\t\t'targetModifier':'file',\n\t\t'libraryType':item.owningLibrary.type,\n\t\t'libraryID':item.owningLibrary.libraryID,\n\t\t'itemKey':item.key\n\t};\n\tvar headers = {\n\t\t'Content-Type': 'application/x-www-form-urlencoded'\n\t};\n\tvar oldmd5 = item.get('md5');\n\tif(oldmd5){\n\t\theaders['If-Match'] = oldmd5;\n\t}\n\telse{\n\t\theaders['If-None-Match'] = '*';\n\t}\n\t\n\treturn Zotero.ajaxRequest(config, 'POST',\n\t{\n\t\tprocessData: true,\n\t\tdata:{upload: uploadKey},\n\t\theaders: headers\n\t});\n};\n\nItem.prototype.fullUpload = function(file){\n\n};\n\nItem.prototype.creatorTypes = {};\n\nItem.prototype.getCreatorTypes = function (itemType) {\n\tlog.debug('Zotero.Item.prototype.getCreatorTypes: ' + itemType, 3);\n\tif(!itemType){\n\t\titemType = 'document';\n\t}\n\t\n\t//parse stored creatorTypes object if it exists\n\t//creatorTypes maps itemType to the possible creatorTypes\n\tvar creatorTypes = Zotero.cache.load({target:'creatorTypes'});\n\tif(creatorTypes){\n\t\tlog.debug('have creatorTypes in localStorage', 3);\n\t\tItem.prototype.creatorTypes = creatorTypes;//JSON.parse(Zotero.storage.localStorage['creatorTypes']);\n\t}\n\t\n\tif(Item.prototype.creatorTypes[itemType]){\n\t\tlog.debug('creatorTypes of requested itemType available in localStorage', 3);\n\t\tlog.debug(Item.prototype.creatorTypes, 4);\n\t\treturn Promise.resolve(Item.prototype.creatorTypes[itemType]);\n\t}\n\telse{\n\t\tlog.debug('sending request for creatorTypes', 3);\n\t\tvar query = Zotero.ajax.apiQueryString({itemType:itemType});\n\t\t//TODO: this probably shouldn't be using baseApiUrl directly\n\t\tvar requestUrl = Zotero.config.baseApiUrl + '/itemTypeCreatorTypes' + query;\n\t\t\n\t\treturn Zotero.ajaxRequest(requestUrl, 'GET', {dataType:'json'})\n\t\t.then(function(response){\n\t\t\tlog.debug('got creatorTypes response', 4);\n\t\t\tItem.prototype.creatorTypes[itemType] = response.data;\n\t\t\t//Zotero.storage.localStorage['creatorTypes'] = JSON.stringify(Item.prototype.creatorTypes);\n\t\t\tZotero.cache.save({target:'creatorTypes'}, Item.prototype.creatorTypes);\n\t\t\treturn Item.prototype.creatorTypes[itemType];\n\t\t});\n\t}\n};\n\nItem.prototype.getCreatorFields = function (locale) {\n\tlog.debug('Zotero.Item.prototype.getCreatorFields', 3);\n\tvar creatorFields = Zotero.cache.load({target:'creatorFields'});\n\tif(creatorFields){\n\t\tlog.debug('have creatorFields in localStorage', 3);\n\t\tItem.prototype.creatorFields = creatorFields;// JSON.parse(Zotero.storage.localStorage['creatorFields']);\n\t\treturn Promise.resolve(creatorFields);\n\t}\n\t\n\tvar requestUrl = Zotero.config.baseApiUrl + '/creatorFields';\n\treturn Zotero.ajaxRequest(requestUrl, 'GET', {dataType:'json'})\n\t.then(function(response){\n\t\tlog.debug('got itemTypes response', 4);\n\t\tItem.prototype.creatorFields = response.data;\n\t\tZotero.cache.save({target:'creatorFields'}, response.data);\n\t});\n};\n\n//---Functions to manually add Zotero format data instead of fetching it from the API ---\n//To be used first with cached data for offline, could also maybe be used for custom types\nItem.prototype.addItemTypes = function(itemTypes, locale){\n\t\n};\n\nItem.prototype.addItemFields = function(itemType, itemFields){\n\t\n};\n\nItem.prototype.addCreatorTypes = function(itemType, creatorTypes){\n\t\n};\n\nItem.prototype.addCreatorFields = function(itemType, creatorFields){\n\t\n};\n\nItem.prototype.addItemTemplates = function(templates){\n\t\n};\n\nItem.prototype.itemTypeImageClass = function(){\n\t//linkModes: imported_file,imported_url,linked_file,linked_url\n\tvar item = this;\n\tif(item.apiObj.data.itemType == 'attachment'){\n\t\tswitch(item.apiObj.data.linkMode){\n\t\t\tcase 'imported_file':\n\t\t\t\tif(item.translatedMimeType == 'pdf'){\n\t\t\t\t\treturn item.itemTypeImageSrc['attachmentPdf'];\n\t\t\t\t}\n\t\t\t\treturn item.itemTypeImageSrc['attachmentFile'];\n\t\t\tcase 'imported_url':\n\t\t\t\tif(item.translatedMimeType == 'pdf'){\n\t\t\t\t\treturn item.itemTypeImageSrc['attachmentPdf'];\n\t\t\t\t}\n\t\t\t\treturn item.itemTypeImageSrc['attachmentSnapshot'];\n\t\t\tcase 'linked_file':\n\t\t\t\treturn item.itemTypeImageSrc['attachmentLink'];\n\t\t\tcase 'linked_url':\n\t\t\t\treturn item.itemTypeImageSrc['attachmentWeblink'];\n\t\t\tdefault:\n\t\t\t\treturn item.itemTypeImageSrc['attachment'];\n\t\t}\n\t}\n\telse {\n\t\treturn item.apiObj.data.itemType;\n\t}\n};\n\nItem.prototype.itemTypeIconClass = function(){\n\t//linkModes: imported_file,imported_url,linked_file,linked_url\n\tvar item = this;\n\tvar defaultIcon = 'fa fa-file-text-o';\n\tswitch(item.apiObj.data.itemType){\n\t\tcase 'attachment':\n\t\t\tswitch(item.apiObj.data.linkMode){\n\t\t\t\tcase 'imported_file':\n\t\t\t\t\tif(item.translatedMimeType == 'pdf'){\n\t\t\t\t\t\treturn 'fa fa-file-pdf-o';\n\t\t\t\t\t}\n\t\t\t\t\treturn 'glyphicons glyphicons-file';\n\t\t\t\tcase 'imported_url':\n\t\t\t\t\tif(item.translatedMimeType == 'pdf'){\n\t\t\t\t\t\treturn 'fa fa-file-pdf-o';\n\t\t\t\t\t}\n\t\t\t\t\treturn 'glyphicons glyphicons-file';\n\t\t\t\tcase 'linked_file':\n\t\t\t\t\treturn 'glyphicons glyphicons-link';\n\t\t\t\t\t//return item.itemTypeImageSrc['attachmentLink'];\n\t\t\t\tcase 'linked_url':\n\t\t\t\t\treturn 'glyphicons glyphicons-link';\n\t\t\t\t\t//return item.itemTypeImageSrc['attachmentWeblink'];\n\t\t\t\tdefault:\n\t\t\t\t\treturn 'glyphicons glyphicons-paperclip';\n\t\t\t\t\t//return item.itemTypeImageSrc['attachment'];\n\t\t\t}\n\t\t\treturn 'glyphicons file';\n\t\tcase 'artwork':\n\t\t\treturn 'glyphicons glyphicons-picture';\n\t\tcase 'audioRecording':\n\t\t\treturn 'glyphicons glyphicons-microphone';\n\t\tcase 'bill':\n\t\t\treturn defaultIcon;\n\t\tcase 'blogPost':\n\t\t\treturn 'glyphicons glyphicons-blog';\n\t\tcase 'book':\n\t\t\treturn 'glyphicons glyphicons-book';\n\t\tcase 'bookSection':\n\t\t\treturn 'glyphicons glyphicons-book-open';\n\t\tcase 'case':\n\t\t\treturn defaultIcon;\n\t\tcase 'computerProgram':\n\t\t\treturn 'glyphicons glyphicons-floppy-disk';\n\t\tcase 'conferencePaper':\n\t\t\treturn defaultIcon;\n\t\tcase 'dictionaryEntry':\n\t\t\treturn 'glyphicons glyphicons-translate';\n\t\tcase 'document':\n\t\t\treturn 'glyphicons glyphicons-file';\n\t\tcase 'email':\n\t\t\treturn 'glyphicons glyphicons-envelope';\n\t\tcase 'encyclopediaArticle':\n\t\t\treturn 'glyphicons glyphicons-bookmark';\n\t\tcase 'film':\n\t\t\treturn 'glyphicons glyphicons-film';\n\t\tcase 'forumPost':\n\t\t\treturn 'glyphicons glyphicons-bullhorn';\n\t\tcase 'hearing':\n\t\t\treturn 'fa fa-gavel';\n\t\tcase 'instantMessage':\n\t\t\treturn 'fa fa-comment-o';\n\t\tcase 'interview':\n\t\t\treturn 'fa fa-comments-o';\n\t\tcase 'journalArticle':\n\t\t\treturn 'fa fa-file-text-o';\n\t\tcase 'letter':\n\t\t\treturn 'glyphicons glyphicons-message-full';\n\t\tcase 'magazineArticle':\n\t\t\treturn defaultIcon;\n\t\tcase 'manuscript':\n\t\t\treturn 'glyphicons glyphicons-pen';\n\t\tcase 'map':\n\t\t\treturn 'glyphicons glyphicons-google-maps';\n\t\tcase 'newspaperArticle':\n\t\t\treturn 'fa fa-newspaper-o';\n\t\tcase 'note':\n\t\t\treturn 'glyphicons glyphicons-notes noteyellow';\n\t\tcase 'patent':\n\t\t\treturn 'glyphicons glyphicons-lightbulb';\n\t\tcase 'podcast':\n\t\t\treturn 'glyphicons glyphicons-ipod';\n\t\tcase 'presentation':\n\t\t\treturn 'glyphicons glyphicons-keynote';\n\t\tcase 'radioBroadcast':\n\t\t\treturn 'glyphicons glyphicons-wifi-alt';\n\t\tcase 'report':\n\t\t\treturn 'glyphicons glyphicons-notes-2';\n\t\tcase 'statue':\n\t\t\treturn 'glyphicons glyphicons-bank';\n\t\tcase 'thesis':\n\t\t\treturn 'fa fa-graduation-cap';\n\t\tcase 'tvBroadcast':\n\t\t\treturn 'glyphicons glyphicons-display';\n\t\tcase 'videoRecording':\n\t\t\treturn 'glyphicons glyphicons-facetime-video';\n\t\tcase 'webpage':\n\t\t\treturn 'glyphicons glyphicons-embed-close';\n\t\tdefault:\n\t\t\treturn 'glyphicons file';\n\t}\n};\n\nItem.prototype.get = function(key){\n\tvar item = this;\n\tswitch(key) {\n\t\tcase 'title':\n\t\t\tvar title = '';\n\t\t\tif(item.apiObj.data.itemType == 'note'){\n\t\t\t\treturn item.noteTitle(item.apiObj.data.note);\n\t\t\t} else {\n\t\t\t\treturn item.apiObj.data.title;\n\t\t\t}\n\t\t\tif(title === ''){\n\t\t\t\treturn '[Untitled]';\n\t\t\t}\n\t\t\treturn title;\n\t\tcase 'creatorSummary':\n\t\tcase 'creator':\n\t\t\tif(typeof item.apiObj.meta.creatorSummary !== 'undefined'){\n\t\t\t\treturn item.apiObj.meta.creatorSummary;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'year':\n\t\t\tif(item.parsedDate) {\n\t\t\t\treturn item.parsedDate.getFullYear();\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn '';\n\t\t\t}\n\t}\n\t\n\tif(key in item.apiObj.data){\n\t\treturn item.apiObj.data[key];\n\t}\n\telse if(key in item.apiObj.meta){\n\t\treturn item.apiObj.meta[key];\n\t}\n\telse if(item.hasOwnProperty(key)){\n\t\treturn item[key];\n\t}\n\t\n\treturn null;\n};\n\nItem.prototype.set = function(key, val){\n\tvar item = this;\n\tif(key in item.apiObj){\n\t\titem.apiObj[key] = val;\n\t}\n\tif(key in item.apiObj.data){\n\t\titem.apiObj.data[key] = val;\n\t}\n\tif(key in item.apiObj.meta){\n\t\titem.apiObj.meta[key] = val;\n\t}\n\t\n\tswitch (key) {\n\t\tcase 'itemKey':\n\t\tcase 'key':\n\t\t\titem.key = val;\n\t\t\titem.apiObj.data.key = val;\n\t\t\tbreak;\n\t\tcase 'itemVersion':\n\t\tcase 'version':\n\t\t\titem.version = val;\n\t\t\titem.apiObj.data.version = val;\n\t\t\tbreak;\n\t\tcase 'itemType':\n\t\t\titem.itemType = val;\n\t\t\t//TODO: translate api object to new item type\n\t\t\tbreak;\n\t\tcase 'linkMode':\n\t\t\tbreak;\n\t\tcase 'deleted':\n\t\t\titem.apiObj.data.deleted = val;\n\t\t\tbreak;\n\t\tcase 'parentItem':\n\t\t\tif( val === '' ){ val = false; }\n\t\t\titem.apiObj.data.parentItem = val;\n\t\t\tbreak;\n\t}\n\t\n//    item.synced = false;\n\treturn item;\n};\n\nItem.prototype.noteTitle = function(note){\n\tvar len = 120;\n\tvar notetext = striptags(note);\n\tvar firstNewline = notetext.indexOf('\\n');\n\tif((firstNewline != -1) && firstNewline < len){\n\t\treturn notetext.substr(0, firstNewline);\n\t}\n\telse {\n\t\treturn notetext.substr(0, len);\n\t}\n};\n\nItem.prototype.setParent = function(parentItemKey){\n\tvar item = this;\n\t//pull out itemKey string if we were passed an item object\n\tif(typeof parentItemKey != 'string' &&\n\t\tparentItemKey.hasOwnProperty('instance') &&\n\t\tparentItemKey.instance == 'Zotero.Item'){\n\t\tparentItemKey = parentItemKey.key;\n\t}\n\titem.set('parentItem', parentItemKey);\n\treturn item;\n};\n\nItem.prototype.addToCollection = function(collectionKey){\n\tvar item = this;\n\t//take out the collection key if we're passed a collection object instead\n\tif(typeof collectionKey != 'string'){\n\t\tif(collectionKey.instance == 'Zotero.Collection'){\n\t\t\tcollectionKey = collectionKey.key;\n\t\t}\n\t}\n\tif(item.apiObj.data.collections.indexOf(collectionKey) === -1){\n\t\titem.apiObj.data.collections.push(collectionKey);\n\t}\n\treturn;\n};\n\nItem.prototype.removeFromCollection = function(collectionKey){\n\tvar item = this;\n\t//take out the collection key if we're passed a collection object instead\n\tif(typeof collectionKey != 'string'){\n\t\tif(collectionKey.instance == 'Zotero.Collection'){\n\t\t\tcollectionKey = collectionKey.key;\n\t\t}\n\t}\n\tvar index = item.apiObj.data.collections.indexOf(collectionKey);\n\tif(index != -1){\n\t\titem.apiObj.data.collections.splice(index, 1);\n\t}\n\treturn;\n};\n\nItem.prototype.uploadChildAttachment = function(childItem, fileInfo, progressCallback){\n\t/*\n\t * write child item so that it exists\n\t * get upload authorization for actual file\n\t * perform full upload\n\t */\n\tvar item = this;\n\tlog.debug('uploadChildAttachment', 3);\n\tif(!item.owningLibrary){\n\t\treturn Promise.reject(new Error('Item must be associated with a library'));\n\t}\n\n\t//make sure childItem has parent set\n\tchildItem.set('parentItem', item.key);\n\tchildItem.associateWithLibrary(item.owningLibrary);\n\t\n\treturn childItem.writeItem()\n\t.then(function(response){\n\t\t//successful attachmentItemWrite\n\t\titem.numChildren++;\n\t\treturn childItem.uploadFile(fileInfo, progressCallback);\n\t}, function(response){\n\t\t//failure during attachmentItem write\n\t\tthrow {\n\t\t\t'message':'Failure during attachmentItem write.',\n\t\t\t'code': response.status,\n\t\t\t'serverMessage': response.jqxhr.responseText,\n\t\t\t'response': response\n\t\t};\n\t});\n};\n\nItem.prototype.uploadFile = function(fileInfo, progressCallback){\n\tvar item = this;\n\tlog.debug('Zotero.Item.uploadFile', 3);\n\tvar uploadAuthFileData = {\n\t\tmd5:fileInfo.md5,\n\t\tfilename: item.get('title'),\n\t\tfilesize: fileInfo.filesize,\n\t\tmtime:fileInfo.mtime,\n\t\tcontentType:fileInfo.contentType,\n\t\tparams:1\n\t};\n\tif(fileInfo.contentType === ''){\n\t\tuploadAuthFileData.contentType = 'application/octet-stream';\n\t}\n\treturn item.getUploadAuthorization(uploadAuthFileData)\n\t.then(function(response){\n\t\tlog.debug('uploadAuth callback', 3);\n\t\tvar upAuthOb;\n\t\tif(typeof response.data == 'string'){upAuthOb = JSON.parse(response.data);}\n\t\telse{upAuthOb = response.data;}\n\t\tif(upAuthOb.exists == 1){\n\t\t\treturn {'message':'File Exists'};\n\t\t}\n\t\telse{\n\t\t\t//TODO: add progress\n\t\t\treturn Zotero.file.uploadFile(upAuthOb, fileInfo)\n\t\t\t.then(function(){\n\t\t\t\t//upload was successful: register it\n\t\t\t\treturn item.registerUpload(upAuthOb.uploadKey)\n\t\t\t\t.then(function(response){\n\t\t\t\t\tif(response.isError){\n\t\t\t\t\t\tvar e = {\n\t\t\t\t\t\t\t'message':'Failed to register uploaded file.',\n\t\t\t\t\t\t\t'code': response.status,\n\t\t\t\t\t\t\t'serverMessage': response.jqxhr.responseText,\n\t\t\t\t\t\t\t'response': response\n\t\t\t\t\t\t};\n\t\t\t\t\t\tlog.error(e);\n\t\t\t\t\t\tthrow e;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn {'message': 'Upload Successful'};\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}).catch(function(response){\n\t\tlog.debug('Failure caught during upload', 3);\n\t\tlog.debug(response, 3);\n\t\tthrow {\n\t\t\t'message':'Failure during upload.',\n\t\t\t'code': response.status,\n\t\t\t'serverMessage': response.jqxhr.responseText,\n\t\t\t'response': response\n\t\t};\n\t});\n};\n\nItem.prototype.cslItem = function(){\n\tvar zoteroItem = this;\n\t\n\t// don't return URL or accessed information for journal articles if a\n\t// pages field exists\n\tvar itemType = zoteroItem.get('itemType');//Zotero_ItemTypes::getName($zoteroItem->itemTypeID);\n\tvar cslType = zoteroItem.cslTypeMap.hasOwnProperty(itemType) ? zoteroItem.cslTypeMap[itemType] : false;\n\tif (!cslType) cslType = 'article';\n\tvar ignoreURL = ((zoteroItem.get('accessDate') || zoteroItem.get('url')) &&\n\t\t\titemType in {'journalArticle':1, 'newspaperArticle':1, 'magazineArticle':1} &&\n\t\t\tzoteroItem.get('pages') &&\n\t\t\tzoteroItem.citePaperJournalArticleURL);\n\t\n\tvar cslItem = {'type': cslType};\n\tif(zoteroItem.owningLibrary){\n\t\tcslItem['id'] = zoteroItem.apiObj.library.id + '/' + zoteroItem.get('key');\n\t} else {\n\t\tcslItem['id'] = Zotero.utils.getKey();\n\t}\n\t\n\t// get all text variables (there must be a better way)\n\t// TODO: does citeproc-js permit short forms?\n\tObject.keys(zoteroItem.cslFieldMap).forEach(function(variable){\n\t\tvar fields = zoteroItem.cslFieldMap[variable];\n\t\tif (variable == 'URL' && ignoreURL) return;\n\t\tfields.forEach(function(field){\n\t\t\tvar value = zoteroItem.get(field);\n\t\t\tif(value){\n\t\t\t\t//TODO: strip enclosing quotes? necessary when not pulling from DB?\n\t\t\t\tcslItem[variable] = value;\n\t\t\t}\n\t\t});\n\t});\n\t\n\t// separate name variables\n\tvar creators = zoteroItem.get('creators');\n\tcreators.forEach(function(creator){\n\t\tvar creatorType = creator['creatorType'];// isset(self::$zoteroNameMap[$creatorType]) ? self::$zoteroNameMap[$creatorType] : false;\n\t\tif (!creatorType) return;\n\t\t\n\t\tvar nameObj;\n\t\tif(creator.hasOwnProperty('name')){\n\t\t\tnameObj = {'literal': creator['name']};\n\t\t}\n\t\telse {\n\t\t\tnameObj = {'family': creator['lastName'], 'given': creator['firstName']};\n\t\t}\n\t\t\n\t\tif (cslItem.hasOwnProperty(creatorType)) {\n\t\t\tcslItem[creatorType].push(nameObj);\n\t\t}\n\t\telse {\n\t\t\tcslItem[creatorType] = [nameObj];\n\t\t}\n\t});\n\t\n\t// get date variables\n\tObject.keys(zoteroItem.cslDateMap).forEach(function(key){\n\t\tvar val = zoteroItem.cslDateMap[key];\n\t\tvar date = zoteroItem.get(val);\n\t\tif (date) {\n\t\t\tcslItem[key] = {'raw': date};\n\t\t}\n\t});\n\t\n\treturn cslItem;\n};\n\nObject.keys(ItemMaps).forEach(function(key) {\n\tItem.prototype[key] = ItemMaps[key];\n});\n\nmodule.exports = Item;\n","'use strict';\n\nvar log = require('./Log.js').Logger('libZotero:ItemMaps');\n\nvar ItemMaps = {};\n\nItemMaps.fieldMap = {\n\t'itemType'\t\t\t\t: 'Item Type',\n\t'title'\t\t\t\t\t: 'Title',\n\t'dateAdded'\t\t\t\t: 'Date Added',\n\t'dateModified'\t\t\t: 'Date Modified',\n\t'source'\t\t\t\t: 'Source',\n\t'notes'\t\t\t\t\t: 'Notes',\n\t'tags'\t\t\t\t\t: 'Tags',\n\t'attachments'\t\t\t: 'Attachments',\n\t'related'\t\t\t\t: 'Related',\n\t'url'\t\t\t\t\t: 'URL',\n\t'rights'\t\t\t\t: 'Rights',\n\t'series'\t\t\t\t: 'Series',\n\t'volume'\t\t\t\t: 'Volume',\n\t'issue'\t\t\t\t\t: 'Issue',\n\t'edition'\t\t\t\t: 'Edition',\n\t'place'\t\t\t\t\t: 'Place',\n\t'publisher'\t\t\t\t: 'Publisher',\n\t'pages'\t\t\t\t\t: 'Pages',\n\t'ISBN'\t\t\t\t\t: 'ISBN',\n\t'publicationTitle'\t\t: 'Publication',\n\t'ISSN'\t\t\t\t\t: 'ISSN',\n\t'date'\t\t\t\t\t: 'Date',\n\t'year'\t\t\t\t\t: 'Year',\n\t'section'\t\t\t\t: 'Section',\n\t'callNumber'\t\t\t: 'Call Number',\n\t'archive'\t\t\t\t: 'Archive',\n\t'archiveLocation'\t\t: 'Loc. in Archive',\n\t'libraryCatalog'\t\t: 'Library Catalog',\n\t'distributor'\t\t\t: 'Distributor',\n\t'extra'\t\t\t\t\t: 'Extra',\n\t'journalAbbreviation'\t: 'Journal Abbr',\n\t'DOI'\t\t\t\t\t: 'DOI',\n\t'accessDate'\t\t\t: 'Accessed',\n\t'seriesTitle'\t\t\t: 'Series Title',\n\t'seriesText'\t\t\t: 'Series Text',\n\t'seriesNumber'\t\t\t: 'Series Number',\n\t'institution'\t\t\t: 'Institution',\n\t'reportType'\t\t\t: 'Report Type',\n\t'code'\t\t\t\t\t: 'Code',\n\t'session'\t\t\t\t: 'Session',\n\t'legislativeBody'\t\t: 'Legislative Body',\n\t'history'\t\t\t\t: 'History',\n\t'reporter'\t\t\t\t: 'Reporter',\n\t'court'\t\t\t\t\t: 'Court',\n\t'numberOfVolumes'\t\t: '# of Volumes',\n\t'committee'\t\t\t\t: 'Committee',\n\t'assignee'\t\t\t\t: 'Assignee',\n\t'patentNumber'\t\t\t: 'Patent Number',\n\t'priorityNumbers'\t\t: 'Priority Numbers',\n\t'issueDate'\t\t\t\t: 'Issue Date',\n\t'references'\t\t\t: 'References',\n\t'legalStatus'\t\t\t: 'Legal Status',\n\t'codeNumber'\t\t\t: 'Code Number',\n\t'artworkMedium'\t\t\t: 'Medium',\n\t'number'\t\t\t\t: 'Number',\n\t'artworkSize'\t\t\t: 'Artwork Size',\n\t'repository'\t\t\t: 'Repository',\n\t'videoRecordingType'\t: 'Recording Type',\n\t'interviewMedium'\t\t: 'Medium',\n\t'letterType'\t\t\t: 'Type',\n\t'manuscriptType'\t\t: 'Type',\n\t'mapType'\t\t\t\t: 'Type',\n\t'scale'\t\t\t\t\t: 'Scale',\n\t'thesisType'\t\t\t: 'Type',\n\t'websiteType'\t\t\t: 'Website Type',\n\t'audioRecordingType'\t: 'Recording Type',\n\t'label'\t\t\t\t\t: 'Label',\n\t'presentationType'\t\t: 'Type',\n\t'meetingName'\t\t\t: 'Meeting Name',\n\t'studio'\t\t\t\t: 'Studio',\n\t'runningTime'\t\t\t: 'Running Time',\n\t'network'\t\t\t\t: 'Network',\n\t'postType'\t\t\t\t: 'Post Type',\n\t'audioFileType'\t\t\t: 'File Type',\n\t'versionNumber'\t\t\t: 'Version Number',\n\t'system'\t\t\t\t: 'System',\n\t'company'\t\t\t\t: 'Company',\n\t'conferenceName'\t\t: 'Conference Name',\n\t'encyclopediaTitle'\t\t: 'Encyclopedia Title',\n\t'dictionaryTitle'\t\t: 'Dictionary Title',\n\t'language'\t\t\t\t: 'Language',\n\t'programmingLanguage'\t: 'Language',\n\t'university'\t\t\t: 'University',\n\t'abstractNote'\t\t\t: 'Abstract',\n\t'websiteTitle'\t\t\t: 'Website Title',\n\t'reportNumber'\t\t\t: 'Report Number',\n\t'billNumber'\t\t\t: 'Bill Number',\n\t'codeVolume'\t\t\t: 'Code Volume',\n\t'codePages'\t\t\t\t: 'Code Pages',\n\t'dateDecided'\t\t\t: 'Date Decided',\n\t'reporterVolume'\t\t: 'Reporter Volume',\n\t'firstPage'\t\t\t\t: 'First Page',\n\t'documentNumber'\t\t: 'Document Number',\n\t'dateEnacted'\t\t\t: 'Date Enacted',\n\t'publicLawNumber'\t\t: 'Public Law Number',\n\t'country'\t\t\t\t: 'Country',\n\t'applicationNumber'\t\t: 'Application Number',\n\t'forumTitle'\t\t\t: 'Forum/Listserv Title',\n\t'episodeNumber'\t\t\t: 'Episode Number',\n\t'blogTitle'\t\t\t\t: 'Blog Title',\n\t'caseName'\t\t\t\t: 'Case Name',\n\t'nameOfAct'\t\t\t\t: 'Name of Act',\n\t'subject'\t\t\t\t: 'Subject',\n\t'proceedingsTitle'\t\t: 'Proceedings Title',\n\t'bookTitle'\t\t\t\t: 'Book Title',\n\t'shortTitle'\t\t\t: 'Short Title',\n\t'docketNumber'\t\t\t: 'Docket Number',\n\t'numPages'\t\t\t\t: '# of Pages',\n\t'note'\t\t\t\t\t: 'Note',\n\t'numChildren'\t\t\t: '# of Children',\n\t'addedBy'\t\t\t\t: 'Added By',\n\t'creator'\t\t\t\t: 'Creator'\n};\n\nItemMaps.typeMap = {\n\t'note'\t\t\t\t\t: 'Note',\n\t'attachment'\t\t\t: 'Attachment',\n\t'book'\t\t\t\t\t: 'Book',\n\t'bookSection'\t\t\t: 'Book Section',\n\t'journalArticle'\t\t: 'Journal Article',\n\t'magazineArticle'\t\t: 'Magazine Article',\n\t'newspaperArticle'\t\t: 'Newspaper Article',\n\t'thesis'\t\t\t\t: 'Thesis',\n\t'letter'\t\t\t\t: 'Letter',\n\t'manuscript'\t\t\t: 'Manuscript',\n\t'interview'\t\t\t\t: 'Interview',\n\t'film'\t\t\t\t\t: 'Film',\n\t'artwork'\t\t\t\t: 'Artwork',\n\t'webpage'\t\t\t\t: 'Web Page',\n\t'report'\t\t\t\t: 'Report',\n\t'bill'\t\t\t\t\t: 'Bill',\n\t'case'\t\t\t\t\t: 'Case',\n\t'hearing'\t\t\t\t: 'Hearing',\n\t'patent'\t\t\t\t: 'Patent',\n\t'statute'\t\t\t\t: 'Statute',\n\t'email'\t\t\t\t\t: 'E-mail',\n\t'map'\t\t\t\t\t: 'Map',\n\t'blogPost'\t\t\t\t: 'Blog Post',\n\t'instantMessage'\t\t: 'Instant Message',\n\t'forumPost'\t\t\t\t: 'Forum Post',\n\t'audioRecording'\t\t: 'Audio Recording',\n\t'presentation'\t\t\t: 'Presentation',\n\t'videoRecording'\t\t: 'Video Recording',\n\t'tvBroadcast'\t\t\t: 'TV Broadcast',\n\t'radioBroadcast'\t\t: 'Radio Broadcast',\n\t'podcast'\t\t\t\t: 'Podcast',\n\t'computerProgram'\t\t: 'Computer Program',\n\t'conferencePaper'\t\t: 'Conference Paper',\n\t'document'\t\t\t\t: 'Document',\n\t'encyclopediaArticle'\t: 'Encyclopedia Article',\n\t'dictionaryEntry'\t\t: 'Dictionary Entry'\n};\n\nItemMaps.creatorMap = {\n\t'author'\t\t\t: 'Author',\n\t'contributor'\t\t: 'Contributor',\n\t'editor'\t\t\t: 'Editor',\n\t'translator'\t\t: 'Translator',\n\t'seriesEditor'\t\t: 'Series Editor',\n\t'interviewee'\t\t: 'Interview With',\n\t'interviewer'\t\t: 'Interviewer',\n\t'director'\t\t\t: 'Director',\n\t'scriptwriter'\t\t: 'Scriptwriter',\n\t'producer'\t\t\t: 'Producer',\n\t'castMember'\t\t: 'Cast Member',\n\t'sponsor'\t\t\t: 'Sponsor',\n\t'counsel'\t\t\t: 'Counsel',\n\t'inventor'\t\t\t: 'Inventor',\n\t'attorneyAgent'\t\t: 'Attorney/Agent',\n\t'recipient'\t\t\t: 'Recipient',\n\t'performer'\t\t\t: 'Performer',\n\t'composer'\t\t\t: 'Composer',\n\t'wordsBy'\t\t\t: 'Words By',\n\t'cartographer'\t\t: 'Cartographer',\n\t'programmer'\t\t: 'Programmer',\n\t'reviewedAuthor'\t: 'Reviewed Author',\n\t'artist'\t\t\t: 'Artist',\n\t'commenter'\t\t\t: 'Commenter',\n\t'presenter'\t\t\t: 'Presenter',\n\t'guest'\t\t\t\t: 'Guest',\n\t'podcaster'\t\t\t: 'Podcaster'\n};\n\nItemMaps.hideFields = [\n\t'mimeType',\n\t'linkMode',\n\t'charset',\n\t'md5',\n\t'mtime',\n\t'version',\n\t'key',\n\t'collections',\n\t'relations',\n\t'parentItem',\n\t'contentType',\n\t'filename',\n\t'tags'\n];\n\nItemMaps.noEditFields = [\n\t'accessDate',\n\t'modified',\n\t'filename',\n\t'dateAdded',\n\t'dateModified'\n];\n\nItemMaps.itemTypeImageSrc = {\n\t'note'\t\t\t\t\t: 'note',\n\t'attachment'\t\t\t: 'attachment-pdf',\n\t'attachmentPdf'\t\t\t: 'attachment-pdf',\n\t'attachmentWeblink'\t\t: 'attachment-web-link',\n\t'attachmentSnapshot'\t: 'attachment-snapshot',\n\t'attachmentFile'\t\t: 'attachment-file',\n\t'attachmentLink'\t\t: 'attachment-link',\n\t'book'\t\t\t\t\t: 'book',\n\t'bookSection'\t\t\t: 'book_open',\n\t'journalArticle'\t\t: 'page_white_text',\n\t'magazineArticle'\t\t: 'layout',\n\t'newspaperArticle'\t\t: 'newspaper',\n\t'thesis'\t\t\t\t: 'report',\n\t'letter'\t\t\t\t: 'email_open',\n\t'manuscript'\t\t\t: 'script',\n\t'interview'\t\t\t\t: 'comments',\n\t'film'\t\t\t\t\t: 'film',\n\t'artwork'\t\t\t\t: 'picture',\n\t'webpage'\t\t\t\t: 'page',\n\t'report'\t\t\t\t: 'report',\n\t'bill'\t\t\t\t\t: 'page_white',\n\t'case'\t\t\t\t\t: 'page_white',\n\t'hearing'\t\t\t\t: 'page_white',\n\t'patent'\t\t\t\t: 'page_white',\n\t'statute'\t\t\t\t: 'page_white',\n\t'email'\t\t\t\t\t: 'email',\n\t'map'\t\t\t\t\t: 'map',\n\t'blogPost'\t\t\t\t: 'layout',\n\t'instantMessage'\t\t: 'page_white',\n\t'forumPost'\t\t\t\t: 'page',\n\t'audioRecording'\t\t: 'ipod',\n\t'presentation'\t\t\t: 'page_white',\n\t'videoRecording'\t\t: 'film',\n\t'tvBroadcast'\t\t\t: 'television',\n\t'radioBroadcast'\t\t: 'transmit',\n\t'podcast'\t\t\t\t: 'ipod_cast',\n\t'computerProgram'\t\t: 'page_white_code',\n\t'conferencePaper'\t\t: 'treeitem-conferencePaper',\n\t'document'\t\t\t\t: 'page_white',\n\t'encyclopediaArticle'\t: 'page_white',\n\t'dictionaryEntry'\t\t: 'page_white'\n};\n\nItemMaps.cslNameMap = {\n\t'author': 'author',\n\t'editor': 'editor',\n\t'bookAuthor': 'container-author',\n\t'composer': 'composer',\n\t'interviewer': 'interviewer',\n\t'recipient': 'recipient',\n\t'seriesEditor': 'collection-editor',\n\t'translator': 'translator'\n};\n\nItemMaps.cslFieldMap = {\n\t'title': ['title'],\n\t'container-title': ['publicationTitle',  'reporter', 'code'], /* reporter and code should move to SQL mapping tables */\n\t'collection-title': ['seriesTitle', 'series'],\n\t'collection-number': ['seriesNumber'],\n\t'publisher': ['publisher', 'distributor'], /* distributor should move to SQL mapping tables */\n\t'publisher-place': ['place'],\n\t'authority': ['court'],\n\t'page': ['pages'],\n\t'volume': ['volume'],\n\t'issue': ['issue'],\n\t'number-of-volumes': ['numberOfVolumes'],\n\t'number-of-pages': ['numPages'],\n\t'edition': ['edition'],\n\t'versionNumber': ['version'],\n\t'section': ['section'],\n\t'genre': ['type', 'artworkSize'], /* artworkSize should move to SQL mapping tables, or added as a CSL variable */\n\t'medium': ['medium', 'system'],\n\t'archive': ['archive'],\n\t'archive_location': ['archiveLocation'],\n\t'event': ['meetingName', 'conferenceName'], /* these should be mapped to the same base field in SQL mapping tables */\n\t'event-place': ['place'],\n\t'abstract': ['abstractNote'],\n\t'URL': ['url'],\n\t'DOI': ['DOI'],\n\t'ISBN': ['ISBN'],\n\t'call-number': ['callNumber'],\n\t'note': ['extra'],\n\t'number': ['number'],\n\t'references': ['history'],\n\t'shortTitle': ['shortTitle'],\n\t'journalAbbreviation': ['journalAbbreviation'],\n\t'language': ['language']\n};\n\nItemMaps.cslDateMap = {\n\t'issued': 'date',\n\t'accessed': 'accessDate'\n};\n\nItemMaps.cslTypeMap = {\n\t'book': 'book',\n\t'bookSection': 'chapter',\n\t'journalArticle': 'article-journal',\n\t'magazineArticle': 'article-magazine',\n\t'newspaperArticle': 'article-newspaper',\n\t'thesis': 'thesis',\n\t'encyclopediaArticle': 'entry-encyclopedia',\n\t'dictionaryEntry': 'entry-dictionary',\n\t'conferencePaper': 'paper-conference',\n\t'letter': 'personal_communication',\n\t'manuscript': 'manuscript',\n\t'interview': 'interview',\n\t'film': 'motion_picture',\n\t'artwork': 'graphic',\n\t'webpage': 'webpage',\n\t'report': 'report',\n\t'bill': 'bill',\n\t'case': 'legal_case',\n\t'hearing': 'bill',                // ??\n\t'patent': 'patent',\n\t'statute': 'bill',                // ??\n\t'email': 'personal_communication',\n\t'map': 'map',\n\t'blogPost': 'webpage',\n\t'instantMessage': 'personal_communication',\n\t'forumPost': 'webpage',\n\t'audioRecording': 'song',     // ??\n\t'presentation': 'speech',\n\t'videoRecording': 'motion_picture',\n\t'tvBroadcast': 'broadcast',\n\t'radioBroadcast': 'broadcast',\n\t'podcast': 'song',            // ??\n\t'computerProgram': 'book'     // ??\n};\n\nItemMaps.citePaperJournalArticleURL = false;\n\nmodule.exports = ItemMaps;","'use strict';\n\nvar log = require('./Log.js').Logger('libZotero:Items');\n\nmodule.exports = function(jsonBody){\n\tthis.instance = 'Zotero.Items';\n\t//represent items as array for ordering purposes\n\tthis.itemsVersion = 0;\n\tthis.syncState = {\n\t\tearliestVersion: null,\n\t\tlatestVersion: null\n\t};\n\tthis.itemObjects = {};\n\tthis.objectMap = this.itemObjects;\n\tthis.objectArray = [];\n\tthis.unsyncedItemKeys = [];\n\t\n\tif(jsonBody){\n\t\tthis.addItemsFromJson(jsonBody);\n\t}\n};\n\nmodule.exports.prototype = new Zotero.Container();\n\nmodule.exports.prototype.getItem = function(key){\n\treturn this.getObject(key);\n};\n\nmodule.exports.prototype.getItems = function(keys){\n\treturn this.getObjects(keys);\n};\n\nmodule.exports.prototype.addItem = function(item){\n\tthis.addObject(item);\n\treturn this;\n};\n\nmodule.exports.prototype.addItemsFromJson = function(jsonBody){\n\tlog.debug('addItemsFromJson', 3);\n\tvar items = this;\n\tvar parsedItemJson = jsonBody;\n\tvar itemsAdded = [];\n\tparsedItemJson.forEach(function(itemObj){\n\t\tvar item = new Zotero.Item(itemObj);\n\t\titems.addItem(item);\n\t\titemsAdded.push(item);\n\t});\n\treturn itemsAdded;\n};\n\n//Remove item from local set if it has been marked as deleted by the server\nmodule.exports.prototype.removeLocalItem = function(key){\n\treturn this.removeObject(key);\n};\n\nmodule.exports.prototype.removeLocalItems = function(keys){\n\treturn this.removeObjects(keys);\n};\n\nmodule.exports.prototype.deleteItem = function(itemKey){\n\tlog.debug('Zotero.Items.deleteItem', 3);\n\tvar items = this;\n\tvar item;\n\t\n\tif(!itemKey) return false;\n\titemKey = items.extractKey(itemKey);\n\titem = items.getItem(itemKey);\n\t\n\tvar urlconfig = {\n\t\t'target':'item',\n\t\t'libraryType':items.owningLibrary.libraryType,\n\t\t'libraryID':items.owningLibrary.libraryID,\n\t\t'itemKey':item.key\n\t};\n\tvar requestConfig = {\n\t\turl: Zotero.ajax.apiRequestString(urlconfig),\n\t\ttype: 'DELETE',\n\t\theaders:{'If-Unmodified-Since-Version':item.get('version')}\n\t};\n\t\n\treturn Zotero.net.ajaxRequest(requestConfig);\n};\n\nmodule.exports.prototype.deleteItems = function(deleteItems, version){\n\t//TODO: split into multiple requests if necessary\n\tlog.debug('Zotero.Items.deleteItems', 3);\n\tvar items = this;\n\tvar deleteKeys = [];\n\tvar i;\n\tif((!version) && (items.itemsVersion !== 0)){\n\t\tversion = items.itemsVersion;\n\t}\n\t\n\t//make sure we're working with item keys, not items\n\tvar key;\n\tfor(i = 0; i < deleteItems.length; i++){\n\t\tif(!deleteItems[i]) continue;\n\t\tkey = items.extractKey(deleteItems[i]);\n\t\tif(key){\n\t\t\tdeleteKeys.push(key);\n\t\t}\n\t}\n\t\n\t//split keys into chunks of 50 per request\n\tvar deleteChunks = items.chunkObjectsArray(deleteKeys);\n\t/*\n\tvar successCallback = function(response){\n\t\tvar deleteProgress = index / deleteChunks.length;\n\t\tZotero.trigger(\"deleteProgress\", {'progress': deleteProgress});\n\t\treturn response;\n\t};\n\t*/\n\tvar requestObjects = [];\n\tfor(i = 0; i < deleteChunks.length; i++){\n\t\tvar deleteKeysString = deleteChunks[i].join(',');\n\t\tvar urlconfig = {\n\t\t\t'target':'items',\n\t\t\t'libraryType':items.owningLibrary.libraryType,\n\t\t\t'libraryID':items.owningLibrary.libraryID,\n\t\t\t'itemKey': deleteKeysString\n\t\t};\n\t\t//headers['If-Unmodified-Since-Version'] = version;\n\t\t\n\t\tvar requestConfig = {\n\t\t\turl: urlconfig,\n\t\t\ttype: 'DELETE'\n\t\t};\n\t\trequestObjects.push(requestConfig);\n\t}\n\t\n\treturn Zotero.net.queueRequest(requestObjects);\n};\n\nmodule.exports.prototype.trashItems = function(itemsArray){\n\tvar items = this;\n\tvar i;\n\tfor(i = 0; i < itemsArray.length; i++){\n\t\tvar item = itemsArray[i];\n\t\titem.set('deleted', 1);\n\t}\n\treturn items.writeItems(itemsArray);\n};\n\nmodule.exports.prototype.untrashItems = function(itemsArray){\n\tvar items = this;\n\tvar i;\n\tfor(i = 0; i < itemsArray.length; i++){\n\t\tvar item = itemsArray[i];\n\t\titem.set('deleted', 0);\n\t}\n\treturn items.writeItems(itemsArray);\n};\n\nmodule.exports.prototype.findItems = function(config){\n\tvar items = this;\n\tvar matchingItems = [];\n\tObject.keys(items.itemObjects).forEach(function(key){\n\t\tvar item = item.itemObjects[key];\n\t\tif(config.collectionKey && (item.apiObj.collections.indexOf(config.collectionKey) === -1) ){\n\t\t\treturn;\n\t\t}\n\t\tmatchingItems.push(items.itemObjects[key]);\n\t});\n\treturn matchingItems;\n};\n\n//take an array of items and extract children into their own items\n//for writing\nmodule.exports.prototype.atomizeItems = function(itemsArray){\n\t//process the array of items, pulling out child notes/attachments to write\n\t//separately with correct parentItem set and assign generated itemKeys to\n\t//new items\n\tvar writeItems = [];\n\tvar item;\n\tfor(var i = 0; i < itemsArray.length; i++){\n\t\titem = itemsArray[i];\n\t\t//generate an itemKey if the item does not already have one\n\t\tvar itemKey = item.get('key');\n\t\tif(itemKey === '' || itemKey === null) {\n\t\t\tvar newItemKey = Zotero.utils.getKey();\n\t\t\titem.set('key', newItemKey);\n\t\t\titem.set('version', 0);\n\t\t}\n\t\t//items that already have item key always in first pass, as are their children\n\t\twriteItems.push(item);\n\t\tif(item.hasOwnProperty('notes') && item.notes.length > 0){\n\t\t\tfor(var j = 0; j < item.notes.length; j++){\n\t\t\t\titem.notes[j].set('parentItem', item.get('key'));\n\t\t\t}\n\t\t\twriteItems = writeItems.concat(item.notes);\n\t\t}\n\t\tif(item.hasOwnProperty('attachments') && item.attachments.length > 0){\n\t\t\tfor(var k = 0; k < item.attachments.length; k++){\n\t\t\t\titem.attachments[k].set('parentItem', item.get('key'));\n\t\t\t}\n\t\t\twriteItems = writeItems.concat(item.attachments);\n\t\t}\n\t}\n\treturn writeItems;\n};\n\n//accept an array of 'Zotero.Item's\nmodule.exports.prototype.writeItems = function(itemsArray){\n\tvar items = this;\n\tvar library = items.owningLibrary;\n\tvar i;\n\tvar writeItems = items.atomizeItems(itemsArray);\n\t\n\tvar config = {\n\t\t'target':'items',\n\t\t'libraryType':items.owningLibrary.libraryType,\n\t\t'libraryID':items.owningLibrary.libraryID\n\t};\n\tvar requestUrl = Zotero.ajax.apiRequestString(config);\n\t\n\tvar writeChunks = items.chunkObjectsArray(writeItems);\n\tvar rawChunkObjects = items.rawChunks(writeChunks);\n\t\n\t//update item with server response if successful\n\tvar writeItemsSuccessCallback = function(response){\n\t\tlog.debug('writeItem successCallback', 3);\n\t\titems.updateObjectsFromWriteResponse(this.writeChunk, response);\n\t\t//save updated items to IDB\n\t\tif(Zotero.config.useIndexedDB){\n\t\t\tthis.library.idbLibrary.updateItems(this.writeChunk);\n\t\t}\n\t\t\n\t\tZotero.trigger('itemsChanged', {library:this.library});\n\t\tresponse.returnItems = this.writeChunk;\n\t\treturn response;\n\t};\n\t\n\tlog.debug('items.itemsVersion: ' + items.itemsVersion, 3);\n\tlog.debug('items.libraryVersion: ' + items.libraryVersion, 3);\n\t\n\tvar requestObjects = [];\n\tfor(i = 0; i < writeChunks.length; i++){\n\t\tvar successContext = {\n\t\t\twriteChunk: writeChunks[i],\n\t\t\tlibrary: library\n\t\t};\n\t\t\n\t\tvar requestData = JSON.stringify(rawChunkObjects[i]);\n\t\trequestObjects.push({\n\t\t\turl: requestUrl,\n\t\t\ttype: 'POST',\n\t\t\tdata: requestData,\n\t\t\tprocessData: false,\n\t\t\tsuccess: writeItemsSuccessCallback.bind(successContext)\n\t\t});\n\t}\n\t\n\treturn library.sequentialRequests(requestObjects)\n\t.then(function(responses){\n\t\tlog.debug('Done with writeItems sequentialRequests promise', 3);\n\t\treturn responses;\n\t});\n};\n","'use strict';\n\nvar log = require('./Log.js').Logger('libZotero:Library');\n\n/**\n * A user or group Zotero library. This is generally the top level object\n * through which interactions should happen. It houses containers for\n * Zotero API objects (collections, items, etc) and handles making requests\n * with particular API credentials, as well as storing data locally.\n * @param {string} type                 type of library, 'user' or 'group'\n * @param {int} libraryID            ID of the library\n * @param {string} libraryUrlIdentifier identifier used in urls, could be library id or user/group slug\n * @param {string} apiKey               key to use for API requests\n */\nvar Library = function(type, libraryID, libraryUrlIdentifier, apiKey){\n\tlog.debug('Zotero.Library constructor', 3);\n\tlog.debug('Library Constructor: ' + type + ' ' + libraryID + ' ', 3);\n\tvar library = this;\n\tlog.debug(libraryUrlIdentifier, 4);\n\tlibrary.instance = 'Zotero.Library';\n\tlibrary.libraryVersion = 0;\n\tlibrary.syncState = {\n\t\tearliestVersion: null,\n\t\tlatestVersion: null\n\t};\n\tlibrary._apiKey = apiKey || '';\n\t\n\tif(Zotero.config.librarySettings){\n\t\tlibrary.libraryBaseWebsiteUrl = Zotero.config.librarySettings.libraryPathString;\n\t}\n\telse{\n\t\tlibrary.libraryBaseWebsiteUrl = Zotero.config.baseWebsiteUrl;\n\t\tif(type == 'group'){\n\t\t\tlibrary.libraryBaseWebsiteUrl += 'groups/';\n\t\t}\n\t\tif(libraryUrlIdentifier){\n\t\t\tthis.libraryBaseWebsiteUrl += libraryUrlIdentifier + '/items';\n\t\t} else {\n\t\t\tlog.warn('no libraryUrlIdentifier specified');\n\t\t}\n\t}\n\t//object holders within this library, whether tied to a specific library or not\n\tlibrary.items = new Zotero.Items();\n\tlibrary.items.owningLibrary = library;\n\tlibrary.itemKeys = [];\n\tlibrary.collections = new Zotero.Collections();\n\tlibrary.collections.libraryUrlIdentifier = library.libraryUrlIdentifier;\n\tlibrary.collections.owningLibrary = library;\n\tlibrary.tags = new Zotero.Tags();\n\tlibrary.searches = new Zotero.Searches();\n\tlibrary.searches.owningLibrary = library;\n\tlibrary.groups = new Zotero.Groups();\n\tlibrary.groups.owningLibrary = library;\n\tlibrary.deleted = new Zotero.Deleted();\n\tlibrary.deleted.owningLibrary = library;\n\t\n\tif(!type){\n\t\t//return early if library not specified\n\t\tlog.warn('No type specified for library');\n\t\treturn;\n\t}\n\t//attributes tying instance to a specific Zotero library\n\tlibrary.type = type;\n\tlibrary.libraryType = type;\n\tlibrary.libraryID = libraryID;\n\tlibrary.libraryString = Zotero.utils.libraryString(library.libraryType, library.libraryID);\n\tlibrary.libraryUrlIdentifier = libraryUrlIdentifier;\n\t\n\t//initialize preferences object\n\tlibrary.preferences = new Zotero.Preferences(Zotero.store, library.libraryString);\n\t\n\tif(typeof window === 'undefined') {\n\t\tZotero.config.useIndexedDB = false;\n\t\tlog.warn('Node detected; disabling indexedDB');\n\t} else {\n\t\t//initialize indexedDB if we're supposed to use it\n\t\t//detect safari until they fix their shit\n\t\tvar is_chrome = navigator.userAgent.indexOf('Chrome') > -1;\n\t\tvar is_explorer = navigator.userAgent.indexOf('MSIE') > -1;\n\t\tvar is_firefox = navigator.userAgent.indexOf('Firefox') > -1;\n\t\tvar is_safari = navigator.userAgent.indexOf('Safari') > -1;\n\t\tvar is_opera = navigator.userAgent.toLowerCase().indexOf('op') > -1;\n\t\tif ((is_chrome)&&(is_safari)) {is_safari=false;}\n\t\tif ((is_chrome)&&(is_opera)) {is_chrome=false;}\n\t\tif(is_safari) {\n\t\t\tZotero.config.useIndexedDB = false;\n\t\t\tlog.warn('Safari detected; disabling indexedDB');\n\t\t}\n\t}\n\n\tif(Zotero.config.useIndexedDB === true) {\n\t\tlog.debug('Library Constructor: indexedDB init', 3);\n\t\tvar idbLibrary = new Zotero.Idb.Library(library.libraryString);\n\t\tidbLibrary.owningLibrary = this;\n\t\tlibrary.idbLibrary = idbLibrary;\n\t\tidbLibrary.init()\n\t\t.then(function(){\n\t\t\tlog.debug('Library Constructor: idbInitD Done', 3);\n\t\t\tif(Zotero.config.preloadCachedLibrary === true){\n\t\t\t\tlog.debug('Library Constructor: preloading cached library', 3);\n\t\t\t\tvar cacheLoadD = library.loadIndexedDBCache();\n\t\t\t\tcacheLoadD.then(function(){\n\t\t\t\t\t//TODO: any stuff that needs to execute only after cache is loaded\n\t\t\t\t\t//possibly fire new events to cause display to refresh after load\n\t\t\t\t\tlog.debug('Library Constructor: Library.items.itemsVersion: ' + library.items.itemsVersion, 3);\n\t\t\t\t\tlog.debug('Library Constructor: Library.collections.collectionsVersion: ' + library.collections.collectionsVersion, 3);\n\t\t\t\t\tlog.debug('Library Constructor: Library.tags.tagsVersion: ' + library.tags.tagsVersion, 3);\n\t\t\t\t\tlog.debug('Library Constructor: Triggering cachedDataLoaded', 3);\n\t\t\t\t\tlibrary.trigger('cachedDataLoaded');\n\t\t\t\t},\n\t\t\t\tfunction(err){\n\t\t\t\t\tlog.error('Error loading cached library');\n\t\t\t\t\tlog.error(err);\n\t\t\t\t\tthrow new Error('Error loading cached library');\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\t//trigger cachedDataLoaded since we are done with that step\n\t\t\t\tlibrary.trigger('cachedDataLoaded');\n\t\t\t}\n\t\t},\n\t\tfunction(){\n\t\t\t//can't use indexedDB. Set to false in config and trigger error to notify user\n\t\t\tZotero.config.useIndexedDB = false;\n\t\t\tlibrary.trigger('indexedDBError');\n\t\t\tlibrary.trigger('cachedDataLoaded');\n\t\t\tlog.error('Error initializing indexedDB. Promise rejected.');\n\t\t\t//don't re-throw error, since we can still load data from the API\n\t\t});\n\t}\n\t\n\tlibrary.dirty = false;\n\t\n\t//set noop data-change callbacks\n\tlibrary.tagsChanged = function(){};\n\tlibrary.collectionsChanged = function(){};\n\tlibrary.itemsChanged = function(){};\n};\n/**\n * Items columns for which sorting is supported\n * @type {Array}\n */\nLibrary.prototype.sortableColumns = ['title',\n\t\t\t\t\t\t\t\t\t\t\t'creator',\n\t\t\t\t\t\t\t\t\t\t\t'itemType',\n\t\t\t\t\t\t\t\t\t\t\t'date',\n\t\t\t\t\t\t\t\t\t\t\t'year',\n\t\t\t\t\t\t\t\t\t\t\t'publisher',\n\t\t\t\t\t\t\t\t\t\t\t'publicationTitle',\n\t\t\t\t\t\t\t\t\t\t\t'journalAbbreviation',\n\t\t\t\t\t\t\t\t\t\t\t'language',\n\t\t\t\t\t\t\t\t\t\t\t'accessDate',\n\t\t\t\t\t\t\t\t\t\t\t'libraryCatalog',\n\t\t\t\t\t\t\t\t\t\t\t'callNumber',\n\t\t\t\t\t\t\t\t\t\t\t'rights',\n\t\t\t\t\t\t\t\t\t\t\t'dateAdded',\n\t\t\t\t\t\t\t\t\t\t\t'dateModified',\n\t\t\t\t\t\t\t\t\t\t\t/*'numChildren',*/\n\t\t\t\t\t\t\t\t\t\t\t'addedBy'\n\t\t\t\t\t\t\t\t\t\t\t/*'modifiedBy'*/];\n/**\n * Columns that can be displayed in an items table UI\n * @type {Array}\n */\nLibrary.prototype.displayableColumns = ['title',\n\t\t\t\t\t\t\t\t\t\t\t'creator',\n\t\t\t\t\t\t\t\t\t\t\t'itemType',\n\t\t\t\t\t\t\t\t\t\t\t'date',\n\t\t\t\t\t\t\t\t\t\t\t'year',\n\t\t\t\t\t\t\t\t\t\t\t'publisher',\n\t\t\t\t\t\t\t\t\t\t\t'publicationTitle',\n\t\t\t\t\t\t\t\t\t\t\t'journalAbbreviation',\n\t\t\t\t\t\t\t\t\t\t\t'language',\n\t\t\t\t\t\t\t\t\t\t\t'accessDate',\n\t\t\t\t\t\t\t\t\t\t\t'libraryCatalog',\n\t\t\t\t\t\t\t\t\t\t\t'callNumber',\n\t\t\t\t\t\t\t\t\t\t\t'rights',\n\t\t\t\t\t\t\t\t\t\t\t'dateAdded',\n\t\t\t\t\t\t\t\t\t\t\t'dateModified',\n\t\t\t\t\t\t\t\t\t\t\t'numChildren',\n\t\t\t\t\t\t\t\t\t\t\t'addedBy'\n\t\t\t\t\t\t\t\t\t\t\t/*'modifiedBy'*/];\n/**\n * Items columns that only apply to group libraries\n * @type {Array}\n */\nLibrary.prototype.groupOnlyColumns = ['addedBy'\n\t\t\t\t\t\t\t\t\t\t\t/*'modifiedBy'*/];\n\n/**\n * Sort function that converts strings to locale lower case before comparing,\n * however this is still not particularly effective at getting correct localized\n * sorting in modern browsers due to browser implementations being poor. What we\n * really want here is to strip diacritics first.\n * @param  {string} a [description]\n * @param  {string} b [description]\n * @return {int}   [description]\n */\nLibrary.prototype.comparer = function(){\n\tif(Intl){\n\t\treturn new Intl.Collator().compare;\n\t} else {\n\t\treturn function(a, b){\n\t\t\tif(a.toLocaleLowerCase() == b.toLocaleLowerCase()){\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tif(a.toLocaleLowerCase() < b.toLocaleLowerCase()){\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\treturn 1;\n\t\t};\n\t}\n};\n\n//Zotero library wrapper around jQuery ajax that returns a jQuery promise\n//@url String url to request or object for input to apiRequestUrl and query string\n//@type request method\n//@options jquery options that are not the default for Zotero requests\nLibrary.prototype.ajaxRequest = function(url, type, options){\n\tlog.debug('Library.ajaxRequest', 3);\n\tif(!type){\n\t\ttype = 'GET';\n\t}\n\tif(!options){\n\t\toptions = {};\n\t}\n\tvar requestObject = {\n\t\turl: url,\n\t\ttype: type\n\t};\n\trequestObject = Z.extend({}, requestObject, options);\n\tlog.debug(requestObject, 3);\n\treturn Zotero.net.queueRequest(requestObject);\n};\n\n//Take an array of objects that specify Zotero API requests and perform them\n//in sequence.\n//return deferred that gets resolved when all requests have gone through.\n//Update versions after each request, otherwise subsequent writes won't go through.\n//or do we depend on specified callbacks to update versions if necessary?\n//fail on error?\n//request object must specify: url, method, body, headers, success callback, fail callback(?)\n\n/**\n * Take an array of objects that specify Zotero API requests and perform them\n * in sequence. Return a promise that gets resolved when all requests have\n * gone through.\n * @param  {[] Objects} requests Array of objects specifying requests to be made\n * @return {Promise}          Promise that resolves/rejects along with requests\n */\nLibrary.prototype.sequentialRequests = function(requests){\n\tlog.debug('Zotero.Library.sequentialRequests', 3);\n\tvar library = this;\n\treturn Zotero.net.queueRequest(requests);\n};\n\n/**\n * Generate a website url based on a dictionary of variables and the configured\n * libraryBaseWebsiteUrl\n * @param  {Object} urlvars Dictionary of key/value variables\n * @return {string}         website url\n */\nLibrary.prototype.websiteUrl = function(urlvars){\n\tlog.debug('Zotero.library.websiteUrl', 3);\n\tlog.debug(urlvars, 4);\n\tvar library = this;\n\t\n\tvar urlVarsArray = [];\n\tObject.keys(urlvars).forEach(function(key){\n\t\tvar value = urlvars[key];\n\t\tif(value === '') return;\n\t\turlVarsArray.push(key + '/' + value);\n\t});\n\turlVarsArray.sort();\n\tlog.debug(urlVarsArray, 4);\n\tvar pathVarsString = urlVarsArray.join('/');\n\t\n\treturn library.libraryBaseWebsiteUrl + '/' + pathVarsString;\n};\n\n\nLibrary.prototype.synchronize = function(){\n\t//get updated group metadata if applicable\n\t//  (this is an individual library method, so only necessary if this is\n\t//  a group library and we want to keep info about it)\n\t//sync library data\n\t//  get updated collections versions newer than current library version\n\t//  get updated searches versions newer than current library version\n\t//  get updated item versions newer than current library version\n\t//\n};\n\n/**\n * Make and process API requests to update the local library items based on the\n * versions we have locally. When the promise is resolved, we should have up to\n * date items in this library's items container, as well as saved to indexedDB\n * if configured to use it.\n * @return {Promise} Promise\n */\nLibrary.prototype.loadUpdatedItems = function(){\n\tlog.debug('Zotero.Library.loadUpdatedItems', 3);\n\tvar library = this;\n\t//sync from the libraryVersion if it exists, otherwise use the itemsVersion, which is likely\n\t//derived from the most recent version of any individual item we have.\n\tvar syncFromVersion = library.libraryVersion ? library.libraryVersion : library.items.itemsVersion;\n\treturn Promise.resolve(library.updatedVersions('items', syncFromVersion))\n\t.then(function(response){\n\t\tlog.debug('itemVersions resolved', 3);\n\t\tlog.debug('items Last-Modified-Version: ' + response.lastModifiedVersion, 3);\n\t\tlibrary.items.updateSyncState(response.lastModifiedVersion);\n\t\t\n\t\tvar itemVersions = response.data;\n\t\tlibrary.itemVersions = itemVersions;\n\t\tvar itemKeys = [];\n\t\tObject.keys(itemVersions).forEach(function(key){\n\t\t\tvar val = itemVersions[key];\n\t\t\tvar item = library.items.getItem(key);\n\t\t\tif((!item) || (item.apiObj.key != val)){\n\t\t\t\titemKeys.push(key);\n\t\t\t}\n\t\t});\n\t\treturn library.loadItemsFromKeys(itemKeys);\n\t}).then(function(responses){\n\t\tlog.debug('loadItemsFromKeys resolved', 3);\n\t\tlibrary.items.updateSyncedVersion();\n\t\t\n\t\t//TODO: library needs its own state\n\t\tvar displayParams = Zotero.state.getUrlVars();\n\t\tlibrary.buildItemDisplayView(displayParams);\n\t\t//save updated items to IDB\n\t\tif(Zotero.config.useIndexedDB){\n\t\t\tvar saveItemsD = library.idbLibrary.updateItems(library.items.objectArray);\n\t\t}\n\t});\n};\n\nLibrary.prototype.loadUpdatedCollections = function(){\n\tlog.debug('Zotero.Library.loadUpdatedCollections', 3);\n\tvar library = this;\n\t//sync from the libraryVersion if it exists, otherwise use the collectionsVersion, which is likely\n\t//derived from the most recent version of any individual collection we have.\n\tlog.debug('library.collections.collectionsVersion:' + library.collections.collectionsVersion, 4);\n\tvar syncFromVersion = library.libraryVersion ? library.libraryVersion : library.collections.collectionsVersion;\n\t//we need modified collectionKeys regardless, so load them\n\treturn library.updatedVersions('collections', syncFromVersion)\n\t.then(function(response){\n\t\tlog.debug('collectionVersions finished', 3);\n\t\tlog.debug('Collections Last-Modified-Version: ' + response.lastModifiedVersion, 3);\n\t\t//start the syncState version tracking. This should be the earliest version throughout\n\t\tlibrary.collections.updateSyncState(response.lastModifiedVersion);\n\t\t\n\t\tvar collectionVersions = response.data;\n\t\tlibrary.collectionVersions = collectionVersions;\n\t\tvar collectionKeys = [];\n\t\tObject.keys(collectionVersions).forEach(function(key){\n\t\t\tvar val = collectionVersions[key];\n\t\t\tvar c = library.collections.getCollection(key);\n\t\t\tif((!c) || (c.apiObj.version != val)){\n\t\t\t\tcollectionKeys.push(key);\n\t\t\t}\n\t\t});\n\t\tif(collectionKeys.length === 0){\n\t\t\tlog.debug('No collectionKeys need updating. resolving', 3);\n\t\t\treturn response;\n\t\t}\n\t\telse {\n\t\t\tlog.debug('fetching collections by key', 3);\n\t\t\treturn library.loadCollectionsFromKeys(collectionKeys)\n\t\t\t.then(function(){\n\t\t\t\tvar collections = library.collections;\n\t\t\t\tcollections.initSecondaryData();\n\t\t\t\t\n\t\t\t\tlog.debug('All updated collections loaded', 3);\n\t\t\t\tlibrary.collections.updateSyncedVersion();\n\t\t\t\t//TODO: library needs its own state\n\t\t\t\tvar displayParams = Zotero.state.getUrlVars();\n\t\t\t\t//save updated collections to cache\n\t\t\t\tlog.debug('loadUpdatedCollections complete - saving collections to cache before resolving', 3);\n\t\t\t\tlog.debug('collectionsVersion: ' + library.collections.collectionsVersion, 3);\n\t\t\t\t//library.saveCachedCollections();\n\t\t\t\t//save updated collections to IDB\n\t\t\t\tif(Zotero.config.useIndexedDB){\n\t\t\t\t\treturn library.idbLibrary.updateCollections(collections.collectionsArray);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t})\n\t.then(function(){\n\t\tlog.debug('done getting collection data. requesting deleted data', 3);\n\t\treturn library.getDeleted(library.libraryVersion);\n\t})\n\t.then(function(response){\n\t\tlog.debug('got deleted collections data: removing local copies', 3);\n\t\tlog.debug(library.deleted, 3);\n\t\tif(library.deleted.deletedData.collections && library.deleted.deletedData.collections.length > 0 ){\n\t\t\tlibrary.collections.removeLocalCollections(library.deleted.deletedData.collections);\n\t\t}\n\t});\n};\n\nLibrary.prototype.loadUpdatedTags = function(){\n\tlog.debug('Zotero.Library.loadUpdatedTags', 3);\n\tvar library = this;\n\tlog.debug('tagsVersion: ' + library.tags.tagsVersion, 3);\n\treturn Promise.resolve(library.loadAllTags({since:library.tags.tagsVersion}))\n\t.then(function(){\n\t\tlog.debug('done getting tags, request deleted tags data', 3);\n\t\treturn library.getDeleted(library.libraryVersion);\n\t})\n\t.then(function(response){\n\t\tlog.debug('got deleted tags data', 3);\n\t\tif(library.deleted.deletedData.tags && library.deleted.deletedData.tags.length > 0 ){\n\t\t\tlibrary.tags.removeTags(library.deleted.deletedData.tags);\n\t\t}\n\t\t//save updated tags to IDB\n\t\tif(Zotero.config.useIndexedDB){\n\t\t\tlog.debug('saving updated tags to IDB', 3);\n\t\t\tvar saveTagsD = library.idbLibrary.updateTags(library.tags.tagsArray);\n\t\t}\n\t});\n};\n\nLibrary.prototype.getDeleted = function(version) {\n\tlog.debug('Zotero.Library.getDeleted', 3);\n\tvar library = this;\n\tvar urlconf = {\n\t\ttarget:'deleted',\n\t\tlibraryType:library.libraryType,\n\t\tlibraryID:library.libraryID,\n\t\tsince:version\n\t};\n\t\n\t//if there is already a request working, create a new promise to resolve\n\t//when the actual request finishes\n\tif(library.deleted.pending){\n\t\tlog.debug('getDeleted resolving with previously pending promise', 3);\n\t\treturn Promise.resolve(library.deleted.pendingPromise);\n\t}\n\t\n\t//don't fetch again if version we'd be requesting is between\n\t//deleted.newer and delete.deleted versions, just use that one\n\tlog.debug('version:' + version, 3);\n\tlog.debug('sinceVersion:' + library.deleted.sinceVersion, 3);\n\tlog.debug('untilVersion:' + library.deleted.untilVersion, 3);\n\t\n\tif(library.deleted.untilVersion &&\n\t\tversion >= library.deleted.sinceVersion /*&&\n\t\tversion < library.deleted.untilVersion*/){\n\t\tlog.debug('deletedVersion matches requested: immediately resolving', 3);\n\t\treturn Promise.resolve(library.deleted.deletedData);\n\t}\n\t\n\tlibrary.deleted.pending = true;\n\tlibrary.deleted.pendingPromise = library.ajaxRequest(urlconf)\n\t.then(function(response){\n\t\tlog.debug('got deleted response', 3);\n\t\tlibrary.deleted.deletedData = response.data;\n\t\tlog.debug('Deleted Last-Modified-Version:' + response.lastModifiedVersion, 3);\n\t\tlibrary.deleted.untilVersion = response.lastModifiedVersion;\n\t\tlibrary.deleted.sinceVersion = version;\n\t}).then(function(response){\n\t\tlog.debug('cleaning up deleted pending', 3);\n\t\tlibrary.deleted.pending = false;\n\t\tlibrary.deleted.pendingPromise = false;\n\t});\n\t\n\treturn library.deleted.pendingPromise;\n};\n\nLibrary.prototype.processDeletions = function(deletions){\n\tvar library = this;\n\t//process deleted collections\n\tlibrary.collections.processDeletions(deletions.collections);\n\t//process deleted items\n\tlibrary.items.processDeletions(deletions.items);\n};\n\n//Get a full bibliography from the API for web based citating\nLibrary.prototype.loadFullBib = function(itemKeys, style){\n\tvar library = this;\n\tvar itemKeyString = itemKeys.join(',');\n\tvar urlconfig = {\n\t\t'target':'items',\n\t\t'libraryType':library.libraryType,\n\t\t'libraryID':library.libraryID,\n\t\t'itemKey':itemKeyString,\n\t\t'format':'bib',\n\t\t'linkwrap':'1'\n\t};\n\tif(itemKeys.length == 1){\n\t\turlconfig.target = 'item';\n\t}\n\tif(style){\n\t\turlconfig['style'] = style;\n\t}\n\t\n\tvar loadBibPromise = library.ajaxRequest(urlconfig)\n\t.then(function(response){\n\t\treturn response.data;\n\t});\n\t\n\treturn loadBibPromise;\n};\n\n//load bib for a single item from the API\nLibrary.prototype.loadItemBib = function(itemKey, style) {\n\tlog.debug('Zotero.Library.loadItemBib', 3);\n\tvar library = this;\n\tvar urlconfig = {\n\t\t'target':'item',\n\t\t'libraryType':library.libraryType,\n\t\t'libraryID':library.libraryID,\n\t\t'itemKey':itemKey,\n\t\t'content':'bib'\n\t};\n\tif(style){\n\t\turlconfig['style'] = style;\n\t}\n\t\n\tvar itemBibPromise = library.ajaxRequest(urlconfig)\n\t.then(function(response){\n\t\tvar item = new Zotero.Item(response.data);\n\t\tvar bibContent = item.apiObj.bib;\n\t\treturn bibContent;\n\t});\n\t\n\treturn itemBibPromise;\n};\n\n//load library settings from Zotero API and return a promise that gets resolved with\n//the Zotero.Preferences object for this library\nLibrary.prototype.loadSettings = function() {\n\tlog.debug('Zotero.Library.loadSettings', 3);\n\tvar library = this;\n\tvar urlconfig = {\n\t\t'target':'settings',\n\t\t'libraryType':library.libraryType,\n\t\t'libraryID':library.libraryID\n\t};\n\t\n\treturn library.ajaxRequest(urlconfig)\n\t.then(function(response){\n\t\tvar resultObject;\n\t\tif(typeof response.data == 'string'){\n\t\t\tresultObject = JSON.parse(response.data);\n\t\t}\n\t\telse {\n\t\t\tresultObject = response.data;\n\t\t}\n\t\t//save the full settings object so we have it available if we need to write,\n\t\t//even if it has settings we don't use or know about\n\t\tlibrary.preferences.setPref('settings', resultObject);\n\t\t\n\t\t//pull out the settings we know we care about so we can query them directly\n\t\tif(resultObject.tagColors){\n\t\t\tvar tagColors = resultObject.tagColors.value;\n\t\t\tlibrary.preferences.setPref('tagColors', tagColors);\n\t\t\t/*\n\t\t\tfor(var i = 0; i < tagColors.length; i++){\n\t\t\t\tvar t = library.tags.getTag(tagColors[i].name);\n\t\t\t\tif(t){\n\t\t\t\t\tt.color = tagColors[i].color;\n\t\t\t\t}\n\t\t\t}\n\t\t\t*/\n\t\t}\n\t\t\n\t\tlibrary.trigger('settingsLoaded');\n\t\treturn library.preferences;\n\t});\n};\n\n//take an array of tags and return subset of tags that should be colored, along with\n//the colors they should be\nLibrary.prototype.matchColoredTags = function(tags) {\n\tvar library = this;\n\tvar i;\n\tvar tagColorsSettings = library.preferences.getPref('tagColors');\n\tif(!tagColorsSettings) return [];\n\t\n\tvar tagColorsMap = {};\n\tfor(i = 0; i < tagColorsSettings.length; i++){\n\t\ttagColorsMap[tagColorsSettings[i].name.toLowerCase()] = tagColorsSettings[i].color;\n\t}\n\tvar resultTags = [];\n\t\n\tfor(i = 0; i < tags.length; i++){\n\t\tif(tagColorsMap.hasOwnProperty(tags[i]) ) {\n\t\t\tresultTags.push(tagColorsMap[tags[i]]);\n\t\t}\n\t}\n\treturn resultTags;\n};\n\n/**\n * Duplicate existing Items from this library and save to foreignLibrary\n * with relationships indicating the ties. At time of writing, Zotero client\n * saves the relationship with either the destination group of two group\n * libraries or the personal library.\n * @param  {Zotero.Item[]} items\n * @param  {Zotero.Library} foreignLibrary\n * @return {Promise.Zotero.Item[]} - newly created items\n */\nLibrary.prototype.sendToLibrary = function(items, foreignLibrary){\n\tvar foreignItems = [];\n\tfor(var i = 0; i < items.length; i++){\n\t\tvar item = items[i];\n\t\tvar transferData = item.emptyJsonItem();\n\t\ttransferData.data = Z.extend({}, items[i].apiObj.data);\n\t\t//clear data that shouldn't be transferred:itemKey, collections\n\t\ttransferData.data.key = '';\n\t\ttransferData.data.version = 0;\n\t\ttransferData.data.collections = [];\n\t\tdelete transferData.data.dateModified;\n\t\tdelete transferData.data.dateAdded;\n\t\t\n\t\tvar newForeignItem = new Zotero.Item(transferData);\n\t\t\n\t\tnewForeignItem.pristine = Z.extend({}, newForeignItem.apiObj);\n\t\tnewForeignItem.initSecondaryData();\n\t\t\n\t\t//set relationship to tie to old item\n\t\tif(!newForeignItem.apiObj.data.relations){\n\t\t\tnewForeignItem.apiObj.data.relations = {};\n\t\t}\n\t\tnewForeignItem.apiObj.data.relations['owl:sameAs'] = Zotero.url.relationUrl(item.owningLibrary.libraryType, item.owningLibrary.libraryID, item.key);\n\t\tforeignItems.push(newForeignItem);\n\t}\n\treturn foreignLibrary.items.writeItems(foreignItems);\n};\n\n/*METHODS FOR WORKING WITH THE ENTIRE LIBRARY -- NOT FOR GENERAL USE */\n\n//sync pull:\n//upload changed data\n// get updatedVersions for collections\n// get updatedVersions for searches\n// get upatedVersions for items\n// (sanity check versions we have for individual objects?)\n// loadCollectionsFromKeys\n// loadSearchesFromKeys\n// loadItemsFromKeys\n// process updated objects:\n//      ...\n// getDeletedData\n// process deleted\n// checkConcurrentUpdates (compare Last-Modified-Version from collections?newer request to one from /deleted request)\n\nLibrary.prototype.updatedVersions = function(target='items', version=this.libraryVersion){\n\tlog.debug('Library.updatedVersions', 3);\n\tvar library = this;\n\tvar urlconf = {\n\t\ttarget: target,\n\t\tformat: 'versions',\n\t\tlibraryType: library.libraryType,\n\t\tlibraryID: library.libraryID,\n\t\tsince: version\n\t};\n\treturn library.ajaxRequest(urlconf);\n};\n\n//Download and save information about every item in the library\n//keys is an array of itemKeys from this library that we need to download\nLibrary.prototype.loadItemsFromKeys = function(keys){\n\tlog.debug('Zotero.Library.loadItemsFromKeys', 3);\n\tvar library = this;\n\treturn library.loadFromKeys(keys, 'items');\n};\n\n//keys is an array of collectionKeys from this library that we need to download\nLibrary.prototype.loadCollectionsFromKeys = function(keys){\n\tlog.debug('Zotero.Library.loadCollectionsFromKeys', 3);\n\tvar library = this;\n\treturn library.loadFromKeys(keys, 'collections');\n};\n\n//keys is an array of searchKeys from this library that we need to download\nLibrary.prototype.loadSeachesFromKeys = function(keys){\n\tlog.debug('Zotero.Library.loadSearchesFromKeys', 3);\n\tvar library = this;\n\treturn library.loadFromKeys(keys, 'searches');\n};\n\nLibrary.prototype.loadFromKeys = function(keys, objectType){\n\tlog.debug('Zotero.Library.loadFromKeys', 3);\n\tif(!objectType) objectType = 'items';\n\tvar library = this;\n\tvar keyslices = [];\n\twhile(keys.length > 0){\n\t\tkeyslices.push(keys.splice(0, 50));\n\t}\n\t\n\tvar requestObjects = [];\n\tkeyslices.forEach(function(keyslice){\n\t\tvar keystring = keyslice.join(',');\n\t\tswitch (objectType) {\n\t\t\tcase 'items':\n\t\t\t\trequestObjects.push({\n\t\t\t\t\turl: {\n\t\t\t\t\t\t'target':'items',\n\t\t\t\t\t\t'targetModifier':null,\n\t\t\t\t\t\t'itemKey':keystring,\n\t\t\t\t\t\t'limit':50,\n\t\t\t\t\t\t'libraryType':library.libraryType,\n\t\t\t\t\t\t'libraryID':library.libraryID\n\t\t\t\t\t},\n\t\t\t\t\ttype: 'GET',\n\t\t\t\t\tsuccess: library.processLoadedItems.bind(library)\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase 'collections':\n\t\t\t\trequestObjects.push({\n\t\t\t\t\turl: {\n\t\t\t\t\t\t'target':'collections',\n\t\t\t\t\t\t'targetModifier':null,\n\t\t\t\t\t\t'collectionKey':keystring,\n\t\t\t\t\t\t'limit':50,\n\t\t\t\t\t\t'libraryType':library.libraryType,\n\t\t\t\t\t\t'libraryID':library.libraryID\n\t\t\t\t\t},\n\t\t\t\t\ttype: 'GET',\n\t\t\t\t\tsuccess: library.processLoadedCollections.bind(library)\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase 'searches':\n\t\t\t\trequestObjects.push({\n\t\t\t\t\turl: {\n\t\t\t\t\t\t'target':'searches',\n\t\t\t\t\t\t'targetModifier':null,\n\t\t\t\t\t\t'searchKey':keystring,\n\t\t\t\t\t\t'limit':50,\n\t\t\t\t\t\t'libraryType':library.libraryType,\n\t\t\t\t\t\t'libraryID':library.libraryID\n\t\t\t\t\t},\n\t\t\t\t\ttype: 'GET'\n\t\t\t\t\t//success: library.processLoadedSearches.bind(library)\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t}\n\t});\n\t\n\tvar promises = [];\n\tfor(var i = 0; i < requestObjects.length; i++){\n\t\tpromises.push(Zotero.net.queueRequest(requestObjects[i]));\n\t}\n\treturn Promise.all(promises);\n\t/*\n\treturn Zotero.net.queueRequest(requestObjects);\n\t*/\n};\n\n//publishes: displayedItemsUpdated\n//assume we have up to date information about items in indexeddb.\n//build a list of indexedDB filter requests to then intersect to get final result\nLibrary.prototype.buildItemDisplayView = function(params) {\n\tlog.debug('Zotero.Library.buildItemDisplayView', 3);\n\tlog.debug(params, 4);\n\t//start with list of all items if we don't have collectionKey\n\t//otherwise get the list of items in that collection\n\tvar library = this;\n\t//short-circuit if we don't have an initialized IDB yet\n\tif(!library.idbLibrary.db){\n\t\treturn Promise.resolve([]);\n\t}\n\t\n\tvar filterPromises = [];\n\tif(params.collectionKey){\n\t\tif(params.collectionKey == 'trash'){\n\t\t\tfilterPromises.push(library.idbLibrary.filterItems('deleted', 1));\n\t\t}\n\t\telse{\n\t\t\tfilterPromises.push(library.idbLibrary.filterItems('collectionKeys', params.collectionKey));\n\t\t}\n\t}\n\telse {\n\t\tfilterPromises.push(library.idbLibrary.getOrderedItemKeys('title'));\n\t}\n\t\n\t//filter by selected tags\n\tvar selectedTags = params.tag || [];\n\tif(typeof selectedTags == 'string') selectedTags = [selectedTags];\n\tfor(var i = 0; i < selectedTags.length; i++){\n\t\tlog.debug('adding selected tag filter', 3);\n\t\tfilterPromises.push(library.idbLibrary.filterItems('itemTagStrings', selectedTags[i]));\n\t}\n\t\n\t//TODO: filter by search term. \n\t//(need full text array or to decide what we're actually searching on to implement this locally)\n\t\n\t//when all the filters have been applied, combine and sort\n\treturn Promise.all(filterPromises)\n\t.then(function(results){\n\t\tvar i;\n\t\tfor(i = 0; i < results.length; i++){\n\t\t\tlog.debug('result from filterPromise: ' + results[i].length, 3);\n\t\t\tlog.debug(results[i], 3);\n\t\t}\n\t\tvar finalItemKeys = library.idbLibrary.intersectAll(results);\n\t\tvar itemsArray = library.items.getItems(finalItemKeys);\n\t\t\n\t\tlog.debug('All filters applied - Down to ' + itemsArray.length + ' items displayed', 3);\n\t\t\n\t\tlog.debug('remove child items and, if not viewing trash, deleted items', 3);\n\t\tvar displayItemsArray = [];\n\t\tfor(i = 0; i < itemsArray.length; i++){\n\t\t\tif(itemsArray[i].apiObj.data.parentItem){\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t\n\t\t\tif(params.collectionKey != 'trash' && itemsArray[i].apiObj.deleted){\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t\n\t\t\tdisplayItemsArray.push(itemsArray[i]);\n\t\t}\n\t\t\n\t\t//sort displayedItemsArray by given or configured column\n\t\tvar orderCol = params['order'] || 'title';\n\t\tvar sort = params['sort'] || 'asc';\n\t\tlog.debug('Sorting by ' + orderCol + ' - ' + sort, 3);\n\t\t\n\t\tvar comparer = Zotero.Library.prototype.comparer();\n\t\t\n\t\tdisplayItemsArray.sort(function(a, b){\n\t\t\tvar aval = a.get(orderCol);\n\t\t\tvar bval = b.get(orderCol);\n\t\t\t\n\t\t\treturn comparer(aval, bval);\n\t\t});\n\t\t\n\t\tif(sort == 'desc'){\n\t\t\tlog.debug('sort is desc - reversing array', 4);\n\t\t\tdisplayItemsArray.reverse();\n\t\t}\n\t\t\n\t\t//publish event signalling we're done\n\t\tlog.debug('triggering publishing displayedItemsUpdated', 3);\n\t\tlibrary.trigger('displayedItemsUpdated');\n\t\treturn displayItemsArray;\n\t});\n};\n\nLibrary.prototype.trigger = function(eventType, data){\n\tvar library = this;\n\tZotero.trigger(eventType, data, library.libraryString);\n};\n\nLibrary.prototype.listen = function(events, handler, data){\n\tvar library = this;\n\tvar filter = library.libraryString;\n\tZotero.listen(events, handler, data, filter);\n};\n\n//CollectionFunctions\nLibrary.prototype.processLoadedCollections = function(response){\n\tlog.debug('processLoadedCollections', 3);\n\tvar library = this;\n\t\n\t//clear out display items\n\tlog.debug('adding collections to library.collections', 3);\n\tvar collectionsAdded = library.collections.addCollectionsFromJson(response.data);\n\tfor (var i = 0; i < collectionsAdded.length; i++) {\n\t\tcollectionsAdded[i].associateWithLibrary(library);\n\t}\n\t//update sync state\n\tlibrary.collections.updateSyncState(response.lastModifiedVersion);\n\t\n\tZotero.trigger('loadedCollectionsProcessed', {library:library, collectionsAdded:collectionsAdded});\n\treturn response;\n};\n\n//create+write a collection given a name and optional parentCollectionKey\nLibrary.prototype.addCollection = function(name, parentCollection){\n\tlog.debug('Zotero.Library.addCollection', 3);\n\tvar library = this;\n\t\n\tvar collection = new Zotero.Collection();\n\tcollection.associateWithLibrary(library);\n\tcollection.set('name', name);\n\tcollection.set('parentCollection', parentCollection);\n\t\n\treturn library.collections.writeCollections([collection]);\n};\n\n//ItemFunctions\n//make request for item keys and return jquery ajax promise\nLibrary.prototype.fetchItemKeys = function(config={}){\n\tlog.debug('Zotero.Library.fetchItemKeys', 3);\n\tvar library = this;\n\tvar urlconfig = Z.extend(true, {\n\t\t'target':'items',\n\t\t'libraryType':this.libraryType,\n\t\t'libraryID':this.libraryID,\n\t\t'format':'keys'\n\t}, config);\n\t\n\treturn library.ajaxRequest(urlconfig);\n};\n\n//get keys of all items marked for deletion\nLibrary.prototype.getTrashKeys = function(){\n\tlog.debug('Zotero.Library.getTrashKeys', 3);\n\tvar library = this;\n\tvar urlconfig = {\n\t\t'target': 'items',\n\t\t'libraryType': library.libraryType,\n\t\t'libraryID': library.libraryID,\n\t\t'format': 'keys',\n\t\t'collectionKey': 'trash'\n\t};\n\t\n\treturn library.ajaxRequest(urlconfig);\n};\n\nLibrary.prototype.emptyTrash = function(){\n\tlog.debug('Zotero.Library.emptyTrash', 3);\n\tvar library = this;\n\treturn library.getTrashKeys()\n\t.then(function(response){\n\t\tvar trashedItemKeys = response.data.split('\\n');\n\t\treturn library.items.deleteItems(trashedItemKeys, response.lastModifiedVersion);\n\t});\n};\n\nLibrary.prototype.loadItemKeys = function(config){\n\tlog.debug('Zotero.Library.loadItemKeys', 3);\n\tvar library = this;\n\treturn this.fetchItemKeys(config)\n\t.then(function(response){\n\t\tlog.debug('loadItemKeys proxied callback', 3);\n\t\tvar keys = response.data.split(/[\\s]+/);\n\t\tlibrary.itemKeys = keys;\n\t});\n};\n\nLibrary.prototype.loadItems = function(config){\n\tlog.debug('Zotero.Library.loadItems', 3);\n\tvar library = this;\n\tif(!config){\n\t\tconfig = {};\n\t}\n\t\n\tvar defaultConfig = {\n\t\ttarget:'items',\n\t\ttargetModifier: 'top',\n\t\tstart: 0,\n\t\tlimit: 25,\n\t\torder: Zotero.config.defaultSortColumn,\n\t\tsort: Zotero.config.defaultSortOrder\n\t};\n\t\n\t//Build config object that should be displayed next and compare to currently displayed\n\tvar newConfig = Z.extend({}, defaultConfig, config);\n\t//newConfig.start = parseInt(newConfig.limit, 10) * (parseInt(newConfig.itemPage, 10) - 1);\n\t\n\tvar urlconfig = Z.extend({\n\t\t'target':'items',\n\t\t'libraryType':library.libraryType,\n\t\t'libraryID':library.libraryID\n\t}, newConfig);\n\tvar requestUrl = Zotero.ajax.apiRequestString(urlconfig);\n\t\n\treturn library.ajaxRequest(requestUrl)\n\t.then(function(response){\n\t\tlog.debug('loadItems proxied callback', 3);\n\t\t//var library = this;\n\t\tvar items = library.items;\n\t\t//clear out display items\n\t\tvar loadedItemsArray = items.addItemsFromJson(response.data);\n\t\tfor (let i = 0; i < loadedItemsArray.length; i++) {\n\t\t\tloadedItemsArray[i].associateWithLibrary(library);\n\t\t}\n\t\t\n\t\tresponse.loadedItems = loadedItemsArray;\n\t\tZotero.trigger('itemsChanged', {library:library});\n\t\treturn response;\n\t});\n};\n\nLibrary.prototype.loadPublications = function(config){\n\tlog.debug('Zotero.Library.loadPublications', 3);\n\tvar library = this;\n\tif(!config){\n\t\tconfig = {};\n\t}\n\t\n\tvar defaultConfig = {\n\t\ttarget:'publications',\n\t\tstart: 0,\n\t\tlimit: 50,\n\t\torder: Zotero.config.defaultSortColumn,\n\t\tsort: Zotero.config.defaultSortOrder,\n\t\tinclude: 'bib'\n\t};\n\t\n\t//Build config object that should be displayed next and compare to currently displayed\n\tvar newConfig = Z.extend({}, defaultConfig, config);\n\t\n\tvar urlconfig = Z.extend({\n\t\t'target':'publications',\n\t\t'libraryType':library.libraryType,\n\t\t'libraryID':library.libraryID\n\t}, newConfig);\n\tvar requestUrl = Zotero.ajax.apiRequestString(urlconfig);\n\t\n\treturn library.ajaxRequest(requestUrl)\n\t.then(function(response){\n\t\tlog.debug('loadPublications proxied callback', 3);\n\t\tvar publicationItems = [];\n\t\tvar parsedItemJson = response.data;\n\t\tparsedItemJson.forEach(function(itemObj){\n\t\t\tvar item = new Zotero.Item(itemObj);\n\t\t\tpublicationItems.push(item);\n\t\t});\n\t\t\n\t\tresponse.publicationItems = publicationItems;\n\t\treturn response;\n\t});\n};\n\nLibrary.prototype.processLoadedItems = function(response){\n\tlog.debug('processLoadedItems', 3);\n\tvar library = this;\n\tvar items = library.items;\n\t//clear out display items\n\tvar loadedItemsArray = items.addItemsFromJson(response.data);\n\tfor (var i = 0; i < loadedItemsArray.length; i++) {\n\t\tloadedItemsArray[i].associateWithLibrary(library);\n\t}\n\t\n\t//update sync state\n\tlibrary.items.updateSyncState(response.lastModifiedVersion);\n\t\n\tZotero.trigger('itemsChanged', {library:library, loadedItems:loadedItemsArray});\n\treturn response;\n};\n\nLibrary.prototype.loadItem = function(itemKey) {\n\tlog.debug('Zotero.Library.loadItem', 3);\n\tvar library = this;\n\tif(!config){\n\t\tvar config = {};\n\t}\n\t\n\tvar urlconfig = {\n\t\t'target':'item',\n\t\t'libraryType':library.libraryType,\n\t\t'libraryID':library.libraryID,\n\t\t'itemKey':itemKey\n\t};\n\t\n\treturn library.ajaxRequest(urlconfig)\n\t.then(function(response){\n\t\tlog.debug('Got loadItem response', 3);\n\t\tvar item = new Zotero.Item(response.data);\n\t\titem.owningLibrary = library;\n\t\tlibrary.items.itemObjects[item.key] = item;\n\t\tZotero.trigger('itemsChanged', {library:library});\n\t\treturn(item);\n\t},\n\tfunction(response){\n\t\tlog.warn('Error loading Item');\n\t});\n};\n\nLibrary.prototype.trashItem = function(itemKey){\n\tvar library = this;\n\treturn library.items.trashItems([library.items.getItem(itemKey)]);\n};\n\nLibrary.prototype.untrashItem = function(itemKey){\n\tlog.debug('Zotero.Library.untrashItem', 3);\n\tif(!itemKey) return false;\n\t\n\tvar item = this.items.getItem(itemKey);\n\titem.apiObj.deleted = 0;\n\treturn item.writeItem();\n};\n\nLibrary.prototype.deleteItem = function(itemKey){\n\tlog.debug('Zotero.Library.deleteItem', 3);\n\tvar library = this;\n\treturn library.items.deleteItem(itemKey);\n};\n\nLibrary.prototype.deleteItems = function(itemKeys){\n\tlog.debug('Zotero.Library.deleteItems', 3);\n\tvar library = this;\n\treturn library.items.deleteItems(itemKeys);\n};\n\nLibrary.prototype.addNote = function(itemKey, note){\n\tlog.debug('Zotero.Library.prototype.addNote', 3);\n\tvar library = this;\n\tvar config = {\n\t\t'target':'children',\n\t\t'libraryType':library.libraryType,\n\t\t'libraryID':library.libraryID,\n\t\t'itemKey':itemKey\n\t};\n\t\n\tvar requestUrl = Zotero.ajax.apiRequestString(config);\n\tvar item = this.items.getItem(itemKey);\n\t\n\treturn library.ajaxRequest(requestUrl, 'POST', {processData: false});\n};\n\nLibrary.prototype.fetchGlobalItems = function(config){\n\tlog.debug('Zotero.Library.fetchGlobalItems', 3);\n\tvar library = this;\n\tif(!config){\n\t\tconfig = {};\n\t}\n\t\n\tvar defaultConfig = {\n\t\ttarget:'items',\n\t\tstart: 0,\n\t\tlimit: 25\n\t};\n\t\n\t//Build config object that should be displayed next and compare to currently displayed\n\tvar newConfig = Z.extend({}, defaultConfig, config);\n\t//newConfig.start = parseInt(newConfig.limit, 10) * (parseInt(newConfig.itemPage, 10) - 1);\n\t\n\tvar urlconfig = Z.extend({'target':'items', 'libraryType': ''}, newConfig);\n\tvar requestUrl = Zotero.ajax.apiRequestString(urlconfig);\n\t\n\treturn library.ajaxRequest(requestUrl, 'GET', {dataType:'json'})\n\t.then(function(response){\n\t\tlog.debug('globalItems callback', 3);\n\t\treturn(response.data);\n\t});\n};\n\nLibrary.prototype.fetchGlobalItem = function(globalKey){\n\tlog.debug('Zotero.Library.fetchGlobalItem', 3);\n\tlog.debug(globalKey, 3);\n\tvar library = this;\n\t\n\tvar defaultConfig = {target:'item'};\n\t\n\t//Build config object that should be displayed next and compare to currently displayed\n\tvar newConfig = Z.extend({}, defaultConfig);\n\tvar urlconfig = Z.extend({\n\t\t'target':'item',\n\t\t'libraryType': '',\n\t\t'itemKey': globalKey\n\t}, newConfig);\n\tvar requestUrl = Zotero.ajax.apiRequestString(urlconfig);\n\t\n\treturn library.ajaxRequest(requestUrl, 'GET', {dataType:'json'})\n\t.then(function(response){\n\t\tlog.debug('globalItem callback', 3);\n\t\treturn(response.data);\n\t});\n};\n\n//TagFunctions\nLibrary.prototype.fetchTags = function(config){\n\tlog.debug('Zotero.Library.fetchTags', 3);\n\tvar library = this;\n\tvar defaultConfig = {\n\t\ttarget:'tags',\n\t\torder:'title',\n\t\tsort:'asc',\n\t\tlimit: 100\n\t};\n\tvar newConfig = Z.extend({}, defaultConfig, config);\n\tvar urlconfig = Z.extend({\n\t\t'target':'tags',\n\t\t'libraryType':this.libraryType,\n\t\t'libraryID':this.libraryID\n\t}, newConfig);\n\t\n\treturn Zotero.ajaxRequest(urlconfig);\n};\n\nLibrary.prototype.loadTags = function(config={}){\n\tlog.debug('Zotero.Library.loadTags', 3);\n\tvar library = this;\n\t\n\tif(config.showAutomaticTags && config.collectionKey){\n\t\tdelete config.collectionKey;\n\t}\n\t\n\tlibrary.tags.displayTagsArray = [];\n\treturn library.fetchTags(config)\n\t.then(function(response){\n\t\tlog.debug('loadTags proxied callback', 3);\n\t\tvar updatedVersion = response.lastModifiedVersion;\n\t\tlibrary.tags.updateSyncState(updatedVersion);\n\t\tvar addedTags = library.tags.addTagsFromJson(response.data);\n\t\tlibrary.tags.updateTagsVersion(updatedVersion);\n\t\tlibrary.tags.rebuildTagsArray();\n\t\t\n\t\tif(response.parsedLinks.hasOwnProperty('next')){\n\t\t\tlibrary.tags.hasNextLink = true;\n\t\t\tlibrary.tags.nextLink = response.parsedLinks['next'];\n\t\t}\n\t\telse{\n\t\t\tlibrary.tags.hasNextLink = false;\n\t\t\tlibrary.tags.nextLink = null;\n\t\t}\n\t\tlibrary.trigger('tagsChanged', {library:library});\n\t\treturn library.tags;\n\t});\n};\n\n\nLibrary.prototype.loadAllTags = function(config={}){\n\tlog.debug('Zotero.Library.loadAllTags', 3);\n\tvar library = this;\n\tvar defaultConfig = {\n\t\ttarget:'tags',\n\t\torder:'title',\n\t\tsort:'asc',\n\t\tlimit: 100,\n\t\tlibraryType:library.libraryType,\n\t\tlibraryID:library.libraryID\n\t};\n\t\n\t//Build config object that should be displayed next and compare to currently displayed\n\tvar newConfig = Z.extend({}, defaultConfig, config);\n\tvar urlconfig = Z.extend({}, newConfig);\n\tvar requestUrl = Zotero.ajax.apiRequestString(urlconfig);\n\tvar tags = library.tags;\n\t\n\t//check if already loaded tags are okay to use\n\tvar loadedConfig = Z.extend({}, defaultConfig, tags.loadedConfig);\n\tvar loadedConfigRequestUrl = tags.loadedRequestUrl;\n\tlog.debug('requestUrl: ' + requestUrl, 4);\n\tlog.debug('loadedConfigRequestUrl: ' + loadedConfigRequestUrl, 4);\n\treturn new Promise(function(resolve, reject){\n\t\tvar continueLoadingCallback = function(tags){\n\t\t\tlog.debug('loadAllTags continueLoadingCallback', 3);\n\t\t\tvar plainList = Zotero.Tags.prototype.plainTagsList(tags.tagsArray);\n\t\t\tplainList.sort(Library.prototype.comparer());\n\t\t\ttags.plainList = plainList;\n\t\t\t\n\t\t\tif(tags.hasNextLink){\n\t\t\t\tlog.debug('still has next link.', 3);\n\t\t\t\ttags.tagsArray.sort(Zotero.Tag.prototype.tagComparer());\n\t\t\t\tplainList = Zotero.Tags.prototype.plainTagsList(tags.tagsArray);\n\t\t\t\tplainList.sort(Library.prototype.comparer());\n\t\t\t\ttags.plainList = plainList;\n\t\t\t\t\n\t\t\t\tvar nextLink = tags.nextLink;\n\t\t\t\tvar nextLinkConfig = Zotero.utils.parseQuery(Zotero.utils.querystring(nextLink));\n\t\t\t\tvar newConfig = Z.extend({}, config);\n\t\t\t\tnewConfig.start = nextLinkConfig.start;\n\t\t\t\tnewConfig.limit = nextLinkConfig.limit;\n\t\t\t\treturn library.loadTags(newConfig).then(continueLoadingCallback);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tlog.debug('no next in tags link', 3);\n\t\t\t\ttags.updateSyncedVersion();\n\t\t\t\ttags.tagsArray.sort(Zotero.Tag.prototype.tagComparer());\n\t\t\t\tplainList = Zotero.Tags.prototype.plainTagsList(tags.tagsArray);\n\t\t\t\tplainList.sort(Library.prototype.comparer());\n\t\t\t\ttags.plainList = plainList;\n\t\t\t\tlog.debug('resolving loadTags deferred', 3);\n\t\t\t\tlibrary.tagsLoaded = true;\n\t\t\t\tlibrary.tags.loaded = true;\n\t\t\t\ttags.loadedConfig = config;\n\t\t\t\ttags.loadedRequestUrl = requestUrl;\n\t\t\t\t\n\t\t\t\t//update all tags with tagsVersion\n\t\t\t\tfor (var i = 0; i < library.tags.tagsArray.length; i++) {\n\t\t\t\t\ttags.tagsArray[i].apiObj.version = tags.tagsVersion;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlibrary.trigger('tagsChanged', {library:library});\n\t\t\t\treturn tags;\n\t\t\t}\n\t\t};\n\t\t\n\t\tresolve( library.loadTags(urlconfig)\n\t\t.then(continueLoadingCallback));\n\t});\n};\n\n//LibraryCache\n//load objects from indexedDB\nLibrary.prototype.loadIndexedDBCache = function(){\n\tlog.debug('Zotero.Library.loadIndexedDBCache', 3);\n\t\n\tvar library = this;\n\t\n\tvar itemsPromise = library.idbLibrary.getAllItems();\n\tvar collectionsPromise = library.idbLibrary.getAllCollections();\n\tvar tagsPromise = library.idbLibrary.getAllTags();\n\t\n\titemsPromise.then(function(itemsArray){\n\t\tlog.debug('loadIndexedDBCache itemsD done', 3);\n\t\t//create itemsDump from array of item objects\n\t\tvar latestItemVersion = 0;\n\t\tfor(var i = 0; i < itemsArray.length; i++){\n\t\t\tvar item = new Zotero.Item(itemsArray[i]);\n\t\t\tlibrary.items.addItem(item);\n\t\t\tif(item.version > latestItemVersion){\n\t\t\t\tlatestItemVersion = item.version;\n\t\t\t}\n\t\t}\n\t\tlibrary.items.itemsVersion = latestItemVersion;\n\t\t\n\t\t//TODO: add itemsVersion as last version in any of these items?\n\t\t//or store it somewhere else for indexedDB cache purposes\n\t\tlibrary.items.loaded = true;\n\t\tlog.debug('Done loading indexedDB items promise into library', 3);\n\t});\n\t\n\tcollectionsPromise.then(function(collectionsArray){\n\t\tlog.debug('loadIndexedDBCache collectionsD done', 3);\n\t\t//create collectionsDump from array of collection objects\n\t\tvar latestCollectionVersion = 0;\n\t\tfor(var i = 0; i < collectionsArray.length; i++){\n\t\t\tvar collection = new Zotero.Collection(collectionsArray[i]);\n\t\t\tlibrary.collections.addCollection(collection);\n\t\t\tif(collection.version > latestCollectionVersion){\n\t\t\t\tlatestCollectionVersion = collection.version;\n\t\t\t}\n\t\t}\n\t\tlibrary.collections.collectionsVersion = latestCollectionVersion;\n\t\t\n\t\t//TODO: add collectionsVersion as last version in any of these items?\n\t\t//or store it somewhere else for indexedDB cache purposes\n\t\tlibrary.collections.initSecondaryData();\n\t\tlibrary.collections.loaded = true;\n\t});\n\t\n\ttagsPromise.then(function(tagsArray){\n\t\tlog.debug('loadIndexedDBCache tagsD done', 3);\n\t\tlog.debug(tagsArray, 4);\n\t\t//create tagsDump from array of tag objects\n\t\tvar latestVersion = 0;\n\t\tvar tagsVersion = 0;\n\t\tfor(var i = 0; i < tagsArray.length; i++){\n\t\t\tvar tag = new Zotero.Tag(tagsArray[i]);\n\t\t\tlibrary.tags.addTag(tag);\n\t\t\tif(tagsArray[i].version > latestVersion){\n\t\t\t\tlatestVersion = tagsArray[i].version;\n\t\t\t}\n\t\t}\n\t\ttagsVersion = latestVersion;\n\t\tlibrary.tags.tagsVersion = tagsVersion;\n\n\t\t//TODO: add tagsVersion as last version in any of these items?\n\t\t//or store it somewhere else for indexedDB cache purposes\n\t\tlibrary.tags.loaded = true;\n\t});\n\t\n\t\n\t//resolve the overall deferred when all the child deferreds are finished\n\treturn Promise.all([itemsPromise, collectionsPromise, tagsPromise]);\n};\n\nLibrary.prototype.saveIndexedDB = function(){\n\tvar library = this;\n\t\n\tvar saveItemsPromise = library.idbLibrary.updateItems(library.items.itemsArray);\n\tvar saveCollectionsPromise = library.idbLibrary.updateCollections(library.collections.collectionsArray);\n\tvar saveTagsPromise = library.idbLibrary.updateTags(library.tags.tagsArray);\n\t\n\t//resolve the overall deferred when all the child deferreds are finished\n\treturn Promise.all([saveItemsPromise, saveCollectionsPromise, saveTagsPromise]);\n};\n\nmodule.exports = Library;\n\n","'use strict';\n\nvar ItemMaps = require('./ItemMaps.js');\n\nmodule.exports.fieldMap = ItemMaps.fieldMap;\nmodule.exports.typeMap = ItemMaps.typeMap;\nmodule.exports.creatorMap = ItemMaps.creatorMap;","'use strict';\n\nvar log = {};\n\nvar prefLevel = 1;\n\nvar debugOut;\nvar warnOut;\nvar errorOut;\n\nif(typeof console == 'undefined'){\n\tdebugOut = function(){};\n\twarnOut = function(){};\n\terrorOut = function(){};\n} else {\n\tdebugOut = function(s){\n\t\tconsole.log(s);\n\t};\n\twarnOut = function(s){\n\t\tconsole.warn(s);\n\t};\n\terrorOut = function(s){\n\t\tconsole.error(s);\n\t};\n}\n\n\nlog.SetLevel = function(level){\n\tprefLevel = level;\n};\n\nlog.debug = function(debugstring, level){\n\tif(typeof(level) !== 'number'){\n\t\tlevel = 1;\n\t}\n\tif(level <= prefLevel) {\n\t\tdebugOut(debugstring);\n\t}\n};\n\nlog.debugObject = function(obj, level){\n\tif(typeof(level) !== 'number'){\n\t\tlevel = 1;\n\t}\n\tif(level <= prefLevel) {\n\t\tdebugOut(obj);\n\t}\n};\n\nlog.warn = function(warnstring){\n\twarnOut(warnstring);\n};\n\nlog.error = function(errorstring){\n\terrorOut(errorstring);\n};\n\nlog.Logger = function(prefix, llevel=2){\n\tprefLevel = llevel;\n\treturn {\n\t\tdebug: function(debugstring, level){\n\t\t\tif(typeof debugstring == 'string'){\n\t\t\t\treturn log.debug(`${prefix}: ${debugstring}`, level);\n\t\t\t} else {\n\t\t\t\tlog.debug(`${prefix}: \\\\`, level);\n\t\t\t\tlog.debug(debugstring, level);\n\t\t\t\treturn;\n\t\t\t}\n\t\t},\n\t\twarn: function(warnstring){\n\t\t\treturn log.warn(`${prefix}: ${warnstring}`);\n\t\t},\n\t\terror: function(errorstring){\n\t\t\treturn log.error(`${prefix}: ${errorstring}`);\n\t\t}\n\t};\n};\n\nmodule.exports = log;\n","'use strict';\n\nvar log = require('./Log.js').Logger('libZotero:Net');\n\nvar Deferred = require('deferred');\n/*\n * Make concurrent and sequential network requests, respecting backoff/retry-after\n * headers, and keeping concurrent requests below a certain limit.\n * \n * Push onto the queue individual or arrays of requestConfig objects\n * If there is room for requests and we are not currently backing off:\n *   start a sequential series, or individual request\n * When any request or set of requests finishes, we preprocess the response,\n * looking for backoff/retry-after to obey, and putting sequential responses\n * into an array. We then trigger the next waiting request.\n * \n */\n\nvar Net = function() {\n\tthis.deferredQueue = [];\n\tthis.numRunning = 0;\n\tthis.numConcurrent = 3;\n\tthis.backingOff = false;\n};\n\nNet.prototype.queueDeferred = function(){\n\tvar net = this;\n\tvar d = new Deferred();\n\tnet.deferredQueue.push(d);\n\treturn Promise.resolve(d);\n};\n\nNet.prototype.queueRequest = function(requestObject){\n\tlog.debug('Zotero.Net.queueRequest', 3);\n\tvar net = this;\n\tvar resultPromise;\n\t\n\tif(Array.isArray(requestObject)){\n\t\tresultPromise = net.queueDeferred().then(function(){\n\t\t\tlog.debug('running sequential after queued deferred resolved', 4);\n\t\t\treturn net.runSequential(requestObject);\n\t\t}).then(function(response){\n\t\t\tlog.debug('runSequential done', 3);\n\t\t\tnet.queuedRequestDone();\n\t\t\treturn response;\n\t\t});\n\t}\n\telse {\n\t\tresultPromise = net.queueDeferred().then(function(){\n\t\t\tlog.debug('running concurrent after queued deferred resolved', 4);\n\t\t\treturn net.runConcurrent(requestObject);\n\t\t}).then(function(response){\n\t\t\tlog.debug('done with queuedRequest', 4);\n\t\t\tnet.queuedRequestDone();\n\t\t\treturn response;\n\t\t});\n\t}\n\t\n\tnet.runNext();\n\treturn resultPromise.catch(function(error){\n\t\tlog.error('Error before leaving Zotero.Net');\n\t\tlog.error(error);\n\t});\n};\n\nNet.prototype.runConcurrent = function(requestObject){\n\tlog.debug('Zotero.Net.runConcurrent', 3);\n\treturn this.ajaxRequest(requestObject).then(function(response){\n\t\tlog.debug('done with runConcurrent request', 3);\n\t\treturn response;\n\t});\n};\n\n//run the set of requests serially\n//chaining each request onto the .then of the previous one, after\n//adding the previous response to a responses array that will be\n//returned via promise to the caller when all requests are complete\nNet.prototype.runSequential = function(requestObjects){\n\tlog.debug('Zotero.Net.runSequential', 3);\n\tvar net = this;\n\tvar responses = [];\n\tvar seqPromise = Promise.resolve();\n\t\n\tfor(var i = 0; i < requestObjects.length; i++){\n\t\tvar requestObject = requestObjects[i];\n\t\tseqPromise = seqPromise.then(function(){\n\t\t\tvar p = net.ajaxRequest(requestObject)\n\t\t\t.then(function(response){\n\t\t\t\tlog.debug('pushing sequential response into result array', 3);\n\t\t\t\tresponses.push(response);\n\t\t\t});\n\t\t\treturn p;\n\t\t});\n\t}\n\t\n\treturn seqPromise.then(function(){\n\t\tlog.debug('done with sequential aggregator promise - returning responses', 4);\n\t\treturn responses;\n\t});\n};\n\n//when one concurrent call, or a sequential series finishes, subtract it from the running\n//count and run the next if there is something waiting to be run\nNet.prototype.individualRequestDone = function(response){\n\tlog.debug('Zotero.Net.individualRequestDone', 3);\n\tvar net = this;\n\t\n\t//check if we need to back off before making more requests\n\tvar wait = net.checkDelay(response);\n\tif(wait > 0){\n\t\tvar waitms = wait * 1000;\n\t\tnet.backingOff = true;\n\t\tvar waitExpiration = Date.now() + waitms;\n\t\tif(waitExpiration > net.waitingExpires){\n\t\t\tnet.waitingExpires = waitExpiration;\n\t\t}\n\t\tsetTimeout(net.runNext, waitms);\n\t}\n\t\n\treturn response;\n};\n\nNet.prototype.queuedRequestDone = function(response){\n\tlog.debug('queuedRequestDone', 3);\n\tvar net = this;\n\tnet.numRunning--;\n\tnet.runNext();\n\treturn response;\n};\n\nNet.prototype.runNext = function(){\n\tlog.debug('Zotero.Net.runNext', 3);\n\tvar net = this;\n\tvar nowms = Date.now();\n\t\n\t//check if we're backing off and need to remain backing off,\n\t//or if we should now continue\n\tif(net.backingOff && (net.waitingExpires > (nowms - 100)) ){\n\t\tlog.debug('currently backing off', 3);\n\t\tvar waitms = net.waitingExpires - nowms;\n\t\tsetTimeout(net.runNext, waitms);\n\t\treturn;\n\t}\n\telse if(net.backingOff && (net.waitingExpires <= (nowms - 100))){\n\t\tnet.backingOff = false;\n\t}\n\t\n\t//continue making requests up to the concurrent limit\n\tlog.debug(net.numRunning + '/' + net.numConcurrent + ' Running. ' + net.deferredQueue.length + ' queued.', 3);\n\twhile((net.deferredQueue.length > 0) && (net.numRunning < net.numConcurrent)){\n\t\tnet.numRunning++;\n\t\tvar nextD = net.deferredQueue.shift();\n\t\tnextD.resolve();\n\t\tlog.debug(net.numRunning + '/' + net.numConcurrent + ' Running. ' + net.deferredQueue.length + ' queued.', 3);\n\t}\n};\n\nNet.prototype.checkDelay = function(response){\n\tlog.debug('Zotero.Net.checkDelay', 4);\n\tvar net = this;\n\tvar wait = 0;\n\tif(Array.isArray(response)){\n\t\tfor(var i = 0; i < response.length; i++){\n\t\t\tvar iwait = net.checkDelay(response[i]);\n\t\t\tif(iwait > wait){\n\t\t\t\twait = iwait;\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tif(response.status == 429){\n\t\t\twait = response.retryAfter;\n\t\t}\n\t\telse if(response.backoff){\n\t\t\twait = response.backoff;\n\t\t}\n\t}\n\treturn wait;\n};\n\nNet.prototype.ajaxRequest = function(requestConfig){\n\tlog.debug('Zotero.Net.ajaxRequest', 3);\n\tvar net = this;\n\tvar defaultConfig = {\n\t\ttype:'GET',\n\t\theaders:{\n\t\t\t'Zotero-API-Version': Zotero.config.apiVersion,\n\t\t\t'Content-Type': 'application/json'\n\t\t},\n\t\tsuccess: function(response){\n\t\t\treturn response;\n\t\t},\n\t\terror: function(response){\n\t\t\tlog.error('ajaxRequest rejected:' + response.jqxhr.status + ' - ' + response.jqxhr.responseText);\n\t\t\treturn response;\n\t\t}\n\t\t//cache:false\n\t};\n\tvar headers = Z.extend({}, defaultConfig.headers, requestConfig.headers);\n\tvar config = Z.extend({}, defaultConfig, requestConfig);\n\tconfig.headers = headers;\n\tif(typeof config.url == 'object'){\n\t\tconfig.url = Zotero.ajax.apiRequestString(config.url);\n\t}\n\tconfig.url = Zotero.ajax.proxyWrapper(config.url, config.type);\n\t\n\tif(!config.url){\n\t\tthrow 'No url specified in Zotero.Net.ajaxRequest';\n\t}\n\t//rename success/error callbacks so J.ajax does not actually use them\n\t//and we can use them as es6 promise result functions with expected\n\t//single value arguments\n\tconfig.zsuccess = config.success;\n\tconfig.zerror = config.error;\n\tdelete config.success;\n\tdelete config.error;\n\t\n\tlog.debug('AJAX config', 4);\n\tlog.debug(config, 4);\n\tvar ajaxpromise = new Promise(function(resolve, reject){\n\t\tnet.ajax(config)\n\t\t.then(function(request){\n\t\t\tvar data;\n\n\t\t\tif(request.responseType == 'json'\n\t\t\t\t|| (request.responseType === '' && request.getResponseHeader('content-type') === 'application/json')\n\t\t\t) {\n\t\t\t\ttry{\n\t\t\t\t\t\tdata = JSON.parse(request.response);\n\t\t\t\t\t} catch(err) {\n\t\t\t\t\t\tdata = request.response;\n\t\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdata = request.response;\n\t\t\t}\n\t\t\t\n\t\t\tvar r = new Zotero.ApiResponse({\n\t\t\t\tjqxhr: request,\n\t\t\t\tdata: data,\n\t\t\t\ttextStatus: request.responseText\n\t\t\t});\n\t\t\tresolve(r);\n\t\t}, function(request){\n\t\t\tvar r = new Zotero.ApiResponse({\n\t\t\t\tjqxhr: request,\n\t\t\t\ttextStatus: request.responseText,\n\t\t\t\tisError: true\n\t\t\t});\n\t\t\treject(r);\n\t\t});\n\t})\n\t.then(net.individualRequestDone.bind(net))\n\t.then(function(response){\n\t\t//now that we're done handling, reject\n\t\tif(response.isError){\n\t\t\tlog.error('re-throwing ApiResponse that was a rejection');\n\t\t\tthrow response;\n\t\t}\n\t\treturn response;\n\t})\n\t.then(config.zsuccess, config.zerror);\n\t\n\treturn ajaxpromise;\n};\n\nNet.prototype.ajax = function(config){\n\tconfig = Zotero.extend({type:'GET'}, config);\n\tvar promise = new Promise(function(resolve, reject){\n\t\tvar req = new XMLHttpRequest();\n\t\tvar uri = config.url;\n\t\treq.open(config.type, uri);\n\t\t\n\t\tif(config.headers){\n\t\t\tObject.keys(config.headers).forEach(function(key){\n\t\t\t\tvar val = config.headers[key];\n\t\t\t\treq.setRequestHeader(key, val);\n\t\t\t});\n\t\t}\n\n\t\treq.send(config.data);\n\n\t\treq.onload = function(){\n\t\t\tlog.debug('XMLHttpRequest done', 4);\n\t\t\tlog.debug(req, 4);\n\t\t\tif (req.status >= 200 && req.status < 300) {\n\t\t\t\tlog.debug('200-300 response: resolving Net.ajax promise', 3);\n\t\t\t\t// Performs the function \"resolve\" when this.status is equal to 2xx\n\t\t\t\tresolve(req);\n\t\t\t} else {\n\t\t\t\tlog.debug('not 200-300 response: rejecting Net.ajax promise', 3);\n\t\t\t\t// Performs the function \"reject\" when this.status is different than 2xx\n\t\t\t\treject(req);\n\t\t\t}\n\t\t};\n\t\treq.onerror = function() {\n\t\t\treject(req);\n\t\t};\n\t});\n\n\treturn promise;\n};\n\nmodule.exports = new Net();\n","'use strict';\n\nvar log = require('./Log.js').Logger('libZotero:Preferences');\n\nmodule.exports = function(store, idString) {\n\tthis.store = store;\n\tthis.idString = idString;\n\tthis.preferencesObject = {};\n\tthis.defaults = {\n\t\tdebug_level: 3, //lower level is higher priority\n\t\tdebug_log: true,\n\t\tdebug_mock: false,\n\t\tlistDisplayedFields: ['title', 'creator', 'dateModified'],\n\t\tshowAutomaticTags: false,//tagType:1 is automatic, tagType:0 was added by user\n\t\titemsPerPage: 25,\n\t\torder: 'title',\n\t\ttitle: 'asc'\n\t};\n\tthis.load();\n};\n\nmodule.exports.prototype.setPref = function(key, value) {\n\tvar preferences = this;\n\tpreferences.preferencesObject[key] = value;\n\tpreferences.persist();\n};\n\nmodule.exports.prototype.setPrefs = function(newPrefs) {\n\tvar preferences = this;\n\tif(typeof(newPrefs) != 'object') {\n\t\tthrow new Error('Preferences must be an object');\n\t}\n\tpreferences.preferencesObject = newPrefs;\n\tpreferences.persist();\n};\n\nmodule.exports.prototype.getPref = function(key){\n\tvar preferences = this;\n\tif(preferences.preferencesObject[key]){\n\t\treturn preferences.preferencesObject[key];\n\t}\n\telse if(preferences.defaults[key]){\n\t\treturn preferences.defaults[key];\n\t}\n\telse {\n\t\treturn null;\n\t}\n};\n\nmodule.exports.prototype.getPrefs = function(){\n\tvar preferences = this;\n\treturn preferences.preferencesObject;\n};\n\nmodule.exports.prototype.persist = function(){\n\tvar preferences = this;\n\tvar storageString = 'preferences_' + preferences.idString;\n\tpreferences.store[storageString] = JSON.stringify(preferences.preferencesObject);\n};\n\nmodule.exports.prototype.load = function(){\n\tvar preferences = this;\n\tvar storageString = 'preferences_' + preferences.idString;\n\tvar storageObjectString = preferences.store[storageString];\n\tif(!storageObjectString){\n\t\tpreferences.preferencesObject = {};\n\t}\n\telse {\n\t\tpreferences.preferencesObject = JSON.parse(storageObjectString);\n\t}\n};\n","'use strict';\n\nvar log = require('./Log.js').Logger('libZotero:Search');\n\nmodule.exports = function(){\n\tthis.instance = 'Zotero.Search';\n\tthis.searchObject = {};\n};\n","'use strict';\n\nvar log = require('./Log.js').Logger('libZotero:Searches');\n\nmodule.exports = function(){\n\tthis.instance = 'Zotero.Searches';\n\tthis.searchObjects = {};\n\tthis.syncState = {\n\t\tearliestVersion: null,\n\t\tlatestVersion: null\n\t};\n};\n","'use strict';\n\nvar log = require('./Log.js').Logger('libZotero:Tag');\n\nmodule.exports = function (tagObj) {\n\tthis.instance = 'Zotero.Tag';\n\tthis.color = null;\n\tthis.version = 0;\n\tif( typeof tagObj == 'object'){\n\t\tthis.parseJsonTag(tagObj);\n\t} else if(typeof tagObj == 'string') {\n\t\tthis.parseJsonTag(this.templateApiObj(tagObj));\n\t} else {\n\t\tthis.parseJsonTag(this.tamplateApiObj(''));\n\t}\n};\n\nmodule.exports.prototype = new Zotero.ApiObject();\n\nmodule.exports.prototype.parseJsonTag = function(tagObj) {\n\tvar tag = this;\n\ttag.apiObj = Z.extend({}, tagObj);\n\ttag.urlencodedtag = encodeURIComponent(tag.apiObj.tag);\n\ttag.version = tag.apiObj.version;\n};\n\nmodule.exports.prototype.templateApiObj = function(tagString) {\n\treturn {\n\t\ttag: tagString,\n\t\tlinks: {},\n\t\tmeta: {\n\t\t\ttype:0,\n\t\t\tnumItems:1\n\t\t}\n\t};\n};\n\nmodule.exports.prototype.tagComparer = function(){\n\tif(Intl){\n\t\tvar collator = new Intl.Collator();\n\t\treturn function(a, b){\n\t\t\treturn collator.compare(a.apiObj.tag, b.apiObj.tag);\n\t\t};\n\t} else {\n\t\treturn function(a, b) {\n\t\t\tif(a.apiObj.tag.toLocaleLowerCase() == b.apiObj.tag.toLocaleLowerCase()){\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tif(a.apiObj.tag.toLocaleLowerCase() < b.apiObj.tag.toLocaleLowerCase()){\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\treturn 1;\n\t\t};\n\t}\n};\n\nmodule.exports.prototype.set = function(key, val){\n\tvar tag = this;\n\t\n\tif(key in tag.apiObj){\n\t\ttag.apiObj[key] = val;\n\t}\n\tif(key in tag.apiObj.meta){\n\t\ttag.apiObj.meta[key] = val;\n\t}\n\t\n\tswitch (key) {\n\t\tcase 'tagVersion':\n\t\tcase 'version':\n\t\t\ttag.version = val;\n\t\t\ttag.apiObj.version = val;\n\t\t\tbreak;\n\t}\n\t\n\treturn tag;\n};\n\n","'use strict';\n\nvar log = require('./Log.js').Logger('libZotero:Tags');\n\nmodule.exports = function(jsonBody){\n\tthis.instance = 'Zotero.Tags';\n\t//represent collections as array for ordering purposes\n\tthis.tagsVersion = 0;\n\tthis.syncState = {\n\t\tearliestVersion: null,\n\t\tlatestVersion: null\n\t};\n\tthis.displayTagsArray = [];\n\tthis.displayTagsUrl = '';\n\tthis.tagObjects = {};\n\tthis.tagsArray = [];\n\tthis.loaded = false;\n\tif(jsonBody){\n\t\tthis.addTagsFromJson(jsonBody);\n\t}\n};\n\nmodule.exports.prototype = new Zotero.Container();\n\nmodule.exports.prototype.addTag = function(tag){\n\tvar tags = this;\n\ttags.tagObjects[tag.apiObj.tag] = tag;\n\ttags.tagsArray.push(tag);\n\tif(tags.owningLibrary){\n\t\ttag.associateWithLibrary(tags.owningLibrary);\n\t}\n};\n\nmodule.exports.prototype.getTag = function(tagname){\n\tvar tags = this;\n\tif(tags.tagObjects.hasOwnProperty(tagname)){\n\t\treturn this.tagObjects[tagname];\n\t}\n\treturn null;\n};\n\nmodule.exports.prototype.removeTag = function(tagname){\n\tvar tags = this;\n\tdelete tags.tagObjects[tagname];\n\ttags.updateSecondaryData();\n};\n\nmodule.exports.prototype.removeTags = function(tagnames){\n\tvar tags = this;\n\ttagnames.forEach(function(tagname){\n\t\tdelete tags.tagObjects[tagname];\n\t});\n\ttags.updateSecondaryData();\n};\n\nmodule.exports.prototype.plainTagsList = function(tagsArray){\n\tlog.debug('Zotero.Tags.plainTagsList', 3);\n\tvar plainList = [];\n\ttagsArray.forEach(function(tag){\n\t\tplainList.push(tag.apiObj.tag);\n\t});\n\treturn plainList;\n};\n\nmodule.exports.prototype.clear = function(){\n\tlog.debug('Zotero.Tags.clear', 3);\n\tthis.tagsVersion = 0;\n\tthis.syncState.earliestVersion = null;\n\tthis.syncState.latestVersion = null;\n\tthis.displayTagsArray = [];\n\tthis.displayTagsUrl = '';\n\tthis.tagObjects = {};\n\tthis.tagsArray = [];\n};\n\nmodule.exports.prototype.updateSecondaryData = function(){\n\tlog.debug('Zotero.Tags.updateSecondaryData', 3);\n\tvar tags = this;\n\ttags.tagsArray = [];\n\tObject.keys(tags.tagObjects).forEach(function(key){\n\t\tvar val = tags.tagObjects[key];\n\t\ttags.tagsArray.push(val);\n\t});\n\ttags.tagsArray.sort(Zotero.Tag.prototype.tagComparer());\n\tvar plainList = tags.plainTagsList(tags.tagsArray);\n\tplainList.sort(Zotero.Library.prototype.comparer());\n\ttags.plainList = plainList;\n};\n\nmodule.exports.prototype.updateTagsVersion = function(tagsVersion) {\n\tvar tags = this;\n\tObject.keys(tags.tagObjects).forEach(function(key){\n\t\tvar tag = tags.tagObjects[key];\n\t\ttag.set('version', tagsVersion);\n\t});\n};\n\nmodule.exports.prototype.rebuildTagsArray = function() {\n\tvar tags = this;\n\ttags.tagsArray = [];\n\tObject.keys(tags.tagObjects).forEach(function(key){\n\t\tvar tag = tags.tagObjects[key];\n\t\ttags.tagsArray.push(tag);\n\t});\n};\n\nmodule.exports.prototype.addTagsFromJson = function(jsonBody){\n\tlog.debug('Zotero.Tags.addTagsFromJson', 3);\n\tvar tags = this;\n\tvar tagsAdded = [];\n\tjsonBody.forEach(function(tagObj){\n\t\tvar tag = new Zotero.Tag(tagObj);\n\t\ttags.addTag(tag);\n\t\ttagsAdded.push(tag);\n\t});\n\treturn tagsAdded;\n};\n","'use strict';\n\nvar log = require('./Log.js').Logger('libZotero:Url');\n\n// Url.js - construct certain urls and links locally that may depend on the\n// current website's routing scheme etc. Not necessarily pointing to zotero.org\n// - href for a particular item's local representation\n// - link with appropriate text, to download file or view framed snapshot\n// - href for file download/view, depending on whether config says to download\n// directly from the api, or to proxy it\n// - displayable string describing the attachment file (attachmentFileDetails)\n// - list of urls for supported export formats\n// \n\nvar Url = {};\n\n//locally construct a url for the item on the current website\nUrl.itemHref = function(item){\n\tvar href = '';\n\thref += Zotero.config.librarySettings.libraryPathString + '/itemKey/' + item.get('key');\n\treturn href;\n};\n\n//construct a download link for an item's enclosure file that takes into\n//account size and whether the file is a snapshot\nUrl.attachmentDownloadLink = function(item){\n\tvar retString = '';\n\tvar downloadUrl = item.attachmentDownloadUrl;\n\tvar contentType = item.get('contentType');\n\t\n\tif(item.apiObj.links && item.apiObj.links['enclosure']){\n\t\tif(!item.apiObj.links['enclosure']['length'] && item.isSnapshot()){\n\t\t\t//snapshot: redirect to view\n\t\t\tretString += '<a href=\"' + downloadUrl + '\">' + 'View Snapshot</a>';\n\t\t}\n\t\telse{\n\t\t\t//file: offer download\n\t\t\tvar enctype = Zotero.utils.translateMimeType(item.apiObj.links['enclosure'].type);\n\t\t\tvar enc = item.apiObj.links['enclosure'];\n\t\t\tvar filesize = parseInt(enc['length'], 10);\n\t\t\tvar filesizeString = '' + filesize + ' B';\n\t\t\tif(filesize > 1073741824){\n\t\t\t\tfilesizeString = '' + (filesize / 1073741824).toFixed(1) + ' GB';\n\t\t\t}\n\t\t\telse if(filesize > 1048576){\n\t\t\t\tfilesizeString = '' + (filesize / 1048576).toFixed(1) + ' MB';\n\t\t\t}\n\t\t\telse if(filesize > 1024){\n\t\t\t\tfilesizeString = '' + (filesize / 1024).toFixed(1) + ' KB';\n\t\t\t}\n\t\t\tlog.debug(enctype, 3);\n\t\t\tretString += '<a href=\"' + downloadUrl + '\">';\n\t\t\tif(enctype == 'undefined' || enctype === '' || typeof enctype == 'undefined'){\n\t\t\t\tretString += filesizeString + '</a>';\n\t\t\t}\n\t\t\telse{\n\t\t\t\tretString += enctype + ', ' + filesizeString + '</a>';\n\t\t\t}\n\t\t\treturn retString;\n\t\t}\n\t}\n\treturn retString;\n};\n\nUrl.attachmentDownloadUrl = function(item){\n\tif(item.apiObj.links && item.apiObj.links['enclosure']){\n\t\tif(Zotero.config.proxyDownloads){\n\t\t\t//we have a proxy for downloads at baseDownloadUrl so just pass an itemkey to that\n\t\t\treturn Url.wwwDownloadUrl(item);\n\t\t}\n\t\telse {\n\t\t\treturn Url.apiDownloadUrl(item);\n\t\t}\n\t}\n\treturn false;\n};\n\nUrl.apiDownloadUrl = function(item){\n\tif(item.apiObj.links['enclosure']){\n\t\treturn item.apiObj.links['enclosure']['href'];\n\t}\n\treturn false;\n};\n\nUrl.proxyDownloadUrl = function(item){\n\tif(item.apiObj.links['enclosure']){\n\t\tif(Zotero.config.proxyDownloads){\n\t\t\treturn Zotero.config.baseDownloadUrl + '?itemkey=' + item.get('key');\n\t\t}\n\t\telse{\n\t\t\treturn Url.apiDownloadUrl(item);\n\t\t}\n\t}\n\telse {\n\t\treturn false;\n\t}\n};\n\nUrl.wwwDownloadUrl = function(item){\n\tif(item.apiObj.links['enclosure']){\n\t\treturn Zotero.config.baseZoteroWebsiteUrl + Zotero.config.librarySettings.libraryPathString + '/' + item.get('key') + '/file/view';\n\t}\n\telse {\n\t\treturn false;\n\t}\n};\n\nUrl.publicationsDownloadUrl = function(item){\n\tif(item.apiObj.links['enclosure']){\n\t\treturn item.apiObj.links['enclosure']['href'];\n\t}\n\treturn false;\n};\n\nUrl.attachmentFileDetails = function(item){\n\t//file: offer download\n\tif(!item.apiObj.links['enclosure']) return '';\n\tvar enctype = Zotero.utils.translateMimeType(item.apiObj.links['enclosure'].type);\n\tvar enc = item.apiObj.links['enclosure'];\n\tvar filesizeString = '';\n\tif(enc['length']){\n\t\tvar filesize = parseInt(enc['length'], 10);\n\t\tfilesizeString = '' + filesize + ' B';\n\t\tif(filesize > 1073741824){\n\t\t\tfilesizeString = '' + (filesize / 1073741824).toFixed(1) + ' GB';\n\t\t}\n\t\telse if(filesize > 1048576){\n\t\t\tfilesizeString = '' + (filesize / 1048576).toFixed(1) + ' MB';\n\t\t}\n\t\telse if(filesize > 1024){\n\t\t\tfilesizeString = '' + (filesize / 1024).toFixed(1) + ' KB';\n\t\t}\n\t\treturn '(' + enctype + ', ' + filesizeString + ')';\n\t}\n\telse {\n\t\treturn '(' + enctype + ')';\n\t}\n};\n\nUrl.userWebLibrary = function(slug) {\n\treturn [Zotero.config.baseWebsiteUrl, slug, 'items'].join('/');\n};\n\nUrl.groupWebLibrary = function(group) {\n\tif(group.type == 'Private'){\n\t\treturn [Zotero.config.baseWebsiteUrl, 'groups', group.get('id'), 'items'].join('/');\n\t}\n\telse {\n\t\treturn [Zotero.config.baseWebsiteUrl, 'groups', Zotero.utils.slugify(group.get('name')), 'items'].join('/');\n\t}\n};\n\nUrl.exportUrls = function(config){\n\tlog.debug('Zotero.url.exportUrls', 3);\n\tvar exportUrls = {};\n\tvar exportConfig = {};\n\tZotero.config.exportFormats.forEach(function(format){\n\t\texportConfig = Z.extend(config, {'format':format});\n\t\texportUrls[format] = Zotero.ajax.apiRequestUrl(exportConfig) + Zotero.ajax.apiQueryString({format:format, limit:'25'});\n\t});\n\treturn exportUrls;\n};\n\nUrl.relationUrl = function(libraryType, libraryID, itemKey){\n\treturn 'http://zotero.org/' + libraryType + 's/' + libraryID + '/items/' + itemKey;\n};\n\nmodule.exports = Url;","'use strict';\n\nmodule.exports = function () {this.instance = 'Zotero.User';};\nmodule.exports.prototype = new Zotero.ApiObject();\nmodule.exports.prototype.loadObject = function(ob){\n\tthis.title = ob.title;\n\tthis.author = ob.author;\n\tthis.tagID = ob.tagID;\n\tthis.published = ob.published;\n\tthis.updated = ob.updated;\n\tthis.links = ob.links;\n\tthis.numItems = ob.numItems;\n\tthis.items = ob.items;\n\tthis.tagType = ob.tagType;\n\tthis.modified = ob.modified;\n\tthis.added = ob.added;\n\tthis.key = ob.key;\n};\n\nmodule.exports.prototype.parseXmlUser = function (tel) {\n\tthis.parseXmlEntry(tel);\n\t\n\tvar tagEl = tel.find('content>tag');\n\tif(tagEl.length !== 0){\n\t\tthis.tagKey = tagEl.attr('key');// find(\"zapi\\\\:itemID\").text();\n\t\tthis.libraryID = tagEl.attr('libraryID');\n\t\tthis.tagName = tagEl.attr('name');\n\t\tthis.dateAdded = tagEl.attr('dateAdded');\n\t\tthis.dateModified = tagEl.attr('dateModified');\n\t}\n\t\n};\n","'use strict';\n\nvar log = require('./Log.js').Logger('libZotero:Utils');\n\nvar Utils = {\n\trandomString:function(len, chars) {\n\t\tif (!chars) {\n\t\t\tchars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';\n\t\t}\n\t\tif (!len) {\n\t\t\tlen = 8;\n\t\t}\n\t\tvar randomstring = '';\n\t\tfor (var i=0; i<len; i++) {\n\t\t\tvar rnum = Math.floor(Math.random() * chars.length);\n\t\t\trandomstring += chars.substring(rnum,rnum+1);\n\t\t}\n\t\treturn randomstring;\n\t},\n\t\n\tgetKey: function() {\n\t\tvar baseString = '23456789ABCDEFGHIJKMNPQRSTUVWXZ';\n\t\treturn Utils.randomString(8, baseString);\n\t},\n\t\n\tslugify: function(name){\n\t\tvar slug = name.trim();\n\t\tslug = slug.toLowerCase();\n\t\tslug = slug.replace( /[^a-z0-9 ._-]/g , '');\n\t\tslug = slug.replace(/\\s/g, '_');\n\t\t\n\t\treturn slug;\n\t},\n\t\n\tprependAutocomplete: function(pre, source){\n\t\tlog.debug('Zotero.utils.prependAutocomplete', 3);\n\t\tlog.debug('prepend match: ' + pre, 4);\n\t\tvar satisfy;\n\t\tif(!source){\n\t\t\tlog.warn('source is not defined');\n\t\t}\n\t\tif(pre === ''){\n\t\t\tsatisfy = source.slice(0);\n\t\t\treturn satisfy;\n\t\t}\n\t\tvar plen = pre.length;\n\t\tvar plower = pre.toLowerCase();\n\t\tsatisfy = source.map(function(n){\n\t\t\tif(n.substr(0, plen).toLowerCase() == plower){\n\t\t\t\treturn n;\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t});\n\t\treturn satisfy;\n\t},\n\t\n\tmatchAnyAutocomplete: function(pre, source){\n\t\tlog.debug('Zotero.utils.matchAnyAutocomplete', 3);\n\t\tlog.debug('matchAny match: ' + pre, 4);\n\t\tvar satisfy;\n\t\tif(!source){\n\t\t\tlog.warn('source is not defined');\n\t\t}\n\t\tif(pre === ''){\n\t\t\tsatisfy = source.slice(0);\n\t\t\treturn satisfy;\n\t\t}\n\t\tvar plower = pre.toLowerCase();\n\t\tsatisfy = source.map(function(n){\n\t\t\tif(n.toLowerCase().indexOf(plower) != -1){\n\t\t\t\treturn n;\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t});\n\t\treturn satisfy;\n\t},\n\t\n\tlibraryString: function(type, libraryID){\n\t\tvar lstring = '';\n\t\tif(type == 'user') lstring = 'u';\n\t\telse if(type == 'group') lstring = 'g';\n\t\telse if(type == 'publications') lstring = 'p';\n\t\tlstring += libraryID;\n\t\treturn lstring;\n\t},\n\t\n\tparseLibString: function(libraryString){\n\t\tvar type;\n\t\tvar libraryID;\n\t\tif(libraryString.charAt(0) == 'u'){\n\t\t\ttype = 'user';\n\t\t}\n\t\telse if(libraryString.charAt(0) == 'g'){\n\t\t\ttype = 'group';\n\t\t}\n\t\telse if(libraryString.charAt(0) == 'p'){\n\t\t\ttype = 'publications';\n\t\t}\n\t\telse{\n\t\t\tthrow new Error('unexpected type character in libraryString');\n\t\t}\n\t\tlibraryID = parseInt(libraryString.substring(1), 10);\n\t\tif(isNaN(libraryID)){\n\t\t\tthrow new Error('NaN libraryID');\n\t\t}\n\t\treturn {libraryType:type, libraryID: libraryID};\n\t},\n\t\n\t//return true if retrieved more than lifetime minutes ago\n\tstale: function(retrievedDate, lifetime){\n\t\tvar now = Date.now(); //current local time\n\t\tvar elapsed = now.getTime() - retrievedDate.getTime();\n\t\tif((elapsed / 60000) > lifetime){\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\t\n\tentityify: function(str){\n\t\tvar character = {\n\t\t\t'<' : '&lt;',\n\t\t\t'>' : '&gt;',\n\t\t\t'&' : '&amp;',\n\t\t\t'\"' : '&quot;'\n\t\t};\n\t\treturn str.replace(/[<>&\"]/g, function(c) {\n\t\t\treturn character[c];\n\t\t});\n\t},\n\t\n\tparseApiDate: function(datestr){\n\t\t//var parsems = Date.parse(datestr);\n\t\t\n\t\tvar re = /([0-9]+)-([0-9]+)-([0-9]+)T([0-9]+):([0-9]+):([0-9]+)Z/;\n\t\tvar matches = re.exec(datestr);\n\t\tif(matches === null){\n\t\t\tlog.debug(`error parsing api date: ${datestr}`, 2);\n\t\t\treturn null;\n\t\t}\n\t\telse{\n\t\t\tvar date = new Date(Date.UTC(matches[1], matches[2]-1, matches[3], matches[4], matches[5], matches[6]));\n\t\t\treturn date;\n\t\t}\n\t},\n\t\n\treadCookie: function(name) {\n\t\tvar nameEQ = name + '=';\n\t\tvar ca = document.cookie.split(';');\n\t\tfor(var i=0;i < ca.length;i++) {\n\t\t\tvar c = ca[i];\n\t\t\twhile (c.charAt(0)==' ') c = c.substring(1,c.length);\n\t\t\tif (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length,c.length);\n\t\t}\n\t\treturn null;\n\t},\n\t\n\t/**\n\t * Translate common mimetypes to user friendly versions\n\t *\n\t * @param string $mimeType\n\t * @return string\n\t */\n\ttranslateMimeType: function(mimeType)\n\t{\n\t\tswitch (mimeType) {\n\t\t\tcase 'text/html':\n\t\t\t\treturn 'html';\n\t\t\t\n\t\t\tcase 'application/pdf':\n\t\t\tcase 'application/x-pdf':\n\t\t\tcase 'application/acrobat':\n\t\t\tcase 'applications/vnd.pdf':\n\t\t\tcase 'text/pdf':\n\t\t\tcase 'text/x-pdf':\n\t\t\t\treturn 'pdf';\n\t\t\t\n\t\t\tcase 'image/jpg':\n\t\t\tcase 'image/jpeg':\n\t\t\t\treturn 'jpg';\n\t\t\t\n\t\t\tcase 'image/gif':\n\t\t\t\treturn 'gif';\n\t\t\t\n\t\t\tcase 'application/msword':\n\t\t\tcase 'application/doc':\n\t\t\tcase 'application/vnd.msword':\n\t\t\tcase 'application/vnd.ms-word':\n\t\t\tcase 'application/winword':\n\t\t\tcase 'application/word':\n\t\t\tcase 'application/x-msw6':\n\t\t\tcase 'application/x-msword':\n\t\t\t\treturn 'doc';\n\t\t\t\n\t\t\tcase 'application/vnd.oasis.opendocument.text':\n\t\t\tcase 'application/x-vnd.oasis.opendocument.text':\n\t\t\t\treturn 'odt';\n\t\t\t\n\t\t\tcase 'video/flv':\n\t\t\tcase 'video/x-flv':\n\t\t\t\treturn 'flv';\n\t\t\t\n\t\t\tcase 'image/tif':\n\t\t\tcase 'image/tiff':\n\t\t\tcase 'image/x-tif':\n\t\t\tcase 'image/x-tiff':\n\t\t\tcase 'application/tif':\n\t\t\tcase 'application/x-tif':\n\t\t\tcase 'application/tiff':\n\t\t\tcase 'application/x-tiff':\n\t\t\t\treturn 'tiff';\n\t\t\t\n\t\t\tcase 'application/zip':\n\t\t\tcase 'application/x-zip':\n\t\t\tcase 'application/x-zip-compressed':\n\t\t\tcase 'application/x-compress':\n\t\t\tcase 'application/x-compressed':\n\t\t\tcase 'multipart/x-zip':\n\t\t\t\treturn 'zip';\n\t\t\t\t\n\t\t\tcase 'video/quicktime':\n\t\t\tcase 'video/x-quicktime':\n\t\t\t\treturn 'mov';\n\t\t\t\t\n\t\t\tcase 'video/avi':\n\t\t\tcase 'video/msvideo':\n\t\t\tcase 'video/x-msvideo':\n\t\t\t\treturn 'avi';\n\t\t\t\t\n\t\t\tcase 'audio/wav':\n\t\t\tcase 'audio/x-wav':\n\t\t\tcase 'audio/wave':\n\t\t\t\treturn 'wav';\n\t\t\t\t\n\t\t\tcase 'audio/aiff':\n\t\t\tcase 'audio/x-aiff':\n\t\t\tcase 'sound/aiff':\n\t\t\t\treturn 'aiff';\n\t\t\t\n\t\t\tcase 'text/plain':\n\t\t\t\treturn 'plain text';\n\t\t\tcase 'application/rtf':\n\t\t\t\treturn 'rtf';\n\t\t\t\t\n\t\t\tdefault:\n\t\t\t\treturn mimeType;\n\t\t}\n\t},\n\n\t/**\n\t * Get the permissions a key has for a library\n\t * if no key is passed use the currently set key for the library\n\t *\n\t * @param int|string $userID\n\t * @param string $key\n\t * @return array $keyPermissions\n\t */\n\tgetKeyPermissions: function(userID, key) {\n\t\tif(!userID){\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tif(!key){\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tvar urlconfig = {'target':'key', 'libraryType':'user', 'libraryID':userID, 'apiKey':key};\n\t\tvar requestUrl = Zotero.ajax.apiRequestString(urlconfig);\n\t\t\n\t\treturn Zotero.ajaxRequest(requestUrl)\n\t\t.then(function(response){\n\t\t\tvar keyObject = JSON.parse(response.data);\n\t\t\treturn keyObject;\n\t\t});\n\t},\n\n\t/**\n\t * Given a query string, parse keys/values into an object\n\t **/\n\tparseQuery: function(query) {\n\t\tlog.debug('parseQuery');\n\t\tlog.debug(query);\n\t\tvar params = {};\n\t\tvar match;\n\t\tvar pl = /\\+/g;  // Regex for replacing addition symbol with a space\n\t\tvar search = /([^&=]+)=?([^&]*)/g;\n\t\tvar decode = function (s) {\n\t\t\treturn decodeURIComponent(s.replace(pl, ' '));\n\t\t};\n\n\t\twhile(match = search.exec(query)) {\n\t\t\tparams[decode(match[1])] = decode(match[2]);\n\t\t}\n\t\treturn params;\n\t},\n\n\tbuildQuery: function(params = {}) {\n\t\tlet q = '?';\n\t\tfor(let p in params) {\n\t\t\tq += `&${encodeURIComponent(p)}=${encodeURIComponent(params[p])}`;\n\t\t}\n\t\treturn q;\n\t},\n\n\t//extract the section of a url between ? and #\n\tquerystring: function(href) {\n\t\tif(href.indexOf('?') == -1) {\n\t\t\treturn '';\n\t\t}\n\t\tvar hashindex = (href.indexOf('#') != -1) ? href.indexOf('#') : undefined;\n\t\tvar q = href.substring(href.indexOf('?') + 1, hashindex);\n\t\treturn q;\n\t}\n};\n\nmodule.exports = Utils;"]}